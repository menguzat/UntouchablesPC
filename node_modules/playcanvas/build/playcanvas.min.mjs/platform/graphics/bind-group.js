import"../../core/debug.js";import{UNIFORM_BUFFER_DEFAULT_SLOT_NAME as t}from"./constants.js";let s=0;class i{constructor(i,e,r){this.id=s++,this.device=i,this.format=e,this.dirty=!0,this.impl=i.createBindGroupImpl(this),this.textures=[],this.uniformBuffers=[],this.defaultUniformBuffer=r,r&&this.setUniformBuffer(t,r)}destroy(){this.impl.destroy(),this.impl=null,this.format=null,this.defaultUniformBuffer=null}setUniformBuffer(t,s){const i=this.format.bufferFormatsMap.get(t);this.uniformBuffers[i]!==s&&(this.uniformBuffers[i]=s,this.dirty=!0)}setTexture(t,s){const i=this.format.textureFormatsMap.get(t);this.textures[i]!==s&&(this.textures[i]=s,this.dirty=!0)}update(){const t=this.format.textureFormats;for(let s=0;s<t.length;s++){const i=t[s],e=i.scopeId.value;this.setTexture(i.name,e)}this.dirty&&(this.dirty=!1,this.impl.update(this))}}export{i as BindGroup};
