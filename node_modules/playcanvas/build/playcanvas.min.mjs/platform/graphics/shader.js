import"../../core/debug.js";import{Preprocessor as t}from"../../core/preprocessor.js";let e=0;class i{constructor(i,s){this.meshUniformBufferFormat=void 0,this.meshBindGroupFormat=void 0,this.id=e++,this.device=i,this.definition=s,this.name=s.name||"Untitled",s.vshader=t.run(s.vshader),s.fshader=t.run(s.fshader),this.init(),this.impl=i.createShaderImpl(this)}init(){this.ready=!1,this.failed=!1}get label(){return`Shader Id ${this.id} ${this.name}`}destroy(){this.device.onDestroyShader(this),this.impl.destroy(this)}loseContext(){this.init(),this.impl.loseContext()}restoreContext(){this.impl.restoreContext(this.device,this)}}export{i as Shader};
