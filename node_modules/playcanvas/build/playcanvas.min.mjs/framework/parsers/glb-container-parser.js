import{path as t}from"../../core/path.js";import{Asset as r}from"../asset/asset.js";import{GlbParser as e}from"./glb-parser.js";import{GlbContainerResource as s}from"./glb-container-resource.js";class a{constructor(t,r,s){this._device=t,this._assets=r,this._defaultMaterial=e.createDefaultMaterial(),this.maxRetries=s}_getUrlWithoutParams(t){return t.indexOf("?")>=0?t.split("?")[0]:t}load(a,i,o){r.fetchArrayBuffer(a.load,((r,l)=>{r?i(r):e.parse(this._getUrlWithoutParams(a.original),t.extractPath(a.load),l,this._device,o.registry,o.options,((t,r)=>{t?i(t):i(null,new s(r,o,this._assets,this._defaultMaterial))}))}),o,this.maxRetries)}open(t,r,e){return r}patch(t,r){}}export{a as GlbContainerParser};
