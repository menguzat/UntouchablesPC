import{extends as s}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{ADDRESS_CLAMP_TO_EDGE as e,ADDRESS_REPEAT as t}from"../../../platform/graphics/constants.js";import{Texture as a}from"../../../platform/graphics/texture.js";import{Asset as r}from"../../asset/asset.js";import{basisTranscode as o}from"../../handlers/basis.js";class i{constructor(s,e){this.device=e,this.maxRetries=0}load(s,e,t){const a=this.device;r.fetchArrayBuffer(s.load,((r,i)=>{var l,m,n,d;r?e(r):(l=i,o(a,s.load,l,e,{isGGGR:0!=(8&(null==t||null==(m=t.file)||null==(n=m.variants)||null==(d=n.basis)?void 0:d.opt))})||e(`Basis module not found. Asset '${t.name}' basis texture variant will not be loaded.`))}),t,this.maxRetries)}open(r,o,i,l={}){const m=new a(i,s({name:r,addressU:o.cubemap?e:t,addressV:o.cubemap?e:t,width:o.width,height:o.height,format:o.format,cubemap:o.cubemap,levels:o.levels},l));return m.upload(),m}}export{i as BasisParser};
