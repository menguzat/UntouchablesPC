/**
 * A frustum is a shape that defines the viewing space of a camera. It can be used to determine
 * visibility of points and bounding spheres. Typically, you would not create a Frustum shape
 * directly, but instead query {@link CameraComponent#frustum}.
 */
class Frustum {
  /**
   * Create a new Frustum instance.
   *
   * @example
   * const frustum = new pc.Frustum();
   */
  constructor() {
    this.planes = [];
    for (let i = 0; i < 6; i++) this.planes[i] = [];
  }

  /**
   * Updates the frustum shape based on the supplied 4x4 matrix.
   *
   * @param {import('../math/mat4.js').Mat4} matrix - The matrix describing the shape of the
   * frustum.
   * @example
   * // Create a perspective projection matrix
   * const projMat = pc.Mat4();
   * projMat.setPerspective(45, 16 / 9, 1, 1000);
   *
   * // Create a frustum shape that is represented by the matrix
   * const frustum = new pc.Frustum();
   * frustum.setFromMat4(projMat);
   */
  setFromMat4(matrix) {
    const vpm = matrix.data;
    let plane;
    const planes = this.planes;

    // Extract the numbers for the RIGHT plane
    plane = planes[0];
    plane[0] = vpm[3] - vpm[0];
    plane[1] = vpm[7] - vpm[4];
    plane[2] = vpm[11] - vpm[8];
    plane[3] = vpm[15] - vpm[12];
    // Normalize the result
    let t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the numbers for the LEFT plane
    plane = planes[1];
    plane[0] = vpm[3] + vpm[0];
    plane[1] = vpm[7] + vpm[4];
    plane[2] = vpm[11] + vpm[8];
    plane[3] = vpm[15] + vpm[12];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the BOTTOM plane
    plane = planes[2];
    plane[0] = vpm[3] + vpm[1];
    plane[1] = vpm[7] + vpm[5];
    plane[2] = vpm[11] + vpm[9];
    plane[3] = vpm[15] + vpm[13];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the TOP plane
    plane = planes[3];
    plane[0] = vpm[3] - vpm[1];
    plane[1] = vpm[7] - vpm[5];
    plane[2] = vpm[11] - vpm[9];
    plane[3] = vpm[15] - vpm[13];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the FAR plane
    plane = planes[4];
    plane[0] = vpm[3] - vpm[2];
    plane[1] = vpm[7] - vpm[6];
    plane[2] = vpm[11] - vpm[10];
    plane[3] = vpm[15] - vpm[14];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;

    // Extract the NEAR plane
    plane = planes[5];
    plane[0] = vpm[3] + vpm[2];
    plane[1] = vpm[7] + vpm[6];
    plane[2] = vpm[11] + vpm[10];
    plane[3] = vpm[15] + vpm[14];
    // Normalize the result
    t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);
    plane[0] /= t;
    plane[1] /= t;
    plane[2] /= t;
    plane[3] /= t;
  }

  /**
   * Tests whether a point is inside the frustum. Note that points lying in a frustum plane are
   * considered to be outside the frustum.
   *
   * @param {import('../math/vec3.js').Vec3} point - The point to test.
   * @returns {boolean} True if the point is inside the frustum, false otherwise.
   */
  containsPoint(point) {
    let p, plane;
    for (p = 0; p < 6; p++) {
      plane = this.planes[p];
      if (plane[0] * point.x + plane[1] * point.y + plane[2] * point.z + plane[3] <= 0) {
        return false;
      }
    }
    return true;
  }

  /**
   * Tests whether a bounding sphere intersects the frustum. If the sphere is outside the
   * frustum, zero is returned. If the sphere intersects the frustum, 1 is returned. If the
   * sphere is completely inside the frustum, 2 is returned. Note that a sphere touching a
   * frustum plane from the outside is considered to be outside the frustum.
   *
   * @param {import('./bounding-sphere.js').BoundingSphere} sphere - The sphere to test.
   * @returns {number} 0 if the bounding sphere is outside the frustum, 1 if it intersects the
   * frustum and 2 if it is contained by the frustum.
   */
  containsSphere(sphere) {
    let c = 0;
    let d;
    let p;
    const sr = sphere.radius;
    const sc = sphere.center;
    const scx = sc.x;
    const scy = sc.y;
    const scz = sc.z;
    const planes = this.planes;
    let plane;
    for (p = 0; p < 6; p++) {
      plane = planes[p];
      d = plane[0] * scx + plane[1] * scy + plane[2] * scz + plane[3];
      if (d <= -sr) return 0;
      if (d > sr) c++;
    }
    return c === 6 ? 2 : 1;
  }
}

export { Frustum };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJ1c3R1bS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvcmUvc2hhcGUvZnJ1c3R1bS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgZnJ1c3R1bSBpcyBhIHNoYXBlIHRoYXQgZGVmaW5lcyB0aGUgdmlld2luZyBzcGFjZSBvZiBhIGNhbWVyYS4gSXQgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB2aXNpYmlsaXR5IG9mIHBvaW50cyBhbmQgYm91bmRpbmcgc3BoZXJlcy4gVHlwaWNhbGx5LCB5b3Ugd291bGQgbm90IGNyZWF0ZSBhIEZydXN0dW0gc2hhcGVcbiAqIGRpcmVjdGx5LCBidXQgaW5zdGVhZCBxdWVyeSB7QGxpbmsgQ2FtZXJhQ29tcG9uZW50I2ZydXN0dW19LlxuICovXG5jbGFzcyBGcnVzdHVtIHtcbiAgICBwbGFuZXMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBGcnVzdHVtIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBmcnVzdHVtID0gbmV3IHBjLkZydXN0dW0oKTtcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspXG4gICAgICAgICAgICB0aGlzLnBsYW5lc1tpXSA9IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGZydXN0dW0gc2hhcGUgYmFzZWQgb24gdGhlIHN1cHBsaWVkIDR4NCBtYXRyaXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vbWF0aC9tYXQ0LmpzJykuTWF0NH0gbWF0cml4IC0gVGhlIG1hdHJpeCBkZXNjcmliaW5nIHRoZSBzaGFwZSBvZiB0aGVcbiAgICAgKiBmcnVzdHVtLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gQ3JlYXRlIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgKiBjb25zdCBwcm9qTWF0ID0gcGMuTWF0NCgpO1xuICAgICAqIHByb2pNYXQuc2V0UGVyc3BlY3RpdmUoNDUsIDE2IC8gOSwgMSwgMTAwMCk7XG4gICAgICpcbiAgICAgKiAvLyBDcmVhdGUgYSBmcnVzdHVtIHNoYXBlIHRoYXQgaXMgcmVwcmVzZW50ZWQgYnkgdGhlIG1hdHJpeFxuICAgICAqIGNvbnN0IGZydXN0dW0gPSBuZXcgcGMuRnJ1c3R1bSgpO1xuICAgICAqIGZydXN0dW0uc2V0RnJvbU1hdDQocHJvak1hdCk7XG4gICAgICovXG4gICAgc2V0RnJvbU1hdDQobWF0cml4KSB7XG4gICAgICAgIGNvbnN0IHZwbSA9IG1hdHJpeC5kYXRhO1xuXG4gICAgICAgIGxldCBwbGFuZTtcbiAgICAgICAgY29uc3QgcGxhbmVzID0gdGhpcy5wbGFuZXM7XG5cbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgbnVtYmVycyBmb3IgdGhlIFJJR0hUIHBsYW5lXG4gICAgICAgIHBsYW5lID0gcGxhbmVzWzBdO1xuICAgICAgICBwbGFuZVswXSA9IHZwbVszXSAtIHZwbVswXTtcbiAgICAgICAgcGxhbmVbMV0gPSB2cG1bN10gLSB2cG1bNF07XG4gICAgICAgIHBsYW5lWzJdID0gdnBtWzExXSAtIHZwbVs4XTtcbiAgICAgICAgcGxhbmVbM10gPSB2cG1bMTVdIC0gdnBtWzEyXTtcbiAgICAgICAgLy8gTm9ybWFsaXplIHRoZSByZXN1bHRcbiAgICAgICAgbGV0IHQgPSBNYXRoLnNxcnQocGxhbmVbMF0gKiBwbGFuZVswXSArIHBsYW5lWzFdICogcGxhbmVbMV0gKyBwbGFuZVsyXSAqIHBsYW5lWzJdKTtcbiAgICAgICAgcGxhbmVbMF0gLz0gdDtcbiAgICAgICAgcGxhbmVbMV0gLz0gdDtcbiAgICAgICAgcGxhbmVbMl0gLz0gdDtcbiAgICAgICAgcGxhbmVbM10gLz0gdDtcblxuICAgICAgICAvLyBFeHRyYWN0IHRoZSBudW1iZXJzIGZvciB0aGUgTEVGVCBwbGFuZVxuICAgICAgICBwbGFuZSA9IHBsYW5lc1sxXTtcbiAgICAgICAgcGxhbmVbMF0gPSB2cG1bM10gKyB2cG1bMF07XG4gICAgICAgIHBsYW5lWzFdID0gdnBtWzddICsgdnBtWzRdO1xuICAgICAgICBwbGFuZVsyXSA9IHZwbVsxMV0gKyB2cG1bOF07XG4gICAgICAgIHBsYW5lWzNdID0gdnBtWzE1XSArIHZwbVsxMl07XG4gICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcmVzdWx0XG4gICAgICAgIHQgPSBNYXRoLnNxcnQocGxhbmVbMF0gKiBwbGFuZVswXSArIHBsYW5lWzFdICogcGxhbmVbMV0gKyBwbGFuZVsyXSAqIHBsYW5lWzJdKTtcbiAgICAgICAgcGxhbmVbMF0gLz0gdDtcbiAgICAgICAgcGxhbmVbMV0gLz0gdDtcbiAgICAgICAgcGxhbmVbMl0gLz0gdDtcbiAgICAgICAgcGxhbmVbM10gLz0gdDtcblxuICAgICAgICAvLyBFeHRyYWN0IHRoZSBCT1RUT00gcGxhbmVcbiAgICAgICAgcGxhbmUgPSBwbGFuZXNbMl07XG4gICAgICAgIHBsYW5lWzBdID0gdnBtWzNdICsgdnBtWzFdO1xuICAgICAgICBwbGFuZVsxXSA9IHZwbVs3XSArIHZwbVs1XTtcbiAgICAgICAgcGxhbmVbMl0gPSB2cG1bMTFdICsgdnBtWzldO1xuICAgICAgICBwbGFuZVszXSA9IHZwbVsxNV0gKyB2cG1bMTNdO1xuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3VsdFxuICAgICAgICB0ID0gTWF0aC5zcXJ0KHBsYW5lWzBdICogcGxhbmVbMF0gKyBwbGFuZVsxXSAqIHBsYW5lWzFdICsgcGxhbmVbMl0gKiBwbGFuZVsyXSk7XG4gICAgICAgIHBsYW5lWzBdIC89IHQ7XG4gICAgICAgIHBsYW5lWzFdIC89IHQ7XG4gICAgICAgIHBsYW5lWzJdIC89IHQ7XG4gICAgICAgIHBsYW5lWzNdIC89IHQ7XG5cbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgVE9QIHBsYW5lXG4gICAgICAgIHBsYW5lID0gcGxhbmVzWzNdO1xuICAgICAgICBwbGFuZVswXSA9IHZwbVszXSAtIHZwbVsxXTtcbiAgICAgICAgcGxhbmVbMV0gPSB2cG1bN10gLSB2cG1bNV07XG4gICAgICAgIHBsYW5lWzJdID0gdnBtWzExXSAtIHZwbVs5XTtcbiAgICAgICAgcGxhbmVbM10gPSB2cG1bMTVdIC0gdnBtWzEzXTtcbiAgICAgICAgLy8gTm9ybWFsaXplIHRoZSByZXN1bHRcbiAgICAgICAgdCA9IE1hdGguc3FydChwbGFuZVswXSAqIHBsYW5lWzBdICsgcGxhbmVbMV0gKiBwbGFuZVsxXSArIHBsYW5lWzJdICogcGxhbmVbMl0pO1xuICAgICAgICBwbGFuZVswXSAvPSB0O1xuICAgICAgICBwbGFuZVsxXSAvPSB0O1xuICAgICAgICBwbGFuZVsyXSAvPSB0O1xuICAgICAgICBwbGFuZVszXSAvPSB0O1xuXG4gICAgICAgIC8vIEV4dHJhY3QgdGhlIEZBUiBwbGFuZVxuICAgICAgICBwbGFuZSA9IHBsYW5lc1s0XTtcbiAgICAgICAgcGxhbmVbMF0gPSB2cG1bM10gLSB2cG1bMl07XG4gICAgICAgIHBsYW5lWzFdID0gdnBtWzddIC0gdnBtWzZdO1xuICAgICAgICBwbGFuZVsyXSA9IHZwbVsxMV0gLSB2cG1bMTBdO1xuICAgICAgICBwbGFuZVszXSA9IHZwbVsxNV0gLSB2cG1bMTRdO1xuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3VsdFxuICAgICAgICB0ID0gTWF0aC5zcXJ0KHBsYW5lWzBdICogcGxhbmVbMF0gKyBwbGFuZVsxXSAqIHBsYW5lWzFdICsgcGxhbmVbMl0gKiBwbGFuZVsyXSk7XG4gICAgICAgIHBsYW5lWzBdIC89IHQ7XG4gICAgICAgIHBsYW5lWzFdIC89IHQ7XG4gICAgICAgIHBsYW5lWzJdIC89IHQ7XG4gICAgICAgIHBsYW5lWzNdIC89IHQ7XG5cbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgTkVBUiBwbGFuZVxuICAgICAgICBwbGFuZSA9IHBsYW5lc1s1XTtcbiAgICAgICAgcGxhbmVbMF0gPSB2cG1bM10gKyB2cG1bMl07XG4gICAgICAgIHBsYW5lWzFdID0gdnBtWzddICsgdnBtWzZdO1xuICAgICAgICBwbGFuZVsyXSA9IHZwbVsxMV0gKyB2cG1bMTBdO1xuICAgICAgICBwbGFuZVszXSA9IHZwbVsxNV0gKyB2cG1bMTRdO1xuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3VsdFxuICAgICAgICB0ID0gTWF0aC5zcXJ0KHBsYW5lWzBdICogcGxhbmVbMF0gKyBwbGFuZVsxXSAqIHBsYW5lWzFdICsgcGxhbmVbMl0gKiBwbGFuZVsyXSk7XG4gICAgICAgIHBsYW5lWzBdIC89IHQ7XG4gICAgICAgIHBsYW5lWzFdIC89IHQ7XG4gICAgICAgIHBsYW5lWzJdIC89IHQ7XG4gICAgICAgIHBsYW5lWzNdIC89IHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVzdHMgd2hldGhlciBhIHBvaW50IGlzIGluc2lkZSB0aGUgZnJ1c3R1bS4gTm90ZSB0aGF0IHBvaW50cyBseWluZyBpbiBhIGZydXN0dW0gcGxhbmUgYXJlXG4gICAgICogY29uc2lkZXJlZCB0byBiZSBvdXRzaWRlIHRoZSBmcnVzdHVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL21hdGgvdmVjMy5qcycpLlZlYzN9IHBvaW50IC0gVGhlIHBvaW50IHRvIHRlc3QuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBvaW50IGlzIGluc2lkZSB0aGUgZnJ1c3R1bSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGNvbnRhaW5zUG9pbnQocG9pbnQpIHtcbiAgICAgICAgbGV0IHAsIHBsYW5lO1xuICAgICAgICBmb3IgKHAgPSAwOyBwIDwgNjsgcCsrKSB7XG4gICAgICAgICAgICBwbGFuZSA9IHRoaXMucGxhbmVzW3BdO1xuICAgICAgICAgICAgaWYgKHBsYW5lWzBdICogcG9pbnQueCArIHBsYW5lWzFdICogcG9pbnQueSArIHBsYW5lWzJdICogcG9pbnQueiArIHBsYW5lWzNdIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVzdHMgd2hldGhlciBhIGJvdW5kaW5nIHNwaGVyZSBpbnRlcnNlY3RzIHRoZSBmcnVzdHVtLiBJZiB0aGUgc3BoZXJlIGlzIG91dHNpZGUgdGhlXG4gICAgICogZnJ1c3R1bSwgemVybyBpcyByZXR1cm5lZC4gSWYgdGhlIHNwaGVyZSBpbnRlcnNlY3RzIHRoZSBmcnVzdHVtLCAxIGlzIHJldHVybmVkLiBJZiB0aGVcbiAgICAgKiBzcGhlcmUgaXMgY29tcGxldGVseSBpbnNpZGUgdGhlIGZydXN0dW0sIDIgaXMgcmV0dXJuZWQuIE5vdGUgdGhhdCBhIHNwaGVyZSB0b3VjaGluZyBhXG4gICAgICogZnJ1c3R1bSBwbGFuZSBmcm9tIHRoZSBvdXRzaWRlIGlzIGNvbnNpZGVyZWQgdG8gYmUgb3V0c2lkZSB0aGUgZnJ1c3R1bS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL2JvdW5kaW5nLXNwaGVyZS5qcycpLkJvdW5kaW5nU3BoZXJlfSBzcGhlcmUgLSBUaGUgc3BoZXJlIHRvIHRlc3QuXG4gICAgICogQHJldHVybnMge251bWJlcn0gMCBpZiB0aGUgYm91bmRpbmcgc3BoZXJlIGlzIG91dHNpZGUgdGhlIGZydXN0dW0sIDEgaWYgaXQgaW50ZXJzZWN0cyB0aGVcbiAgICAgKiBmcnVzdHVtIGFuZCAyIGlmIGl0IGlzIGNvbnRhaW5lZCBieSB0aGUgZnJ1c3R1bS5cbiAgICAgKi9cbiAgICBjb250YWluc1NwaGVyZShzcGhlcmUpIHtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBsZXQgZDtcbiAgICAgICAgbGV0IHA7XG5cbiAgICAgICAgY29uc3Qgc3IgPSBzcGhlcmUucmFkaXVzO1xuICAgICAgICBjb25zdCBzYyA9IHNwaGVyZS5jZW50ZXI7XG4gICAgICAgIGNvbnN0IHNjeCA9IHNjLng7XG4gICAgICAgIGNvbnN0IHNjeSA9IHNjLnk7XG4gICAgICAgIGNvbnN0IHNjeiA9IHNjLno7XG4gICAgICAgIGNvbnN0IHBsYW5lcyA9IHRoaXMucGxhbmVzO1xuICAgICAgICBsZXQgcGxhbmU7XG5cbiAgICAgICAgZm9yIChwID0gMDsgcCA8IDY7IHArKykge1xuICAgICAgICAgICAgcGxhbmUgPSBwbGFuZXNbcF07XG4gICAgICAgICAgICBkID0gcGxhbmVbMF0gKiBzY3ggKyBwbGFuZVsxXSAqIHNjeSArIHBsYW5lWzJdICogc2N6ICsgcGxhbmVbM107XG4gICAgICAgICAgICBpZiAoZCA8PSAtc3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAoZCA+IHNyKVxuICAgICAgICAgICAgICAgIGMrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoYyA9PT0gNikgPyAyIDogMTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEZydXN0dW0gfTtcbiJdLCJuYW1lcyI6WyJGcnVzdHVtIiwiY29uc3RydWN0b3IiLCJwbGFuZXMiLCJpIiwic2V0RnJvbU1hdDQiLCJtYXRyaXgiLCJ2cG0iLCJkYXRhIiwicGxhbmUiLCJ0IiwiTWF0aCIsInNxcnQiLCJjb250YWluc1BvaW50IiwicG9pbnQiLCJwIiwieCIsInkiLCJ6IiwiY29udGFpbnNTcGhlcmUiLCJzcGhlcmUiLCJjIiwiZCIsInNyIiwicmFkaXVzIiwic2MiLCJjZW50ZXIiLCJzY3giLCJzY3kiLCJzY3oiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxPQUFPLENBQUM7QUFHVjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBV0EsR0FBRztJQUFBLElBUmRDLENBQUFBLE1BQU0sR0FBRyxFQUFFLENBQUE7QUFTUCxJQUFBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQ3RCLElBQUksQ0FBQ0QsTUFBTSxDQUFDQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDM0IsR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lDLFdBQVdBLENBQUNDLE1BQU0sRUFBRTtBQUNoQixJQUFBLE1BQU1DLEdBQUcsR0FBR0QsTUFBTSxDQUFDRSxJQUFJLENBQUE7QUFFdkIsSUFBQSxJQUFJQyxLQUFLLENBQUE7QUFDVCxJQUFBLE1BQU1OLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQTs7QUFFMUI7QUFDQU0sSUFBQUEsS0FBSyxHQUFHTixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakJNLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDM0JFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUI7QUFDQSxJQUFBLElBQUlHLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNILEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNsRkEsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7O0FBRWI7QUFDQUQsSUFBQUEsS0FBSyxHQUFHTixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakJNLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDM0JFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUI7QUFDQUcsSUFBQUEsQ0FBQyxHQUFHQyxJQUFJLENBQUNDLElBQUksQ0FBQ0gsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzlFQSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTs7QUFFYjtBQUNBRCxJQUFBQSxLQUFLLEdBQUdOLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNqQk0sSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMzQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUM1QjtBQUNBRyxJQUFBQSxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsSUFBSSxDQUFDSCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDOUVBLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBOztBQUViO0FBQ0FELElBQUFBLEtBQUssR0FBR04sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2pCTSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBR0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFCRSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBR0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFCRSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBR0EsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzNCRSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBR0EsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0FBQzVCO0FBQ0FHLElBQUFBLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNILEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM5RUEsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7QUFDYkQsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxDQUFDLENBQUE7O0FBRWI7QUFDQUQsSUFBQUEsS0FBSyxHQUFHTixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakJNLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUJFLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHQSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUI7QUFDQUcsSUFBQUEsQ0FBQyxHQUFHQyxJQUFJLENBQUNDLElBQUksQ0FBQ0gsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzlFQSxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTtBQUNiRCxJQUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUlDLENBQUMsQ0FBQTs7QUFFYjtBQUNBRCxJQUFBQSxLQUFLLEdBQUdOLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNqQk0sSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMxQkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUM1QkUsSUFBQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHRixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUdBLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUM1QjtBQUNBRyxJQUFBQSxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsSUFBSSxDQUFDSCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBR0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDOUVBLElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2JELElBQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSUMsQ0FBQyxDQUFBO0FBQ2pCLEdBQUE7O0FBRUE7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUcsYUFBYUEsQ0FBQ0MsS0FBSyxFQUFFO0lBQ2pCLElBQUlDLENBQUMsRUFBRU4sS0FBSyxDQUFBO0lBQ1osS0FBS00sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQUU7QUFDcEJOLE1BQUFBLEtBQUssR0FBRyxJQUFJLENBQUNOLE1BQU0sQ0FBQ1ksQ0FBQyxDQUFDLENBQUE7QUFDdEIsTUFBQSxJQUFJTixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0UsQ0FBQyxHQUFHUCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0csQ0FBQyxHQUFHUixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdLLEtBQUssQ0FBQ0ksQ0FBQyxHQUFHVCxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQzlFLFFBQUEsT0FBTyxLQUFLLENBQUE7QUFDaEIsT0FBQTtBQUNKLEtBQUE7QUFDQSxJQUFBLE9BQU8sSUFBSSxDQUFBO0FBQ2YsR0FBQTs7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJVSxjQUFjQSxDQUFDQyxNQUFNLEVBQUU7SUFDbkIsSUFBSUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNULElBQUEsSUFBSUMsQ0FBQyxDQUFBO0FBQ0wsSUFBQSxJQUFJUCxDQUFDLENBQUE7QUFFTCxJQUFBLE1BQU1RLEVBQUUsR0FBR0gsTUFBTSxDQUFDSSxNQUFNLENBQUE7QUFDeEIsSUFBQSxNQUFNQyxFQUFFLEdBQUdMLE1BQU0sQ0FBQ00sTUFBTSxDQUFBO0FBQ3hCLElBQUEsTUFBTUMsR0FBRyxHQUFHRixFQUFFLENBQUNULENBQUMsQ0FBQTtBQUNoQixJQUFBLE1BQU1ZLEdBQUcsR0FBR0gsRUFBRSxDQUFDUixDQUFDLENBQUE7QUFDaEIsSUFBQSxNQUFNWSxHQUFHLEdBQUdKLEVBQUUsQ0FBQ1AsQ0FBQyxDQUFBO0FBQ2hCLElBQUEsTUFBTWYsTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFBO0FBQzFCLElBQUEsSUFBSU0sS0FBSyxDQUFBO0lBRVQsS0FBS00sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQUU7QUFDcEJOLE1BQUFBLEtBQUssR0FBR04sTUFBTSxDQUFDWSxDQUFDLENBQUMsQ0FBQTtNQUNqQk8sQ0FBQyxHQUFHYixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdrQixHQUFHLEdBQUdsQixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdtQixHQUFHLEdBQUduQixLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUdvQixHQUFHLEdBQUdwQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDL0QsTUFBQSxJQUFJYSxDQUFDLElBQUksQ0FBQ0MsRUFBRSxFQUNSLE9BQU8sQ0FBQyxDQUFBO0FBQ1osTUFBQSxJQUFJRCxDQUFDLEdBQUdDLEVBQUUsRUFDTkYsQ0FBQyxFQUFFLENBQUE7QUFDWCxLQUFBO0FBRUEsSUFBQSxPQUFRQSxDQUFDLEtBQUssQ0FBQyxHQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDNUIsR0FBQTtBQUNKOzs7OyJ9
