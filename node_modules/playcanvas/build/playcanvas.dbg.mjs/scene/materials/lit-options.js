import { Debug } from '../../core/debug.js';
import { BLEND_NONE, FOG_NONE, GAMMA_NONE } from '../constants.js';

/**
 * The lit options determines how the lit-shader gets generated. It specifies a set of
 * parameters which triggers different fragment and vertex shader generation in the backend.
 */
class LitOptions {
  constructor() {
    this.hasTangents = false;
    /**
     * Object containing custom shader chunks that will replace default ones.
     *
     * @type {Object<string, string>}
     */
    this.chunks = {};
    this._pass = 0;
    this._isForwardPass = false;
    /**
     * Enable alpha testing. See {@link Material#alphaTest}.
     *
     * @type {boolean}
     */
    this.alphaTest = false;
    /**
     * Override fragment shader numeric precision. Can be "lowp", "mediump", "highp" or null to use
     * default.
     *
     * @type {string}
     */
    this.forceFragmentPrecision = null;
    /**
     * The value of {@link Material#blendType}.
     *
     * @type {number}
     */
    this.blendType = BLEND_NONE;
    this.separateAmbient = false;
    this.screenSpace = false;
    this.skin = false;
    /**
     * If hardware instancing compatible shader should be generated. Transform is read from
     * per-instance {@link VertexBuffer} instead of shader's uniforms.
     *
     * @type {boolean}
     */
    this.useInstancing = false;
    /**
     * If morphing code should be generated to morph positions.
     *
     * @type {boolean}
     */
    this.useMorphPosition = false;
    /**
     * If morphing code should be generated to morph normals.
     *
     * @type {boolean}
     */
    this.useMorphNormal = false;
    this.useMorphTextureBased = false;
    this.nineSlicedMode = 0;
    this.clusteredLightingEnabled = true;
    this.clusteredLightingCookiesEnabled = false;
    this.clusteredLightingShadowsEnabled = false;
    this.clusteredLightingShadowType = 0;
    this.clusteredLightingAreaLightsEnabled = false;
    this.vertexColors = false;
    this.lightMapEnabled = false;
    this.useLightMapVertexColors = false;
    this.dirLightMapEnabled = false;
    this.heightMapEnabled = false;
    this.normalMapEnabled = false;
    this.clearCoatNormalMapEnabled = false;
    this.aoMapEnabled = false;
    this.useAoVertexColors = false;
    this.diffuseMapEnabled = false;
    this.useAmbientTint = false;
    /**
     * Replaced the whole fragment shader with this string.
     *
     * @type {string}
     */
    this.customFragmentShader = null;
    this.pixelSnap = false;
    this.useClearCoatNormalMap = false;
    this.useDiffuseMap = false;
    this.useAoMap = false;
    this.detailModes = 0;
    /**
     * The value of {@link StandardMaterial#shadingModel}.
     *
     * @type {number}
     */
    this.shadingModel = 0;
    /**
     * If ambient spherical harmonics are used. Ambient SH replace prefiltered cubemap ambient on
     * certain platforms (mostly Android) for performance reasons.
     *
     * @type {boolean}
     */
    this.ambientSH = false;
    /**
     * Use slightly cheaper normal mapping code (skip tangent space normalization). Can look buggy
     * sometimes.
     *
     * @type {boolean}
     */
    this.fastTbn = false;
    /**
     * The value of {@link Material#twoSidedLighting}.
     *
     * @type {boolean}
     */
    this.twoSidedLighting = false;
    /**
     * The value of {@link StandardMaterial#occludeSpecular}.
     *
     * @type {number}
     */
    this.occludeSpecular = 0;
    /**
     * Defines if {@link StandardMaterial#occludeSpecularIntensity} constant should affect specular
     * occlusion.
     *
     * @type {boolean}
     */
    this.occludeSpecularFloat = false;
    this.useMsdf = false;
    this.msdfTextAttribute = 0;
    /**
     * Enable alpha to coverage. See {@link Material#alphaToCoverage}.
     *
     * @type {boolean}
     */
    this.alphaToCoverage = false;
    /**
     * Enable specular fade. See {@link Material#opacityFadesSpecular}.
     *
     * @type {boolean}
     */
    this.opacityFadesSpecular = false;
    /**
     * The value of {@link StandardMaterial#cubeMapProjection}.
     *
     * @type {number}
     */
    this.cubeMapProjection = 0;
    /**
     * The value of {@link StandardMaterial#occludeDirect}.
     *
     * @type {boolean}
     */
    this.occludeDirect = false;
    /**
     * The value of {@link StandardMaterial#conserveEnergy}.
     *
     * @type {boolean}
     */
    this.conserveEnergy = false;
    /**
     * If any specular or reflections are needed at all.
     *
     * @type {boolean}
     */
    this.useSpecular = false;
    this.useSpecularityFactor = false;
    this.useSpecularColor = false;
    this.enableGGXSpecular = false;
    /**
     * The value of {@link StandardMaterial#fresnelModel}.
     *
     * @type {number}
     */
    this.fresnelModel = 0;
    /**
     * If refraction is used.
     *
     * @type {boolean}
     */
    this.useRefraction = false;
    this.useClearCoat = false;
    this.useSheen = false;
    this.useIridescence = false;
    /**
     * The value of {@link StandardMaterial#useMetalness}.
     *
     * @type {boolean}
     */
    this.useMetalness = false;
    this.useDynamicRefraction = false;
    /**
     * The type of fog being applied in the shader. See {@link Scene#fog} for the list of possible
     * values.
     *
     * @type {string}
     */
    this.fog = FOG_NONE;
    /**
     * The type of gamma correction being applied in the shader. See {@link Scene#gammaCorrection}
     * for the list of possible values.
     *
     * @type {number}
     */
    this.gamma = GAMMA_NONE;
    /**
     * The type of tone mapping being applied in the shader. See {@link Scene#toneMapping} for the
     * list of possible values.
     *
     * @type {number}
     */
    this.toneMap = -1;
    /**
     * If cubemaps require seam fixing (see {@link Texture#options.fixCubemapSeams}).
     *
     * @type {boolean}
     */
    this.fixSeams = false;
    /**
     * One of "envAtlasHQ", "envAtlas", "cubeMap", "sphereMap".
     *
     * @type {string}
     */
    this.reflectionSource = null;
    this.reflectionEncoding = null;
    /**
     * One of "ambientSH", "envAtlas", "constant".
     *
     * @type {string}
     */
    this.ambientSource = 'constant';
    this.ambientEncoding = null;
    // TODO: add a test for if non skybox cubemaps have rotation (when this is supported) - for now
    // assume no non-skybox cubemap rotation
    /**
     * Skybox intensity factor.
     *
     * @type {number}
     */
    this.skyboxIntensity = 1.0;
    /**
     * If cube map rotation is enabled.
     *
     * @type {boolean}
     */
    this.useCubeMapRotation = false;
    this.lightMapWithoutAmbient = false;
    this.lights = [];
    this.noShadow = false;
    this.lightMaskDynamic = 0x0;
  }
  set pass(p) {
    Debug.warn(`pc.LitOptions#pass should be set by its parent pc.StandardMaterialOptions, setting it directly has no effect.`);
  }
  get pass() {
    return this._pass;
  }
  set isForwardPass(p) {
    Debug.warn(`pc.LitOptions#isForwardPass should be set by its parent pc.StandardMaterialOptions, setting it directly has no effect.`);
  }
  get isForwardPass() {
    return this._isForwardPass;
  }
}

export { LitOptions };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl0LW9wdGlvbnMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zY2VuZS9tYXRlcmlhbHMvbGl0LW9wdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7XG4gICAgQkxFTkRfTk9ORSwgRk9HX05PTkUsIEdBTU1BX05PTkVcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcblxuLyoqXG4gKiBUaGUgbGl0IG9wdGlvbnMgZGV0ZXJtaW5lcyBob3cgdGhlIGxpdC1zaGFkZXIgZ2V0cyBnZW5lcmF0ZWQuIEl0IHNwZWNpZmllcyBhIHNldCBvZlxuICogcGFyYW1ldGVycyB3aGljaCB0cmlnZ2VycyBkaWZmZXJlbnQgZnJhZ21lbnQgYW5kIHZlcnRleCBzaGFkZXIgZ2VuZXJhdGlvbiBpbiB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgTGl0T3B0aW9ucyB7XG4gICAgaGFzVGFuZ2VudHMgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIE9iamVjdCBjb250YWluaW5nIGN1c3RvbSBzaGFkZXIgY2h1bmtzIHRoYXQgd2lsbCByZXBsYWNlIGRlZmF1bHQgb25lcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICAgICAqL1xuICAgIGNodW5rcyA9IHt9O1xuXG4gICAgX3Bhc3MgPSAwO1xuXG4gICAgX2lzRm9yd2FyZFBhc3MgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBhbHBoYSB0ZXN0aW5nLiBTZWUge0BsaW5rIE1hdGVyaWFsI2FscGhhVGVzdH0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBhbHBoYVRlc3QgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIGZyYWdtZW50IHNoYWRlciBudW1lcmljIHByZWNpc2lvbi4gQ2FuIGJlIFwibG93cFwiLCBcIm1lZGl1bXBcIiwgXCJoaWdocFwiIG9yIG51bGwgdG8gdXNlXG4gICAgICogZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZm9yY2VGcmFnbWVudFByZWNpc2lvbiA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgb2Yge0BsaW5rIE1hdGVyaWFsI2JsZW5kVHlwZX0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJsZW5kVHlwZSA9IEJMRU5EX05PTkU7XG5cbiAgICBzZXBhcmF0ZUFtYmllbnQgPSBmYWxzZTtcblxuICAgIHNjcmVlblNwYWNlID0gZmFsc2U7XG5cbiAgICBza2luID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBJZiBoYXJkd2FyZSBpbnN0YW5jaW5nIGNvbXBhdGlibGUgc2hhZGVyIHNob3VsZCBiZSBnZW5lcmF0ZWQuIFRyYW5zZm9ybSBpcyByZWFkIGZyb21cbiAgICAgKiBwZXItaW5zdGFuY2Uge0BsaW5rIFZlcnRleEJ1ZmZlcn0gaW5zdGVhZCBvZiBzaGFkZXIncyB1bmlmb3Jtcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHVzZUluc3RhbmNpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIElmIG1vcnBoaW5nIGNvZGUgc2hvdWxkIGJlIGdlbmVyYXRlZCB0byBtb3JwaCBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB1c2VNb3JwaFBvc2l0aW9uID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBJZiBtb3JwaGluZyBjb2RlIHNob3VsZCBiZSBnZW5lcmF0ZWQgdG8gbW9ycGggbm9ybWFscy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHVzZU1vcnBoTm9ybWFsID0gZmFsc2U7XG5cbiAgICB1c2VNb3JwaFRleHR1cmVCYXNlZCA9IGZhbHNlO1xuXG4gICAgbmluZVNsaWNlZE1vZGUgPSAwO1xuXG4gICAgY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkID0gdHJ1ZTtcblxuICAgIGNsdXN0ZXJlZExpZ2h0aW5nQ29va2llc0VuYWJsZWQgPSBmYWxzZTtcblxuICAgIGNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93c0VuYWJsZWQgPSBmYWxzZTtcblxuICAgIGNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93VHlwZSA9IDA7XG5cbiAgICBjbHVzdGVyZWRMaWdodGluZ0FyZWFMaWdodHNFbmFibGVkID0gZmFsc2U7XG5cbiAgICB2ZXJ0ZXhDb2xvcnMgPSBmYWxzZTtcblxuICAgIGxpZ2h0TWFwRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgdXNlTGlnaHRNYXBWZXJ0ZXhDb2xvcnMgPSBmYWxzZTtcblxuICAgIGRpckxpZ2h0TWFwRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgaGVpZ2h0TWFwRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgbm9ybWFsTWFwRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgY2xlYXJDb2F0Tm9ybWFsTWFwRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgYW9NYXBFbmFibGVkID0gZmFsc2U7XG5cbiAgICB1c2VBb1ZlcnRleENvbG9ycyA9IGZhbHNlO1xuXG4gICAgZGlmZnVzZU1hcEVuYWJsZWQgPSBmYWxzZTtcblxuICAgIHVzZUFtYmllbnRUaW50ID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlZCB0aGUgd2hvbGUgZnJhZ21lbnQgc2hhZGVyIHdpdGggdGhpcyBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGN1c3RvbUZyYWdtZW50U2hhZGVyID0gbnVsbDtcblxuICAgIHBpeGVsU25hcCA9IGZhbHNlO1xuXG4gICAgdXNlQ2xlYXJDb2F0Tm9ybWFsTWFwID0gZmFsc2U7XG5cbiAgICB1c2VEaWZmdXNlTWFwID0gZmFsc2U7XG5cbiAgICB1c2VBb01hcCA9IGZhbHNlO1xuXG4gICAgZGV0YWlsTW9kZXMgPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIG9mIHtAbGluayBTdGFuZGFyZE1hdGVyaWFsI3NoYWRpbmdNb2RlbH0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNoYWRpbmdNb2RlbCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBJZiBhbWJpZW50IHNwaGVyaWNhbCBoYXJtb25pY3MgYXJlIHVzZWQuIEFtYmllbnQgU0ggcmVwbGFjZSBwcmVmaWx0ZXJlZCBjdWJlbWFwIGFtYmllbnQgb25cbiAgICAgKiBjZXJ0YWluIHBsYXRmb3JtcyAobW9zdGx5IEFuZHJvaWQpIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgYW1iaWVudFNIID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBVc2Ugc2xpZ2h0bHkgY2hlYXBlciBub3JtYWwgbWFwcGluZyBjb2RlIChza2lwIHRhbmdlbnQgc3BhY2Ugbm9ybWFsaXphdGlvbikuIENhbiBsb29rIGJ1Z2d5XG4gICAgICogc29tZXRpbWVzLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZmFzdFRibiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIG9mIHtAbGluayBNYXRlcmlhbCN0d29TaWRlZExpZ2h0aW5nfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHR3b1NpZGVkTGlnaHRpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBvZiB7QGxpbmsgU3RhbmRhcmRNYXRlcmlhbCNvY2NsdWRlU3BlY3VsYXJ9LlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBvY2NsdWRlU3BlY3VsYXIgPSAwO1xuXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBpZiB7QGxpbmsgU3RhbmRhcmRNYXRlcmlhbCNvY2NsdWRlU3BlY3VsYXJJbnRlbnNpdHl9IGNvbnN0YW50IHNob3VsZCBhZmZlY3Qgc3BlY3VsYXJcbiAgICAgKiBvY2NsdXNpb24uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBvY2NsdWRlU3BlY3VsYXJGbG9hdCA9IGZhbHNlO1xuXG4gICAgdXNlTXNkZiA9IGZhbHNlO1xuXG4gICAgbXNkZlRleHRBdHRyaWJ1dGUgPSAwO1xuXG4gICAgLyoqXG4gICAgICogRW5hYmxlIGFscGhhIHRvIGNvdmVyYWdlLiBTZWUge0BsaW5rIE1hdGVyaWFsI2FscGhhVG9Db3ZlcmFnZX0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBhbHBoYVRvQ292ZXJhZ2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBzcGVjdWxhciBmYWRlLiBTZWUge0BsaW5rIE1hdGVyaWFsI29wYWNpdHlGYWRlc1NwZWN1bGFyfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIG9wYWNpdHlGYWRlc1NwZWN1bGFyID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgb2Yge0BsaW5rIFN0YW5kYXJkTWF0ZXJpYWwjY3ViZU1hcFByb2plY3Rpb259LlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBjdWJlTWFwUHJvamVjdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgb2Yge0BsaW5rIFN0YW5kYXJkTWF0ZXJpYWwjb2NjbHVkZURpcmVjdH0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBvY2NsdWRlRGlyZWN0ID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgb2Yge0BsaW5rIFN0YW5kYXJkTWF0ZXJpYWwjY29uc2VydmVFbmVyZ3l9LlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgY29uc2VydmVFbmVyZ3kgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIElmIGFueSBzcGVjdWxhciBvciByZWZsZWN0aW9ucyBhcmUgbmVlZGVkIGF0IGFsbC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHVzZVNwZWN1bGFyID0gZmFsc2U7XG5cbiAgICB1c2VTcGVjdWxhcml0eUZhY3RvciA9IGZhbHNlO1xuXG4gICAgdXNlU3BlY3VsYXJDb2xvciA9IGZhbHNlO1xuXG4gICAgZW5hYmxlR0dYU3BlY3VsYXIgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBvZiB7QGxpbmsgU3RhbmRhcmRNYXRlcmlhbCNmcmVzbmVsTW9kZWx9LlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBmcmVzbmVsTW9kZWwgPSAwO1xuXG4gICAgLyoqXG4gICAgICogSWYgcmVmcmFjdGlvbiBpcyB1c2VkLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdXNlUmVmcmFjdGlvbiA9IGZhbHNlO1xuXG4gICAgdXNlQ2xlYXJDb2F0ID0gZmFsc2U7XG5cbiAgICB1c2VTaGVlbiA9IGZhbHNlO1xuXG4gICAgdXNlSXJpZGVzY2VuY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBvZiB7QGxpbmsgU3RhbmRhcmRNYXRlcmlhbCN1c2VNZXRhbG5lc3N9LlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdXNlTWV0YWxuZXNzID0gZmFsc2U7XG5cbiAgICB1c2VEeW5hbWljUmVmcmFjdGlvbiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgZm9nIGJlaW5nIGFwcGxpZWQgaW4gdGhlIHNoYWRlci4gU2VlIHtAbGluayBTY2VuZSNmb2d9IGZvciB0aGUgbGlzdCBvZiBwb3NzaWJsZVxuICAgICAqIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZm9nID0gRk9HX05PTkU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiBnYW1tYSBjb3JyZWN0aW9uIGJlaW5nIGFwcGxpZWQgaW4gdGhlIHNoYWRlci4gU2VlIHtAbGluayBTY2VuZSNnYW1tYUNvcnJlY3Rpb259XG4gICAgICogZm9yIHRoZSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2FtbWEgPSBHQU1NQV9OT05FO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdG9uZSBtYXBwaW5nIGJlaW5nIGFwcGxpZWQgaW4gdGhlIHNoYWRlci4gU2VlIHtAbGluayBTY2VuZSN0b25lTWFwcGluZ30gZm9yIHRoZVxuICAgICAqIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0b25lTWFwID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBJZiBjdWJlbWFwcyByZXF1aXJlIHNlYW0gZml4aW5nIChzZWUge0BsaW5rIFRleHR1cmUjb3B0aW9ucy5maXhDdWJlbWFwU2VhbXN9KS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGZpeFNlYW1zID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBPbmUgb2YgXCJlbnZBdGxhc0hRXCIsIFwiZW52QXRsYXNcIiwgXCJjdWJlTWFwXCIsIFwic3BoZXJlTWFwXCIuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHJlZmxlY3Rpb25Tb3VyY2UgPSBudWxsO1xuXG4gICAgcmVmbGVjdGlvbkVuY29kaW5nID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIE9uZSBvZiBcImFtYmllbnRTSFwiLCBcImVudkF0bGFzXCIsIFwiY29uc3RhbnRcIi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgYW1iaWVudFNvdXJjZSA9ICdjb25zdGFudCc7XG5cbiAgICBhbWJpZW50RW5jb2RpbmcgPSBudWxsO1xuXG4gICAgLy8gVE9ETzogYWRkIGEgdGVzdCBmb3IgaWYgbm9uIHNreWJveCBjdWJlbWFwcyBoYXZlIHJvdGF0aW9uICh3aGVuIHRoaXMgaXMgc3VwcG9ydGVkKSAtIGZvciBub3dcbiAgICAvLyBhc3N1bWUgbm8gbm9uLXNreWJveCBjdWJlbWFwIHJvdGF0aW9uXG4gICAgLyoqXG4gICAgICogU2t5Ym94IGludGVuc2l0eSBmYWN0b3IuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNreWJveEludGVuc2l0eSA9IDEuMDtcblxuICAgIC8qKlxuICAgICAqIElmIGN1YmUgbWFwIHJvdGF0aW9uIGlzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB1c2VDdWJlTWFwUm90YXRpb24gPSBmYWxzZTtcblxuICAgIGxpZ2h0TWFwV2l0aG91dEFtYmllbnQgPSBmYWxzZTtcblxuICAgIGxpZ2h0cyA9IFtdO1xuXG4gICAgbm9TaGFkb3cgPSBmYWxzZTtcblxuICAgIGxpZ2h0TWFza0R5bmFtaWMgPSAweDA7XG5cbiAgICBzZXQgcGFzcyhwKSB7XG4gICAgICAgIERlYnVnLndhcm4oYHBjLkxpdE9wdGlvbnMjcGFzcyBzaG91bGQgYmUgc2V0IGJ5IGl0cyBwYXJlbnQgcGMuU3RhbmRhcmRNYXRlcmlhbE9wdGlvbnMsIHNldHRpbmcgaXQgZGlyZWN0bHkgaGFzIG5vIGVmZmVjdC5gKTtcbiAgICB9XG5cbiAgICBnZXQgcGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bhc3M7XG4gICAgfVxuXG4gICAgc2V0IGlzRm9yd2FyZFBhc3MocCkge1xuICAgICAgICBEZWJ1Zy53YXJuKGBwYy5MaXRPcHRpb25zI2lzRm9yd2FyZFBhc3Mgc2hvdWxkIGJlIHNldCBieSBpdHMgcGFyZW50IHBjLlN0YW5kYXJkTWF0ZXJpYWxPcHRpb25zLCBzZXR0aW5nIGl0IGRpcmVjdGx5IGhhcyBubyBlZmZlY3QuYCk7XG4gICAgfVxuXG4gICAgZ2V0IGlzRm9yd2FyZFBhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ZvcndhcmRQYXNzO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgTGl0T3B0aW9ucyB9O1xuIl0sIm5hbWVzIjpbIkxpdE9wdGlvbnMiLCJjb25zdHJ1Y3RvciIsImhhc1RhbmdlbnRzIiwiY2h1bmtzIiwiX3Bhc3MiLCJfaXNGb3J3YXJkUGFzcyIsImFscGhhVGVzdCIsImZvcmNlRnJhZ21lbnRQcmVjaXNpb24iLCJibGVuZFR5cGUiLCJCTEVORF9OT05FIiwic2VwYXJhdGVBbWJpZW50Iiwic2NyZWVuU3BhY2UiLCJza2luIiwidXNlSW5zdGFuY2luZyIsInVzZU1vcnBoUG9zaXRpb24iLCJ1c2VNb3JwaE5vcm1hbCIsInVzZU1vcnBoVGV4dHVyZUJhc2VkIiwibmluZVNsaWNlZE1vZGUiLCJjbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQiLCJjbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkIiwiY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dzRW5hYmxlZCIsImNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93VHlwZSIsImNsdXN0ZXJlZExpZ2h0aW5nQXJlYUxpZ2h0c0VuYWJsZWQiLCJ2ZXJ0ZXhDb2xvcnMiLCJsaWdodE1hcEVuYWJsZWQiLCJ1c2VMaWdodE1hcFZlcnRleENvbG9ycyIsImRpckxpZ2h0TWFwRW5hYmxlZCIsImhlaWdodE1hcEVuYWJsZWQiLCJub3JtYWxNYXBFbmFibGVkIiwiY2xlYXJDb2F0Tm9ybWFsTWFwRW5hYmxlZCIsImFvTWFwRW5hYmxlZCIsInVzZUFvVmVydGV4Q29sb3JzIiwiZGlmZnVzZU1hcEVuYWJsZWQiLCJ1c2VBbWJpZW50VGludCIsImN1c3RvbUZyYWdtZW50U2hhZGVyIiwicGl4ZWxTbmFwIiwidXNlQ2xlYXJDb2F0Tm9ybWFsTWFwIiwidXNlRGlmZnVzZU1hcCIsInVzZUFvTWFwIiwiZGV0YWlsTW9kZXMiLCJzaGFkaW5nTW9kZWwiLCJhbWJpZW50U0giLCJmYXN0VGJuIiwidHdvU2lkZWRMaWdodGluZyIsIm9jY2x1ZGVTcGVjdWxhciIsIm9jY2x1ZGVTcGVjdWxhckZsb2F0IiwidXNlTXNkZiIsIm1zZGZUZXh0QXR0cmlidXRlIiwiYWxwaGFUb0NvdmVyYWdlIiwib3BhY2l0eUZhZGVzU3BlY3VsYXIiLCJjdWJlTWFwUHJvamVjdGlvbiIsIm9jY2x1ZGVEaXJlY3QiLCJjb25zZXJ2ZUVuZXJneSIsInVzZVNwZWN1bGFyIiwidXNlU3BlY3VsYXJpdHlGYWN0b3IiLCJ1c2VTcGVjdWxhckNvbG9yIiwiZW5hYmxlR0dYU3BlY3VsYXIiLCJmcmVzbmVsTW9kZWwiLCJ1c2VSZWZyYWN0aW9uIiwidXNlQ2xlYXJDb2F0IiwidXNlU2hlZW4iLCJ1c2VJcmlkZXNjZW5jZSIsInVzZU1ldGFsbmVzcyIsInVzZUR5bmFtaWNSZWZyYWN0aW9uIiwiZm9nIiwiRk9HX05PTkUiLCJnYW1tYSIsIkdBTU1BX05PTkUiLCJ0b25lTWFwIiwiZml4U2VhbXMiLCJyZWZsZWN0aW9uU291cmNlIiwicmVmbGVjdGlvbkVuY29kaW5nIiwiYW1iaWVudFNvdXJjZSIsImFtYmllbnRFbmNvZGluZyIsInNreWJveEludGVuc2l0eSIsInVzZUN1YmVNYXBSb3RhdGlvbiIsImxpZ2h0TWFwV2l0aG91dEFtYmllbnQiLCJsaWdodHMiLCJub1NoYWRvdyIsImxpZ2h0TWFza0R5bmFtaWMiLCJwYXNzIiwicCIsIkRlYnVnIiwid2FybiIsImlzRm9yd2FyZFBhc3MiXSwibWFwcGluZ3MiOiI7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsVUFBVSxDQUFDO0VBQUFDLFdBQUEsR0FBQTtJQUFBLElBQ2JDLENB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
