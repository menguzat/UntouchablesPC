import { CULLFACE_FRONT } from '../platform/graphics/constants.js';
import { ShaderProcessorOptions } from '../platform/graphics/shader-processor-options.js';
import { SHADER_FORWARDHDR, GAMMA_SRGBHDR, GAMMA_NONE, TONEMAP_LINEAR, LAYERID_SKYBOX } from './constants.js';
import { createBox } from './procedural.js';
import { GraphNode } from './graph-node.js';
import { Material } from './materials/material.js';
import { MeshInstance } from './mesh-instance.js';
import { getProgramLibrary } from './shader-lib/get-program-library.js';
import { skybox } from './shader-lib/programs/skybox.js';

/**
 * A visual representation of the sky.
 *
 * @ignore
 */
class Sky {
  /**
   * @param {import('../platform/graphics/graphics-device.js').GraphicsDevice} device - The
   * graphics device.
   * @param {import('./scene.js').Scene} scene - The scene owning the sky.
   * @param {import('../platform/graphics/texture.js').Texture} texture - The texture of the sky.
   */
  constructor(device, scene, texture) {
    /**
     * Mesh instance representing the visuals of the sky.
     *
     * @type {MeshInstance}
     */
    this.meshInstance = void 0;
    const material = new Material();
    material.getShaderVariant = function (dev, sc, defs, staticLightList, pass, sortedLights, viewUniformFormat, viewBindGroupFormat) {
      const options = {
        pass: pass,
        encoding: texture.encoding,
        useIntensity: scene.skyboxIntensity !== 1 || scene.physicalUnits,
        gamma: pass === SHADER_FORWARDHDR ? scene.gammaCorrection ? GAMMA_SRGBHDR : GAMMA_NONE : scene.gammaCorrection,
        toneMapping: pass === SHADER_FORWARDHDR ? TONEMAP_LINEAR : scene.toneMapping
      };
      if (texture.cubemap) {
        options.type = 'cubemap';
        options.mip = texture.fixCubemapSeams ? scene.skyboxMip : 0;
        options.fixSeams = texture.fixCubemapSeams;
      } else {
        options.type = 'envAtlas';
      }
      const processingOptions = new ShaderProcessorOptions(viewUniformFormat, viewBindGroupFormat);
      const library = getProgramLibrary(device);
      library.register('skybox', skybox);
      return library.getProgram('skybox', options, processingOptions);
    };
    if (texture.cubemap) {
      material.setParameter('texture_cubeMap', texture);
    } else {
      material.setParameter('texture_envAtlas', texture);
      material.setParameter('mipLevel', scene._skyboxMip);
    }
    material.cull = CULLFACE_FRONT;
    material.depthWrite = false;
    const skyLayer = scene.layers.getLayerById(LAYERID_SKYBOX);
    if (skyLayer) {
      const node = new GraphNode('Skybox');
      const mesh = createBox(device);
      const meshInstance = new MeshInstance(mesh, material, node);
      this.meshInstance = meshInstance;
      meshInstance.cull = false;
      meshInstance._noDepthDrawGl1 = true;

      // disable picker, the material has custom update shader and does not handle picker variant
      meshInstance.pick = false;
      skyLayer.addMeshInstances([meshInstance]);
      this.skyLayer = skyLayer;
    }
  }
  destroy() {
    if (this.meshInstance) {
      if (this.skyLayer) {
        this.skyLayer.removeMeshInstances([this.meshInstance]);
      }
      this.meshInstance.destroy();
      this.meshInstance = null;
    }
  }
}

export { Sky };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2t5LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2NlbmUvc2t5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENVTExGQUNFX0ZST05UIH0gZnJvbSAnLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFNoYWRlclByb2Nlc3Nvck9wdGlvbnMgfSBmcm9tICcuLi9wbGF0Zm9ybS9ncmFwaGljcy9zaGFkZXItcHJvY2Vzc29yLW9wdGlvbnMuanMnO1xuXG5pbXBvcnQgeyBHQU1NQV9OT05FLCBHQU1NQV9TUkdCSERSLCBMQVlFUklEX1NLWUJPWCwgU0hBREVSX0ZPUldBUkRIRFIsIFRPTkVNQVBfTElORUFSIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgY3JlYXRlQm94IH0gZnJvbSAnLi9wcm9jZWR1cmFsLmpzJztcbmltcG9ydCB7IEdyYXBoTm9kZSB9IGZyb20gJy4vZ3JhcGgtbm9kZS5qcyc7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gJy4vbWF0ZXJpYWxzL21hdGVyaWFsLmpzJztcbmltcG9ydCB7IE1lc2hJbnN0YW5jZSB9IGZyb20gJy4vbWVzaC1pbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBnZXRQcm9ncmFtTGlicmFyeSB9IGZyb20gJy4vc2hhZGVyLWxpYi9nZXQtcHJvZ3JhbS1saWJyYXJ5LmpzJztcbmltcG9ydCB7IHNreWJveCB9IGZyb20gJy4vc2hhZGVyLWxpYi9wcm9ncmFtcy9za3lib3guanMnO1xuXG4vKipcbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBza3kuXG4gKlxuICogQGlnbm9yZVxuICovXG5jbGFzcyBTa3kge1xuICAgIC8qKlxuICAgICAqIE1lc2ggaW5zdGFuY2UgcmVwcmVzZW50aW5nIHRoZSB2aXN1YWxzIG9mIHRoZSBza3kuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TWVzaEluc3RhbmNlfVxuICAgICAqL1xuICAgIG1lc2hJbnN0YW5jZTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9wbGF0Zm9ybS9ncmFwaGljcy9ncmFwaGljcy1kZXZpY2UuanMnKS5HcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlXG4gICAgICogZ3JhcGhpY3MgZGV2aWNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL3NjZW5lLmpzJykuU2NlbmV9IHNjZW5lIC0gVGhlIHNjZW5lIG93bmluZyB0aGUgc2t5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9wbGF0Zm9ybS9ncmFwaGljcy90ZXh0dXJlLmpzJykuVGV4dHVyZX0gdGV4dHVyZSAtIFRoZSB0ZXh0dXJlIG9mIHRoZSBza3kuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBzY2VuZSwgdGV4dHVyZSkge1xuXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCk7XG5cbiAgICAgICAgbWF0ZXJpYWwuZ2V0U2hhZGVyVmFyaWFudCA9IGZ1bmN0aW9uIChkZXYsIHNjLCBkZWZzLCBzdGF0aWNMaWdodExpc3QsIHBhc3MsIHNvcnRlZExpZ2h0cywgdmlld1VuaWZvcm1Gb3JtYXQsIHZpZXdCaW5kR3JvdXBGb3JtYXQpIHtcblxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBwYXNzOiBwYXNzLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nOiB0ZXh0dXJlLmVuY29kaW5nLFxuICAgICAgICAgICAgICAgIHVzZUludGVuc2l0eTogc2NlbmUuc2t5Ym94SW50ZW5zaXR5ICE9PSAxIHx8IHNjZW5lLnBoeXNpY2FsVW5pdHMsXG4gICAgICAgICAgICAgICAgZ2FtbWE6IChwYXNzID09PSBTSEFERVJfRk9SV0FSREhEUiA/IChzY2VuZS5nYW1tYUNvcnJlY3Rpb24gPyBHQU1NQV9TUkdCSERSIDogR0FNTUFfTk9ORSkgOiBzY2VuZS5nYW1tYUNvcnJlY3Rpb24pLFxuICAgICAgICAgICAgICAgIHRvbmVNYXBwaW5nOiAocGFzcyA9PT0gU0hBREVSX0ZPUldBUkRIRFIgPyBUT05FTUFQX0xJTkVBUiA6IHNjZW5lLnRvbmVNYXBwaW5nKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHRleHR1cmUuY3ViZW1hcCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZSA9ICdjdWJlbWFwJztcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1pcCA9IHRleHR1cmUuZml4Q3ViZW1hcFNlYW1zID8gc2NlbmUuc2t5Ym94TWlwIDogMDtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZpeFNlYW1zID0gdGV4dHVyZS5maXhDdWJlbWFwU2VhbXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZSA9ICdlbnZBdGxhcyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NpbmdPcHRpb25zID0gbmV3IFNoYWRlclByb2Nlc3Nvck9wdGlvbnModmlld1VuaWZvcm1Gb3JtYXQsIHZpZXdCaW5kR3JvdXBGb3JtYXQpO1xuXG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5ID0gZ2V0UHJvZ3JhbUxpYnJhcnkoZGV2aWNlKTtcbiAgICAgICAgICAgIGxpYnJhcnkucmVnaXN0ZXIoJ3NreWJveCcsIHNreWJveCk7XG4gICAgICAgICAgICByZXR1cm4gbGlicmFyeS5nZXRQcm9ncmFtKCdza3lib3gnLCBvcHRpb25zLCBwcm9jZXNzaW5nT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRleHR1cmUuY3ViZW1hcCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCd0ZXh0dXJlX2N1YmVNYXAnLCB0ZXh0dXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldFBhcmFtZXRlcigndGV4dHVyZV9lbnZBdGxhcycsIHRleHR1cmUpO1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UGFyYW1ldGVyKCdtaXBMZXZlbCcsIHNjZW5lLl9za3lib3hNaXApO1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0ZXJpYWwuY3VsbCA9IENVTExGQUNFX0ZST05UO1xuICAgICAgICBtYXRlcmlhbC5kZXB0aFdyaXRlID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3Qgc2t5TGF5ZXIgPSBzY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeUlkKExBWUVSSURfU0tZQk9YKTtcbiAgICAgICAgaWYgKHNreUxheWVyKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbmV3IEdyYXBoTm9kZSgnU2t5Ym94Jyk7XG4gICAgICAgICAgICBjb25zdCBtZXNoID0gY3JlYXRlQm94KGRldmljZSk7XG4gICAgICAgICAgICBjb25zdCBtZXNoSW5zdGFuY2UgPSBuZXcgTWVzaEluc3RhbmNlKG1lc2gsIG1hdGVyaWFsLCBub2RlKTtcbiAgICAgICAgICAgIHRoaXMubWVzaEluc3RhbmNlID0gbWVzaEluc3RhbmNlO1xuXG4gICAgICAgICAgICBtZXNoSW5zdGFuY2UuY3VsbCA9IGZhbHNlO1xuICAgICAgICAgICAgbWVzaEluc3RhbmNlLl9ub0RlcHRoRHJhd0dsMSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGRpc2FibGUgcGlja2VyLCB0aGUgbWF0ZXJpYWwgaGFzIGN1c3RvbSB1cGRhdGUgc2hhZGVyIGFuZCBkb2VzIG5vdCBoYW5kbGUgcGlja2VyIHZhcmlhbnRcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5waWNrID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHNreUxheWVyLmFkZE1lc2hJbnN0YW5jZXMoW21lc2hJbnN0YW5jZV0pO1xuICAgICAgICAgICAgdGhpcy5za3lMYXllciA9IHNreUxheWVyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMubWVzaEluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5za3lMYXllcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2t5TGF5ZXIucmVtb3ZlTWVzaEluc3RhbmNlcyhbdGhpcy5tZXNoSW5zdGFuY2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVzaEluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMubWVzaEluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHsgU2t5IH07XG4iXSwibmFtZXMiOlsiU2t5IiwiY29uc3RydWN0b3IiLCJkZXZpY2UiLCJzY2VuZSIsInRleHR1cmUiLCJtZXNoSW5zdGFuY2UiLCJtYXRlcmlhbCIsIk1hdGVyaWFsIiwiZ2V0U2hhZGVyVmFyaWFudCIsImRldiIsInNjIiwiZGVmcyIsInN0YXRpY0xpZ2h0TGlzdCIsInBhc3MiLCJzb3J0ZWRMaWdodHMiLCJ2aWV3VW5pZm9ybUZvcm1hdCIsInZpZXdCaW5kR3JvdXBGb3JtYXQiLCJvcHRpb25zIiwiZW5jb2RpbmciLCJ1c2VJbnRlbnNpdHkiLCJza3lib3hJbnRlbnNpdHkiLCJwaHlzaWNhbFVuaXRzIiwiZ2FtbWEiLCJTSEFERVJfRk9SV0FSREhEUiIsImdhbW1hQ29ycmVjdGlvbiIsIkdBTU1BX1NSR0JIRFIiLCJHQU1NQV9OT05FIiwidG9uZU1hcHBpbmciLCJUT05FTUFQX0xJTkVBUiIsImN1YmVtYXAiLCJ0eXBlIiwibWlwIiwiZml4Q3ViZW1hcFNlYW1zIiwic2t5Ym94TWlwIiwiZml4U2VhbXMiLCJwcm9jZXNzaW5nT3B0aW9ucyIsIlNoYWRlclByb2Nlc3Nvck9wdGlvbnMiLCJsaWJyYXJ5IiwiZ2V0UHJvZ3JhbUxpYnJhcnkiLCJyZWdpc3RlciIsInNreWJveCIsImdldFByb2dyYW0iLCJzZXRQYXJhbWV0ZXIiLCJfc2t5Ym94TWlwIiwiY3VsbCIsIkNVTExGQUNFX0ZST05UIiwiZGVwdGhXcml0ZSIsInNreUxheWVyIiwibGF5ZXJzIiwiZ2V0TGF5ZXJCeUlkIiwiTEFZRVJJRF9TS1lCT1giLCJub2RlIiwiR3JhcGhOb2RlIiwibWVzaCIsImNyZWF0ZUJveCIsIk1lc2hJbnN0YW5jZSIsIl9ub0RlcHRoRHJhd0dsMSIsInBpY2siLCJhZGRNZXNoSW5zdGFuY2VzIiwiZGVzdHJveSIsInJlbW92ZU1lc2hJbnN0YW5jZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsR0FBRyxDQUFDO0FBUU47QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0lDLEVBQUFBLFdBQVdBLENBQUNDLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUU7QUFicEM7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUpJLElBQUEsSUFBQSxDQUtBQyxZQUFZLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFVUixJQUFBLE1BQU1DLFFBQVEsR0FBRyxJQUFJQyxRQUFRLEVBQUUsQ0FBQTtBQUUvQkQsSUFBQUEsUUFBUSxDQUFDRSxnQkFBZ0IsR0FBRyxVQUFVQyxHQUFHLEVBQUVDLEVBQUUsRUFBRUMsSUFBSSxFQUFFQyxlQUFlLEVBQUVDLElBQUksRUFBRUMsWUFBWSxFQUFFQyxpQkFBaUIsRUFBRUMsbUJBQW1CLEVBQUU7QUFFOUgsTUFBQSxNQUFNQyxPQUFPLEdBQUc7QUFDWkosUUFBQUEsSUFBSSxFQUFFQSxJQUFJO1FBQ1ZLLFFBQVEsRUFBRWQsT0FBTyxDQUFDYyxRQUFRO1FBQzFCQyxZQUFZLEVBQUVoQixLQUFLLENBQUNpQixlQUFlLEtBQUssQ0FBQyxJQUFJakIsS0FBSyxDQUFDa0IsYUFBYTtBQUNoRUMsUUFBQUEsS0FBSyxFQUFHVCxJQUFJLEtBQUtVLGlCQUFpQixHQUFJcEIsS0FBSyxDQUFDcUIsZUFBZSxHQUFHQyxhQUFhLEdBQUdDLFVBQVUsR0FBSXZCLEtBQUssQ0FBQ3FCLGVBQWdCO1FBQ2xIRyxXQUFXLEVBQUdkLElBQUksS0FBS1UsaUJBQWlCLEdBQUdLLGNBQWMsR0FBR3pCLEtBQUssQ0FBQ3dCLFdBQUFBO09BQ3JFLENBQUE7TUFFRCxJQUFJdkIsT0FBTyxDQUFDeUIsT0FBTyxF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
