import { sortPriority } from '../../../core/sort.js';
import { Color } from '../../../core/math/color.js';
import { Vec4 } from '../../../core/math/vec4.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { CameraComponent } from './component.js';
import { CameraComponentData } from './data.js';

const _schema = ['enabled'];

/**
 * Used to add and remove {@link CameraComponent}s from Entities. It also holds an array of all
 * active cameras.
 *
 * @augments ComponentSystem
 */
class CameraComponentSystem extends ComponentSystem {
  /**
   * Create a new CameraComponentSystem instance.
   *
   * @param {import('../../app-base.js').AppBase} app - The Application.
   * @hideconstructor
   */
  constructor(app) {
    super(app);
    /**
     * Holds all the active camera components.
     *
     * @type {CameraComponent[]}
     */
    this.cameras = [];
    this.id = 'camera';
    this.ComponentType = CameraComponent;
    this.DataType = CameraComponentData;
    this.schema = _schema;
    this.on('beforeremove', this.onBeforeRemove, this);
    this.app.on('prerender', this.onAppPrerender, this);
    this.app.systems.on('update', this.onUpdate, this);
  }
  initializeComponentData(component, data, properties) {
    properties = ['aspectRatio', 'aspectRatioMode', 'calculateProjection', 'calculateTransform', 'clearColor', 'clearColorBuffer', 'clearDepthBuffer', 'clearStencilBuffer', 'renderSceneColorMap', 'renderSceneDepthMap', 'cullFaces', 'farClip', 'flipFaces', 'fov', 'frustumCulling', 'horizontalFov', 'layers', 'renderTarget', 'nearClip', 'orthoHeight', 'projection', 'priority', 'rect', 'scissorRect', 'aperture', 'shutter', 'sensitivity'];
    for (let i = 0; i < properties.length; i++) {
      const property = properties[i];
      if (data.hasOwnProperty(property)) {
        const value = data[property];
        switch (property) {
          case 'rect':
          case 'scissorRect':
            if (Array.isArray(value)) {
              component[property] = new Vec4(value[0], value[1], value[2], value[3]);
            } else {
              component[property] = value;
            }
            break;
          case 'clearColor':
            if (Array.isArray(value)) {
              component[property] = new Color(value[0], value[1], value[2], value[3]);
            } else {
              component[property] = value;
            }
            break;
          default:
            component[property] = value;
            break;
        }
      }
    }
    super.initializeComponentData(component, data, ['enabled']);
  }
  cloneComponent(entity, clone) {
    const c = entity.camera;
    return this.addComponent(clone, {
      aspectRatio: c.aspectRatio,
      aspectRatioMode: c.aspectRatioMode,
      calculateProjection: c.calculateProjection,
      calculateTransform: c.calculateTransform,
      clearColor: c.clearColor,
      clearColorBuffer: c.clearColorBuffer,
      clearDepthBuffer: c.clearDepthBuffer,
      clearStencilBuffer: c.clearStencilBuffer,
      renderSceneDepthMap: c.renderSceneDepthMap,
      renderSceneColorMap: c.renderSceneColorMap,
      cullFaces: c.cullFaces,
      enabled: c.enabled,
      farClip: c.farClip,
      flipFaces: c.flipFaces,
      fov: c.fov,
      frustumCulling: c.frustumCulling,
      horizontalFov: c.horizontalFov,
      layers: c.layers,
      renderTarget: c.renderTarget,
      nearClip: c.nearClip,
      orthoHeight: c.orthoHeight,
      projection: c.projection,
      priority: c.priority,
      rect: c.rect,
      scissorRect: c.scissorRect,
      aperture: c.aperture,
      sensitivity: c.sensitivity,
      shutter: c.shutter
    });
  }
  onBeforeRemove(entity, component) {
    this.removeCamera(component);
  }
  onUpdate(dt) {}
  onAppPrerender() {
    for (let i = 0, len = this.cameras.length; i < len; i++) {
      this.cameras[i].onAppPrerender();
    }
  }
  addCamera(camera) {
    this.cameras.push(camera);
    sortPriority(this.cameras);
  }
  removeCamera(camera) {
    const index = this.cameras.indexOf(camera);
    if (index >= 0) {
      this.cameras.splice(index, 1);
      sortPriority(this.cameras);
    }
  }
  destroy() {
    super.destroy();
    this.app.systems.off('update', this.onUpdate, this);
  }
}
Component._buildAccessors(CameraComponent.prototype, _schema);

export { CameraComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvY2FtZXJhL3N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzb3J0UHJpb3JpdHkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3NvcnQuanMnO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLi8uLi8uLi9jb3JlL21hdGgvY29sb3IuanMnO1xuaW1wb3J0IHsgVmVjNCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWM0LmpzJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENvbXBvbmVudFN5c3RlbSB9IGZyb20gJy4uL3N5c3RlbS5qcyc7XG5cbmltcG9ydCB7IENhbWVyYUNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENhbWVyYUNvbXBvbmVudERhdGEgfSBmcm9tICcuL2RhdGEuanMnO1xuXG5jb25zdCBfc2NoZW1hID0gWydlbmFibGVkJ107XG5cbi8qKlxuICogVXNlZCB0byBhZGQgYW5kIHJlbW92ZSB7QGxpbmsgQ2FtZXJhQ29tcG9uZW50fXMgZnJvbSBFbnRpdGllcy4gSXQgYWxzbyBob2xkcyBhbiBhcnJheSBvZiBhbGxcbiAqIGFjdGl2ZSBjYW1lcmFzLlxuICpcbiAqIEBhdWdtZW50cyBDb21wb25lbnRTeXN0ZW1cbiAqL1xuY2xhc3MgQ2FtZXJhQ29tcG9uZW50U3lzdGVtIGV4dGVuZHMgQ29tcG9uZW50U3lzdGVtIHtcbiAgICAvKipcbiAgICAgKiBIb2xkcyBhbGwgdGhlIGFjdGl2ZSBjYW1lcmEgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtDYW1lcmFDb21wb25lbnRbXX1cbiAgICAgKi9cbiAgICBjYW1lcmFzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQ2FtZXJhQ29tcG9uZW50U3lzdGVtIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gYXBwIC0gVGhlIEFwcGxpY2F0aW9uLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcblxuICAgICAgICB0aGlzLmlkID0gJ2NhbWVyYSc7XG5cbiAgICAgICAgdGhpcy5Db21wb25lbnRUeXBlID0gQ2FtZXJhQ29tcG9uZW50O1xuICAgICAgICB0aGlzLkRhdGFUeXBlID0gQ2FtZXJhQ29tcG9uZW50RGF0YTtcblxuICAgICAgICB0aGlzLnNjaGVtYSA9IF9zY2hlbWE7XG5cbiAgICAgICAgdGhpcy5vbignYmVmb3JlcmVtb3ZlJywgdGhpcy5vbkJlZm9yZVJlbW92ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuYXBwLm9uKCdwcmVyZW5kZXInLCB0aGlzLm9uQXBwUHJlcmVuZGVyLCB0aGlzKTtcblxuICAgICAgICB0aGlzLmFwcC5zeXN0ZW1zLm9uKCd1cGRhdGUnLCB0aGlzLm9uVXBkYXRlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplQ29tcG9uZW50RGF0YShjb21wb25lbnQsIGRhdGEsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IFtcbiAgICAgICAgICAgICdhc3BlY3RSYXRpbycsXG4gICAgICAgICAgICAnYXNwZWN0UmF0aW9Nb2RlJyxcbiAgICAgICAgICAgICdjYWxjdWxhdGVQcm9qZWN0aW9uJyxcbiAgICAgICAgICAgICdjYWxjdWxhdGVUcmFuc2Zvcm0nLFxuICAgICAgICAgICAgJ2NsZWFyQ29sb3InLFxuICAgICAgICAgICAgJ2NsZWFyQ29sb3JCdWZmZXInLFxuICAgICAgICAgICAgJ2NsZWFyRGVwdGhCdWZmZXInLFxuICAgICAgICAgICAgJ2NsZWFyU3RlbmNpbEJ1ZmZlcicsXG4gICAgICAgICAgICAncmVuZGVyU2NlbmVDb2xvck1hcCcsXG4gICAgICAgICAgICAncmVuZGVyU2NlbmVEZXB0aE1hcCcsXG4gICAgICAgICAgICAnY3VsbEZhY2VzJyxcbiAgICAgICAgICAgICdmYXJDbGlwJyxcbiAgICAgICAgICAgICdmbGlwRmFjZXMnLFxuICAgICAgICAgICAgJ2ZvdicsXG4gICAgICAgICAgICAnZnJ1c3R1bUN1bGxpbmcnLFxuICAgICAgICAgICAgJ2hvcml6b250YWxGb3YnLFxuICAgICAgICAgICAgJ2xheWVycycsXG4gICAgICAgICAgICAncmVuZGVyVGFyZ2V0JyxcbiAgICAgICAgICAgICduZWFyQ2xpcCcsXG4gICAgICAgICAgICAnb3J0aG9IZWlnaHQnLFxuICAgICAgICAgICAgJ3Byb2plY3Rpb24nLFxuICAgICAgICAgICAgJ3ByaW9yaXR5JyxcbiAgICAgICAgICAgICdyZWN0JyxcbiAgICAgICAgICAgICdzY2lzc29yUmVjdCcsXG4gICAgICAgICAgICAnYXBlcnR1cmUnLFxuICAgICAgICAgICAgJ3NodXR0ZXInLFxuICAgICAgICAgICAgJ3NlbnNpdGl2aXR5J1xuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlY3QnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY2lzc29yUmVjdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gbmV3IFZlYzQodmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSwgdmFsdWVbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xlYXJDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gbmV3IENvbG9yKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0sIHZhbHVlWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci5pbml0aWFsaXplQ29tcG9uZW50RGF0YShjb21wb25lbnQsIGRhdGEsIFsnZW5hYmxlZCddKTtcbiAgICB9XG5cbiAgICBjbG9uZUNvbXBvbmVudChlbnRpdHksIGNsb25lKSB7XG4gICAgICAgIGNvbnN0IGMgPSBlbnRpdHkuY2FtZXJhO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb21wb25lbnQoY2xvbmUsIHtcbiAgICAgICAgICAgIGFzcGVjdFJhdGlvOiBjLmFzcGVjdFJhdGlvLFxuICAgICAgICAgICAgYXNwZWN0UmF0aW9Nb2RlOiBjLmFzcGVjdFJhdGlvTW9kZSxcbiAgICAgICAgICAgIGNhbGN1bGF0ZVByb2plY3Rpb246IGMuY2FsY3VsYXRlUHJvamVjdGlvbixcbiAgICAgICAgICAgIGNhbGN1bGF0ZVRyYW5zZm9ybTogYy5jYWxjdWxhdGVUcmFuc2Zvcm0sXG4gICAgICAgICAgICBjbGVhckNvbG9yOiBjLmNsZWFyQ29sb3IsXG4gICAgICAgICAgICBjbGVhckNvbG9yQnVmZmVyOiBjLmNsZWFyQ29sb3JCdWZmZXIsXG4gICAgICAgICAgICBjbGVhckRlcHRoQnVmZmVyOiBjLmNsZWFyRGVwdGhCdWZmZXIsXG4gICAgICAgICAgICBjbGVhclN0ZW5jaWxCdWZmZXI6IGMuY2xlYXJTdGVuY2lsQnVmZmVyLFxuICAgICAgICAgICAgcmVuZGVyU2NlbmVEZXB0aE1hcDogYy5yZW5kZXJTY2VuZURlcHRoTWFwLFxuICAgICAgICAgICAgcmVuZGVyU2NlbmVDb2xvck1hcDogYy5yZW5kZXJTY2VuZUNvbG9yTWFwLFxuICAgICAgICAgICAgY3VsbEZhY2VzOiBjLmN1bGxGYWNlcyxcbiAgICAgICAgICAgIGVuYWJsZWQ6IGMuZW5hYmxlZCxcbiAgICAgICAgICAgIGZhckNsaXA6IGMuZmFyQ2xpcCxcbiAgICAgICAgICAgIGZsaXBGYWNlczogYy5mbGlwRmFjZXMsXG4gICAgICAgICAgICBmb3Y6IGMuZm92LFxuICAgICAgICAgICAgZnJ1c3R1bUN1bGxpbmc6IGMuZnJ1c3R1bUN1bGxpbmcsXG4gICAgICAgICAgICBob3Jpem9udGFsRm92OiBjLmhvcml6b250YWxGb3YsXG4gICAgICAgICAgICBsYXllcnM6IGMubGF5ZXJzLFxuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0OiBjLnJlbmRlclRhcmdldCxcbiAgICAgICAgICAgIG5lYXJDbGlwOiBjLm5lYXJDbGlwLFxuICAgICAgICAgICAgb3J0aG9IZWlnaHQ6IGMub3J0aG9IZWlnaHQsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBjLnByb2plY3Rpb24sXG4gICAgICAgICAgICBwcmlvcml0eTogYy5wcmlvcml0eSxcbiAgICAgICAgICAgIHJlY3Q6IGMucmVjdCxcbiAgICAgICAgICAgIHNjaXNzb3JSZWN0OiBjLnNjaXNzb3JSZWN0LFxuICAgICAgICAgICAgYXBlcnR1cmU6IGMuYXBlcnR1cmUsXG4gICAgICAgICAgICBzZW5zaXRpdml0eTogYy5zZW5zaXRpdml0eSxcbiAgICAgICAgICAgIHNodXR0ZXI6IGMuc2h1dHRlclxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkJlZm9yZVJlbW92ZShlbnRpdHksIGNvbXBvbmVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZUNhbWVyYShjb21wb25lbnQpO1xuICAgIH1cblxuICAgIG9uVXBkYXRlKGR0KSB7XG4gICAgfVxuXG4gICAgb25BcHBQcmVyZW5kZXIoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmNhbWVyYXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhc1tpXS5vbkFwcFByZXJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQ2FtZXJhKGNhbWVyYSkge1xuICAgICAgICB0aGlzLmNhbWVyYXMucHVzaChjYW1lcmEpO1xuICAgICAgICBzb3J0UHJpb3JpdHkodGhpcy5jYW1lcmFzKTtcbiAgICB9XG5cbiAgICByZW1vdmVDYW1lcmEoY2FtZXJhKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYW1lcmFzLmluZGV4T2YoY2FtZXJhKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgc29ydFByaW9yaXR5KHRoaXMuY2FtZXJhcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vZmYoJ3VwZGF0ZScsIHRoaXMub25VcGRhdGUsIHRoaXMpO1xuICAgIH1cbn1cblxuQ29tcG9uZW50Ll9idWlsZEFjY2Vzc29ycyhDYW1lcmFDb21wb25lbnQucHJvdG90eXBlLCBfc2NoZW1hKTtcblxuZXhwb3J0IHsgQ2FtZXJhQ29tcG9uZW50U3lzdGVtIH07XG4iXSwibmFtZXMiOlsiX3NjaGVtYSIsIkNhbWVyYUNvbXBvbmVudFN5c3RlbSIsIkNvbXBvbmVudFN5c3RlbSIsImNvbnN0cnVjdG9yIiwiYXBwIiwiY2FtZXJhcyIsImlkIiwiQ29tcG9uZW50VHlwZSIsIkNhbWVyYUNvbXBvbmVudCIsIkRhdGFUeXBlIiwiQ2FtZXJhQ29tcG9uZW50RGF0YSIsInNjaGVtYSIsIm9uIiwib25CZWZvcmVSZW1vdmUiLCJvbkFwcFByZXJlbmRlciIsInN5c3RlbXMiLCJvblVwZGF0ZSIsImluaXRpYWxpemVDb21wb25lbnREYXRhIiwiY29tcG9uZW50IiwiZGF0YSIsInByb3BlcnRpZXMiLCJpIiwibGVuZ3RoIiwicHJvcGVydHkiLCJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiVmVjNCIsIkNvbG9yIiwiY2xvbmVDb21wb25lbnQiLCJlbnRpdHkiLCJjbG9uZSIsImMiLCJjYW1lcmEiLCJhZGRDb21wb25lbnQiLCJhc3BlY3RSYXRpbyIsImFzcGVjdFJhdGlvTW9kZSIsImNhbGN1bGF0ZVByb2plY3Rpb24iLCJjYWxjdWxhdGVUcmFuc2Zvcm0iLCJjbGVhckNvbG9yIiwiY2xlYXJDb2xvckJ1ZmZlciIsImNsZWFyRGVwdGhCdWZmZXIiLCJjbGVhclN0ZW5jaWxCdWZmZXIiLCJyZW5kZXJTY2VuZURlcHRoTWFwIiwicmVuZGVyU2NlbmVDb2xvck1hcCIsImN1bGxGYWNlcyIsImVuYWJsZWQiLCJmYXJDbGlwIiwiZmxpcEZhY2VzIiwiZm92IiwiZnJ1c3R1bUN1bGxpbmciLCJob3Jpem9udGFsRm92IiwibGF5ZXJzIiwicmVuZGVyVGFyZ2V0IiwibmVhckNsaXAiLCJvcnRob0hlaWdodCIsInByb2plY3Rpb24iLCJwcmlvcml0eSIsInJlY3QiLCJzY2lzc29yUmVjdCIsImFwZXJ0dXJlIiwic2Vuc2l0aXZpdHkiLCJzaHV0dGVyIiwicmVtb3ZlQ2FtZXJhIiwiZHQiLCJsZW4iLCJhZGRDYW1lcmEiLCJwdXNoIiwic29ydFByaW9yaXR5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZGVzdHJveSIsIm9mZiIsIkNvbXBvbmVudCIsIl9idWlsZEFjY2Vzc29ycyIsInByb3RvdHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFVQSxNQUFNQSxPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQTs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMscUJBQXFCLFNBQVNDLGVBQWUsQ0FBQztBQVFoRDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUMsV0FBV0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ2IsS0FBSyxDQUFDQSxHQUFHLENBQUMsQ0FBQTtBQWRkO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7SUFKSSxJQUtBQyxDQUFBQSxPQUFPLEdBQUcsRUFBRSxDQUFBO0lBV1IsSUFBSSxDQUFDQyxFQUFFLEdBQUcsUUFBUSxDQUFBO0lBRWxCLElBQUksQ0FBQ0MsYUFBYSxHQUFHQyxlQUFlLENBQUE7SUFDcEMsSUFBSSxDQUFDQyxRQUFRLEdBQUdDLG1CQUFtQixDQUFBO0lBRW5DLElBQUksQ0FBQ0MsTUFBTSxHQUFHWCxPQUFPLENBQUE7SUFFckIsSUFBSSxDQUFDWSxFQUFFLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQ0MsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ2xELElBQUEsSUFBSSxDQUFDVCxHQUFHLENBQUNRLEVBQUUsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDRSxjQUFjLEVBQUUs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
