/**
 * An object that manages the case where an object holds a reference to an asset and needs to be
 * notified when changes occur in the asset. e.g. notifications include load, add and remove
 * events.
 */
class AssetReference {
  /**
   * Create a new AssetReference instance.
   *
   * @param {string} propertyName - The name of the property that the asset is stored under,
   * passed into callbacks to enable updating.
   * @param {import('./asset.js').Asset|object} parent - The parent object that contains the
   * asset reference, passed into callbacks to enable updating. Currently an asset, but could be
   * component or other.
   * @param {import('./asset-registry.js').AssetRegistry} registry - The asset registry that
   * stores all assets.
   * @param {object} callbacks - A set of functions called when the asset state changes: load,
   * add, remove.
   * @param {object} [callbacks.load] - The function called when the asset loads
   * load(propertyName, parent, asset).
   * @param {object} [callbacks.add] - The function called when the asset is added to the
   * registry add(propertyName, parent, asset).
   * @param {object} [callbacks.remove] - The function called when the asset is remove from the
   * registry remove(propertyName, parent, asset).
   * @param {object} [callbacks.unload] - The function called when the asset is unloaded
   * unload(propertyName, parent, asset).
   * @param {object} [scope] - The scope to call the callbacks in.
   * @example
   * const reference = new pc.AssetReference('textureAsset', this, this.app.assets, {
   *     load: this.onTextureAssetLoad,
   *     add: this.onTextureAssetAdd,
   *     remove: this.onTextureAssetRemove
   * }, this);
   * reference.id = this.textureAsset.id;
   */
  constructor(propertyName, parent, registry, callbacks, scope) {
    this.propertyName = propertyName;
    this.parent = parent;
    this._scope = scope;
    this._registry = registry;
    this.id = null;
    this.url = null;
    this.asset = null;
    this._onAssetLoad = callbacks.load;
    this._onAssetAdd = callbacks.add;
    this._onAssetRemove = callbacks.remove;
    this._onAssetUnload = callbacks.unload;
  }

  /**
   * Get or set the asset id which this references. One of either id or url must be set to
   * initialize an asset reference.
   *
   * @type {number}
   */
  set id(value) {
    if (this.url) throw Error('Can\'t set id and url');
    this._unbind();
    this._id = value;
    this.asset = this._registry.get(this._id);
    this._bind();
  }
  get id() {
    return this._id;
  }

  /**
   * Get or set the asset url which this references. One of either id or url must be called to
   * initialize an asset reference.
   *
   * @type {string}
   */
  set url(value) {
    if (this.id) throw Error('Can\'t set id and url');
    this._unbind();
    this._url = value;
    this.asset = this._registry.getByUrl(this._url);
    this._bind();
  }
  get url() {
    return this._url;
  }
  _bind() {
    if (this.id) {
      if (this._onAssetLoad) this._registry.on('load:' + this.id, this._onLoad, this);
      if (this._onAssetAdd) this._registry.once('add:' + this.id, this._onAdd, this);
      if (this._onAssetRemove) this._registry.on('remove:' + this.id, this._onRemove, this);
      if (this._onAssetUnload) this._registry.on('unload:' + this.id, this._onUnload, this);
    }
    if (this.url) {
      if (this._onAssetLoad) this._registry.on('load:url:' + this.url, this._onLoad, this);
      if (this._onAssetAdd) this._registry.once('add:url:' + this.url, this._onAdd, this);
      if (this._onAssetRemove) this._registry.on('remove:url:' + this.url, this._onRemove, this);
    }
  }
  _unbind() {
    if (this.id) {
      if (this._onAssetLoad) this._registry.off('load:' + this.id, this._onLoad, this);
      if (this._onAssetAdd) this._registry.off('add:' + this.id, this._onAdd, this);
      if (this._onAssetRemove) this._registry.off('remove:' + this.id, this._onRemove, this);
      if (this._onAssetUnload) this._registry.off('unload:' + this.id, this._onUnload, this);
    }
    if (this.url) {
      if (this._onAssetLoad) this._registry.off('load:' + this.url, this._onLoad, this);
      if (this._onAssetAdd) this._registry.off('add:' + this.url, this._onAdd, this);
      if (this._onAssetRemove) this._registry.off('remove:' + this.url, this._onRemove, this);
    }
  }
  _onLoad(asset) {
    this._onAssetLoad.call(this._scope, this.propertyName, this.parent, asset);
  }
  _onAdd(asset) {
    this.asset = asset;
    this._onAssetAdd.call(this._scope, this.propertyName, this.parent, asset);
  }
  _onRemove(asset) {
    this._onAssetRemove.call(this._scope, this.propertyName, this.parent, asset);
    this.asset = null;
  }
  _onUnload(asset) {
    this._onAssetUnload.call(this._scope, this.propertyName, this.parent, asset);
  }
}

export { AssetReference };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXQtcmVmZXJlbmNlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2Fzc2V0L2Fzc2V0LXJlZmVyZW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFuIG9iamVjdCB0aGF0IG1hbmFnZXMgdGhlIGNhc2Ugd2hlcmUgYW4gb2JqZWN0IGhvbGRzIGEgcmVmZXJlbmNlIHRvIGFuIGFzc2V0IGFuZCBuZWVkcyB0byBiZVxuICogbm90aWZpZWQgd2hlbiBjaGFuZ2VzIG9jY3VyIGluIHRoZSBhc3NldC4gZS5nLiBub3RpZmljYXRpb25zIGluY2x1ZGUgbG9hZCwgYWRkIGFuZCByZW1vdmVcbiAqIGV2ZW50cy5cbiAqL1xuY2xhc3MgQXNzZXRSZWZlcmVuY2Uge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBc3NldFJlZmVyZW5jZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCB0aGUgYXNzZXQgaXMgc3RvcmVkIHVuZGVyLFxuICAgICAqIHBhc3NlZCBpbnRvIGNhbGxiYWNrcyB0byBlbmFibGUgdXBkYXRpbmcuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vYXNzZXQuanMnKS5Bc3NldHxvYmplY3R9IHBhcmVudCAtIFRoZSBwYXJlbnQgb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlXG4gICAgICogYXNzZXQgcmVmZXJlbmNlLCBwYXNzZWQgaW50byBjYWxsYmFja3MgdG8gZW5hYmxlIHVwZGF0aW5nLiBDdXJyZW50bHkgYW4gYXNzZXQsIGJ1dCBjb3VsZCBiZVxuICAgICAqIGNvbXBvbmVudCBvciBvdGhlci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9hc3NldC1yZWdpc3RyeS5qcycpLkFzc2V0UmVnaXN0cnl9IHJlZ2lzdHJ5IC0gVGhlIGFzc2V0IHJlZ2lzdHJ5IHRoYXRcbiAgICAgKiBzdG9yZXMgYWxsIGFzc2V0cy5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2tzIC0gQSBzZXQgb2YgZnVuY3Rpb25zIGNhbGxlZCB3aGVuIHRoZSBhc3NldCBzdGF0ZSBjaGFuZ2VzOiBsb2FkLFxuICAgICAqIGFkZCwgcmVtb3ZlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbY2FsbGJhY2tzLmxvYWRdIC0gVGhlIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBhc3NldCBsb2Fkc1xuICAgICAqIGxvYWQocHJvcGVydHlOYW1lLCBwYXJlbnQsIGFzc2V0KS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW2NhbGxiYWNrcy5hZGRdIC0gVGhlIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBhc3NldCBpcyBhZGRlZCB0byB0aGVcbiAgICAgKiByZWdpc3RyeSBhZGQocHJvcGVydHlOYW1lLCBwYXJlbnQsIGFzc2V0KS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW2NhbGxiYWNrcy5yZW1vdmVdIC0gVGhlIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBhc3NldCBpcyByZW1vdmUgZnJvbSB0aGVcbiAgICAgKiByZWdpc3RyeSByZW1vdmUocHJvcGVydHlOYW1lLCBwYXJlbnQsIGFzc2V0KS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW2NhbGxiYWNrcy51bmxvYWRdIC0gVGhlIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBhc3NldCBpcyB1bmxvYWRlZFxuICAgICAqIHVubG9hZChwcm9wZXJ0eU5hbWUsIHBhcmVudCwgYXNzZXQpLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbc2NvcGVdIC0gVGhlIHNjb3BlIHRvIGNhbGwgdGhlIGNhbGxiYWNrcyBpbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHJlZmVyZW5jZSA9IG5ldyBwYy5Bc3NldFJlZmVyZW5jZSgndGV4dHVyZUFzc2V0JywgdGhpcywgdGhpcy5hcHAuYXNzZXRzLCB7XG4gICAgICogICAgIGxvYWQ6IHRoaXMub25UZXh0dXJlQXNzZXRMb2FkLFxuICAgICAqICAgICBhZGQ6IHRoaXMub25UZXh0dXJlQXNzZXRBZGQsXG4gICAgICogICAgIHJlbW92ZTogdGhpcy5vblRleHR1cmVBc3NldFJlbW92ZVxuICAgICAqIH0sIHRoaXMpO1xuICAgICAqIHJlZmVyZW5jZS5pZCA9IHRoaXMudGV4dHVyZUFzc2V0LmlkO1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnR5TmFtZSwgcGFyZW50LCByZWdpc3RyeSwgY2FsbGJhY2tzLCBzY29wZSkge1xuICAgICAgICB0aGlzLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cbiAgICAgICAgdGhpcy5fc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5fcmVnaXN0cnkgPSByZWdpc3RyeTtcblxuICAgICAgICB0aGlzLmlkID0gbnVsbDtcbiAgICAgICAgdGhpcy51cmwgPSBudWxsO1xuICAgICAgICB0aGlzLmFzc2V0ID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9vbkFzc2V0TG9hZCA9IGNhbGxiYWNrcy5sb2FkO1xuICAgICAgICB0aGlzLl9vbkFzc2V0QWRkID0gY2FsbGJhY2tzLmFkZDtcbiAgICAgICAgdGhpcy5fb25Bc3NldFJlbW92ZSA9IGNhbGxiYWNrcy5yZW1vdmU7XG4gICAgICAgIHRoaXMuX29uQXNzZXRVbmxvYWQgPSBjYWxsYmFja3MudW5sb2FkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBvciBzZXQgdGhlIGFzc2V0IGlkIHdoaWNoIHRoaXMgcmVmZXJlbmNlcy4gT25lIG9mIGVpdGhlciBpZCBvciB1cmwgbXVzdCBiZSBzZXQgdG9cbiAgICAgKiBpbml0aWFsaXplIGFuIGFzc2V0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGlkKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnVybCkgdGhyb3cgRXJyb3IoJ0NhblxcJ3Qgc2V0IGlkIGFuZCB1cmwnKTtcblxuICAgICAgICB0aGlzLl91bmJpbmQoKTtcblxuICAgICAgICB0aGlzLl9pZCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmFzc2V0ID0gdGhpcy5fcmVnaXN0cnkuZ2V0KHRoaXMuX2lkKTtcblxuICAgICAgICB0aGlzLl9iaW5kKCk7XG4gICAgfVxuXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB0aGUgYXNzZXQgdXJsIHdoaWNoIHRoaXMgcmVmZXJlbmNlcy4gT25lIG9mIGVpdGhlciBpZCBvciB1cmwgbXVzdCBiZSBjYWxsZWQgdG9cbiAgICAgKiBpbml0aWFsaXplIGFuIGFzc2V0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2V0IHVybCh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pZCkgdGhyb3cgRXJyb3IoJ0NhblxcJ3Qgc2V0IGlkIGFuZCB1cmwnKTtcblxuICAgICAgICB0aGlzLl91bmJpbmQoKTtcblxuICAgICAgICB0aGlzLl91cmwgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5hc3NldCA9IHRoaXMuX3JlZ2lzdHJ5LmdldEJ5VXJsKHRoaXMuX3VybCk7XG5cbiAgICAgICAgdGhpcy5fYmluZCgpO1xuICAgIH1cblxuICAgIGdldCB1cmwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91cmw7XG4gICAgfVxuXG4gICAgX2JpbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb25Bc3NldExvYWQpIHRoaXMuX3JlZ2lzdHJ5Lm9uKCdsb2FkOicgKyB0aGlzLmlkLCB0aGlzLl9vbkxvYWQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRBZGQpIHRoaXMuX3JlZ2lzdHJ5Lm9uY2UoJ2FkZDonICsgdGhpcy5pZCwgdGhpcy5fb25BZGQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRSZW1vdmUpIHRoaXMuX3JlZ2lzdHJ5Lm9uKCdyZW1vdmU6JyArIHRoaXMuaWQsIHRoaXMuX29uUmVtb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkFzc2V0VW5sb2FkKSB0aGlzLl9yZWdpc3RyeS5vbigndW5sb2FkOicgKyB0aGlzLmlkLCB0aGlzLl9vblVubG9hZCwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy51cmwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkFzc2V0TG9hZCkgdGhpcy5fcmVnaXN0cnkub24oJ2xvYWQ6dXJsOicgKyB0aGlzLnVybCwgdGhpcy5fb25Mb2FkLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkFzc2V0QWRkKSB0aGlzLl9yZWdpc3RyeS5vbmNlKCdhZGQ6dXJsOicgKyB0aGlzLnVybCwgdGhpcy5fb25BZGQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRSZW1vdmUpIHRoaXMuX3JlZ2lzdHJ5Lm9uKCdyZW1vdmU6dXJsOicgKyB0aGlzLnVybCwgdGhpcy5fb25SZW1vdmUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VuYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkFzc2V0TG9hZCkgdGhpcy5fcmVnaXN0cnkub2ZmKCdsb2FkOicgKyB0aGlzLmlkLCB0aGlzLl9vbkxvYWQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRBZGQpIHRoaXMuX3JlZ2lzdHJ5Lm9mZignYWRkOicgKyB0aGlzLmlkLCB0aGlzLl9vbkFkZCwgdGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5fb25Bc3NldFJlbW92ZSkgdGhpcy5fcmVnaXN0cnkub2ZmKCdyZW1vdmU6JyArIHRoaXMuaWQsIHRoaXMuX29uUmVtb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkFzc2V0VW5sb2FkKSB0aGlzLl9yZWdpc3RyeS5vZmYoJ3VubG9hZDonICsgdGhpcy5pZCwgdGhpcy5fb25VbmxvYWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVybCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRMb2FkKSB0aGlzLl9yZWdpc3RyeS5vZmYoJ2xvYWQ6JyArIHRoaXMudXJsLCB0aGlzLl9vbkxvYWQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRBZGQpIHRoaXMuX3JlZ2lzdHJ5Lm9mZignYWRkOicgKyB0aGlzLnVybCwgdGhpcy5fb25BZGQsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uQXNzZXRSZW1vdmUpIHRoaXMuX3JlZ2lzdHJ5Lm9mZigncmVtb3ZlOicgKyB0aGlzLnVybCwgdGhpcy5fb25SZW1vdmUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uTG9hZChhc3NldCkge1xuICAgICAgICB0aGlzLl9vbkFzc2V0TG9hZC5jYWxsKHRoaXMuX3Njb3BlLCB0aGlzLnByb3BlcnR5TmFtZSwgdGhpcy5wYXJlbnQsIGFzc2V0KTtcbiAgICB9XG5cbiAgICBfb25BZGQoYXNzZXQpIHtcbiAgICAgICAgdGhpcy5hc3NldCA9IGFzc2V0O1xuICAgICAgICB0aGlzLl9vbkFzc2V0QWRkLmNhbGwodGhpcy5fc2NvcGUsIHRoaXMucHJvcGVydHlOYW1lLCB0aGlzLnBhcmVudCwgYXNzZXQpO1xuICAgIH1cblxuICAgIF9vblJlbW92ZShhc3NldCkge1xuICAgICAgICB0aGlzLl9vbkFzc2V0UmVtb3ZlLmNhbGwodGhpcy5fc2NvcGUsIHRoaXMucHJvcGVydHlOYW1lLCB0aGlzLnBhcmVudCwgYXNzZXQpO1xuICAgICAgICB0aGlzLmFzc2V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBfb25VbmxvYWQoYXNzZXQpIHtcbiAgICAgICAgdGhpcy5fb25Bc3NldFVubG9hZC5jYWxsKHRoaXMuX3Njb3BlLCB0aGlzLnByb3BlcnR5TmFtZSwgdGhpcy5wYXJlbnQsIGFzc2V0KTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEFzc2V0UmVmZXJlbmNlIH07XG4iXSwibmFtZXMiOlsiQXNzZXRSZWZlcmVuY2UiLCJjb25zdHJ1Y3RvciIsInByb3BlcnR5TmFtZSIsInBhcmVudCIsInJlZ2lzdHJ5IiwiY2FsbGJhY2tzIiwic2NvcGUiLCJfc2NvcGUiLCJfcmVnaXN0cnkiLCJpZCIsInVybCIsImFzc2V0IiwiX29uQXNzZXRMb2FkIiwibG9hZCIsIl9vbkFzc2V0QWRkIiwiYWRkIiwiX29uQXNzZXRSZW1vdmUiLCJyZW1vdmUiLCJfb25Bc3NldFVubG9hZCIsInVubG9hZCIsInZhbHVlIiwiRXJyb3IiLCJfdW5iaW5kIiwiX2lkIiwiZ2V0IiwiX2JpbmQiLCJfdXJsIiwiZ2V0QnlVcmwiLCJvbiIsIl9vbkxvYWQiLCJvbmNlIiwiX29uQWRkIiwiX29uUmVtb3ZlIiwiX29uVW5sb2FkIiwib2ZmIiwiY2FsbCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLGNBQWMsQ0FBQztBQUNqQjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0lDLFdBQVdBLENBQUNDLFlBQVksRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLFNBQVMsRUFBRUMsS0FBSyxFQUFFO0lBQzFELElBQUksQ0FBQ0osWUFBWSxHQUFHQSxZQUFZLENBQUE7SUFDaEMsSUFBSSxDQUFDQyxNQUFNLEdBQUdBLE1BQU0sQ0FBQTtJQUVwQixJQUFJLENBQUNJLE1BQU0sR0FBR0QsS0FBSyxDQUFBO0lBQ25CLElBQUksQ0FBQ0UsU0FBUyxHQUFHSixR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
