import { GlbContainerResource } from './glb-container-resource.js';
import { GlbParser } from './glb-parser.js';

class GlbModelParser {
  constructor(modelHandler) {
    this._device = modelHandler.device;
    this._defaultMaterial = modelHandler.defaultMaterial;
    this._assets = modelHandler.assets;
  }
  parse(data, callback, asset) {
    var _asset$options;
    GlbParser.parse('filename.glb', '', data, this._device, this._assets, (_asset$options = asset == null ? void 0 : asset.options) != null ? _asset$options : {}, (err, result) => {
      if (err) {
        callback(err);
      } else {
        const model = GlbContainerResource.createModel(result, this._defaultMaterial);
        result.destroy();
        callback(null, model);
      }
    });
  }
}

export { GlbModelParser };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xiLW1vZGVsLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL3BhcnNlcnMvZ2xiLW1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdsYkNvbnRhaW5lclJlc291cmNlIH0gZnJvbSAnLi9nbGItY29udGFpbmVyLXJlc291cmNlLmpzJztcbmltcG9ydCB7IEdsYlBhcnNlciB9IGZyb20gJy4vZ2xiLXBhcnNlci5qcyc7XG5cbmNsYXNzIEdsYk1vZGVsUGFyc2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5fZGV2aWNlID0gbW9kZWxIYW5kbGVyLmRldmljZTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdE1hdGVyaWFsID0gbW9kZWxIYW5kbGVyLmRlZmF1bHRNYXRlcmlhbDtcbiAgICAgICAgdGhpcy5fYXNzZXRzID0gbW9kZWxIYW5kbGVyLmFzc2V0cztcbiAgICB9XG5cbiAgICBwYXJzZShkYXRhLCBjYWxsYmFjaywgYXNzZXQpIHtcbiAgICAgICAgR2xiUGFyc2VyLnBhcnNlKCdmaWxlbmFtZS5nbGInLCAnJywgZGF0YSwgdGhpcy5fZGV2aWNlLCB0aGlzLl9hc3NldHMsIGFzc2V0Py5vcHRpb25zID8/IHt9LCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbCA9IEdsYkNvbnRhaW5lclJlc291cmNlLmNyZWF0ZU1vZGVsKHJlc3VsdCwgdGhpcy5fZGVmYXVsdE1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBHbGJNb2RlbFBhcnNlciB9O1xuIl0sIm5hbWVzIjpbIkdsYk1vZGVsUGFyc2VyIiwiY29uc3RydWN0b3IiLCJtb2RlbEhhbmRsZXIiLCJfZGV2aWNlIiwiZGV2aWNlIiwiX2RlZmF1bHRNYXRlcmlhbCIsImRlZmF1bHRNYXRlcmlhbCIsIl9hc3NldHMiLCJhc3NldHMiLCJwYXJzZSIsImRhdGEiLCJjYWxsYmFjayIsImFzc2V0IiwiX2Fzc2V0JG9wdGlvbnMiLCJHbGJQYXJzZXIiLCJvcHRpb25zIiwiZXJyIiwicmVzdWx0IiwibW9kZWwiLCJHbGJDb250YWluZXJSZXNvdXJjZSIsImNyZWF0ZU1vZGVsIiwiZGVzdHJveSJdLCJtYXBwaW5ncyI6Ijs7O0FBR0EsTUFBTUEsY0FBYyxDQUFDO0VBQ2pCQyxXQUFXQSxDQUFDQyxZQUFZLEVBQUU7QUFDdEIsSUFBQSxJQUFJLENBQUNDLE9BQU8sR0FBR0QsWUFBWSxDQUFDRSxNQUFNLENBQUE7QUFDbEMsSUFBQSxJQUFJLENBQUNDLGdCQUFnQixHQUFHSCxZQUFZLENBQUNJLGVBQWUsQ0FBQTtBQUNwRCxJQUFBLElBQUksQ0FBQ0MsT0FBTyxHQUFHTCxZQUFZLENBQUNNLE1BQU0sQ0FBQTtBQUN0QyxHQUFBO0FBRUFDLEVBQUFBLEtBQUtBLENBQUNDLElBQUksRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUU7QUFBQSxJQUFBLElBQUFDLGNBQUEsQ0FBQTtBQUN6QkMsSUFBQUEsU0FBUyxDQUFDTCxLQUFLLENBQUMsY0FBYyxFQUFFLEVBQUUsRUFBRUMsSUFBSSxFQUFFLElBQUksQ0FBQ1AsT0FBTyxFQUFFLElBQUksQ0FBQ0ksT0FBTyxFQUFBLENBQUFNLGNBQUEsR0FBRUQsS0FBSyxJQUFBLElBQUEsR0FBQSxLQUFBLENBQUEsR0FBTEEsS0FBSyxDQUFFRyxPQUFPLEtBQUFGLElBQUFBLEdBQUFBLGNBQUEsR0FBSSxFQUFFLEVBQUUsQ0FBQ0csR0FBRyxFQUFFQyxNQUFNLEtBQUs7QUFDekcsTUFBQSxJQUFJRCxHQUFHLEVBQUU7UUFDTEwsUUFBUSxDQUFDSyxHQUFHLENBQUMsQ0FBQTtBQUNqQixPQUFDLE1BQU07UUFDSCxNQUFNRSxLQUFLLEdBQUdDLG9CQUFvQixDQUFDQyxXQUFXLENBQUNILE1BQU0sRUFBRSxJQUFJLENBQUNaLGdCQUFnQixDQUFDLENBQUE7UUFDN0VZLE1BQU0sQ0FBQ0ksT0FBTyxFQUFFLENBQUE7QUFDaEJWLFFBQUFBLFFBQVEsQ0FBQyxJQUFJLEVBQUVPLEtBQUssQ0FBQyxDQUFBO0FBQ3pCLE9BQUE7QUFDSixLQUFDLENBQUMsQ0FBQTtBQUNOLEdBQUE7QUFDSjs7OzsifQ==
