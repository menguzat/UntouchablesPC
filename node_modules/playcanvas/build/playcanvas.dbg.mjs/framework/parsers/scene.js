import { Entity } from '../entity.js';
import { CompressUtils } from '../../scene/compress/compress-utils.js';
import { Decompress } from '../../scene/compress/decompress.js';
import { Debug } from '../../core/debug.js';

class SceneParser {
  constructor(app, isTemplate) {
    this._app = app;
    this._isTemplate = isTemplate;
  }
  parse(data) {
    const entities = {};
    let parent = null;
    const compressed = data.compressedFormat;
    if (compressed && !data.entDecompressed) {
      data.entDecompressed = true;
      data.entities = new Decompress(data.entities, compressed).run();
    }

    // instantiate entities
    for (const id in data.entities) {
      const curData = data.entities[id];
      const curEnt = this._createEntity(curData, compressed);
      entities[id] = curEnt;
      if (curData.parent === null) {
        parent = curEnt;
      }
    }

    // put entities into hierarchy
    for (const id in data.entities) {
      const curEnt = entities[id];
      const children = data.entities[id].children;
      const len = children.length;
      for (let i = 0; i < len; i++) {
        const childEnt = entities[children[i]];
        if (childEnt) {
          curEnt.addChild(childEnt);
        }
      }
    }
    this._openComponentData(parent, data.entities);
    return parent;
  }
  _createEntity(data, compressed) {
    var _data$enabled;
    const entity = new Entity(data.name, this._app);
    entity.setGuid(data.resource_id);
    this._setPosRotScale(entity, data, compressed);
    entity._enabled = (_data$enabled = data.enabled) != null ? _data$enabled : true;
    if (this._isTemplate) {
      entity._template = true;
    } else {
      entity._enabledInHierarchy = entity._enabled;
    }
    entity.template = data.template;
    if (data.tags) {
      for (let i = 0; i < data.tags.length; i++) {
        entity.tags.add(data.tags[i]);
      }
    }
    if (data.labels) {
      data.labels.forEach(function (label) {
        entity.addLabel(label);
      });
    }
    return entity;
  }
  _setPosRotScale(entity, data, compressed) {
    if (compressed) {
      CompressUtils.setCompressedPRS(entity, data, compressed);
    } else {
      const p = data.position;
      const r = data.rotation;
      const s = data.scale;
      entity.setLocalPosition(p[0], p[1], p[2]);
      entity.setLocalEulerAngles(r[0], r[1], r[2]);
      entity.setLocalScale(s[0], s[1], s[2]);
    }
  }
  _openComponentData(entity, entities) {
    // Create components in order
    const systemsList = this._app.systems.list;
    let len = systemsList.length;
    const entityData = entities[entity.getGuid()];
    for (let i = 0; i < len; i++) {
      const system = systemsList[i];
      const componentData = entityData.components[system.id];
      if (componentData) {
        system.addComponent(entity, componentData);
      }
    }

    // Open all children and add them to the node
    len = entityData.children.length;
    const children = entity._children;
    for (let i = 0; i < len; i++) {
      if (children[i]) {
        children[i] = this._openComponentData(children[i], entities);
      } else {
        Debug.warn(`Scene data is invalid where a child under "${entity.name}" Entity doesn't exist. Please check the scene data.`);
      }
    }
    return entity;
  }
}

export { SceneParser };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NlbmUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvcGFyc2Vycy9zY2VuZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuLi9lbnRpdHkuanMnO1xuXG5pbXBvcnQgeyBDb21wcmVzc1V0aWxzIH0gZnJvbSAnLi4vLi4vc2NlbmUvY29tcHJlc3MvY29tcHJlc3MtdXRpbHMuanMnO1xuaW1wb3J0IHsgRGVjb21wcmVzcyB9IGZyb20gJy4uLy4uL3NjZW5lL2NvbXByZXNzL2RlY29tcHJlc3MuanMnO1xuaW1wb3J0IHsgRGVidWcgfSBmcm9tIFwiLi4vLi4vY29yZS9kZWJ1Zy5qc1wiO1xuXG5jbGFzcyBTY2VuZVBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoYXBwLCBpc1RlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcblxuICAgICAgICB0aGlzLl9pc1RlbXBsYXRlID0gaXNUZW1wbGF0ZTtcbiAgICB9XG5cbiAgICBwYXJzZShkYXRhKSB7XG4gICAgICAgIGNvbnN0IGVudGl0aWVzID0ge307XG4gICAgICAgIGxldCBwYXJlbnQgPSBudWxsO1xuXG4gICAgICAgIGNvbnN0IGNvbXByZXNzZWQgPSBkYXRhLmNvbXByZXNzZWRGb3JtYXQ7XG4gICAgICAgIGlmIChjb21wcmVzc2VkICYmICFkYXRhLmVudERlY29tcHJlc3NlZCkge1xuICAgICAgICAgICAgZGF0YS5lbnREZWNvbXByZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YS5lbnRpdGllcyA9IG5ldyBEZWNvbXByZXNzKGRhdGEuZW50aXRpZXMsIGNvbXByZXNzZWQpLnJ1bigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5zdGFudGlhdGUgZW50aXRpZXNcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBkYXRhLmVudGl0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJEYXRhID0gZGF0YS5lbnRpdGllc1tpZF07XG4gICAgICAgICAgICBjb25zdCBjdXJFbnQgPSB0aGlzLl9jcmVhdGVFbnRpdHkoY3VyRGF0YSwgY29tcHJlc3NlZCk7XG4gICAgICAgICAgICBlbnRpdGllc1tpZF0gPSBjdXJFbnQ7XG4gICAgICAgICAgICBpZiAoY3VyRGF0YS5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJFbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwdXQgZW50aXRpZXMgaW50byBoaWVyYXJjaHlcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBkYXRhLmVudGl0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJFbnQgPSBlbnRpdGllc1tpZF07XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGRhdGEuZW50aXRpZXNbaWRdLmNoaWxkcmVuO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkRW50ID0gZW50aXRpZXNbY2hpbGRyZW5baV1dO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZEVudCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJFbnQuYWRkQ2hpbGQoY2hpbGRFbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX29wZW5Db21wb25lbnREYXRhKHBhcmVudCwgZGF0YS5lbnRpdGllcyk7XG5cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG5cbiAgICBfY3JlYXRlRW50aXR5KGRhdGEsIGNvbXByZXNzZWQpIHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gbmV3IEVudGl0eShkYXRhLm5hbWUsIHRoaXMuX2FwcCk7XG5cbiAgICAgICAgZW50aXR5LnNldEd1aWQoZGF0YS5yZXNvdXJjZV9pZCk7XG4gICAgICAgIHRoaXMuX3NldFBvc1JvdFNjYWxlKGVudGl0eSwgZGF0YSwgY29tcHJlc3NlZCk7XG4gICAgICAgIGVudGl0eS5fZW5hYmxlZCA9IGRhdGEuZW5hYmxlZCA/PyB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICBlbnRpdHkuX3RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVudGl0eS5fZW5hYmxlZEluSGllcmFyY2h5ID0gZW50aXR5Ll9lbmFibGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZW50aXR5LnRlbXBsYXRlID0gZGF0YS50ZW1wbGF0ZTtcblxuICAgICAgICBpZiAoZGF0YS50YWdzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEudGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGVudGl0eS50YWdzLmFkZChkYXRhLnRhZ3NbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEubGFiZWxzKSB7XG4gICAgICAgICAgICBkYXRhLmxhYmVscy5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5hZGRMYWJlbChsYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgfVxuXG4gICAgX3NldFBvc1JvdFNjYWxlKGVudGl0eSwgZGF0YSwgY29tcHJlc3NlZCkge1xuICAgICAgICBpZiAoY29tcHJlc3NlZCkge1xuICAgICAgICAgICAgQ29tcHJlc3NVdGlscy5zZXRDb21wcmVzc2VkUFJTKGVudGl0eSwgZGF0YSwgY29tcHJlc3NlZCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBkYXRhLnBvc2l0aW9uO1xuICAgICAgICAgICAgY29uc3QgciA9IGRhdGEucm90YXRpb247XG4gICAgICAgICAgICBjb25zdCBzID0gZGF0YS5zY2FsZTtcblxuICAgICAgICAgICAgZW50aXR5LnNldExvY2FsUG9zaXRpb24ocFswXSwgcFsxXSwgcFsyXSk7XG4gICAgICAgICAgICBlbnRpdHkuc2V0TG9jYWxFdWxlckFuZ2xlcyhyWzBdLCByWzFdLCByWzJdKTtcbiAgICAgICAgICAgIGVudGl0eS5zZXRMb2NhbFNjYWxlKHNbMF0sIHNbMV0sIHNbMl0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29wZW5Db21wb25lbnREYXRhKGVudGl0eSwgZW50aXRpZXMpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGNvbXBvbmVudHMgaW4gb3JkZXJcbiAgICAgICAgY29uc3Qgc3lzdGVtc0xpc3QgPSB0aGlzLl9hcHAuc3lzdGVtcy5saXN0O1xuXG4gICAgICAgIGxldCBsZW4gPSBzeXN0ZW1zTGlzdC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGVudGl0eURhdGEgPSBlbnRpdGllc1tlbnRpdHkuZ2V0R3VpZCgpXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc3lzdGVtID0gc3lzdGVtc0xpc3RbaV07XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnREYXRhID0gZW50aXR5RGF0YS5jb21wb25lbnRzW3N5c3RlbS5pZF07XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50RGF0YSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbS5hZGRDb21wb25lbnQoZW50aXR5LCBjb21wb25lbnREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9wZW4gYWxsIGNoaWxkcmVuIGFuZCBhZGQgdGhlbSB0byB0aGUgbm9kZVxuICAgICAgICBsZW4gPSBlbnRpdHlEYXRhLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBlbnRpdHkuX2NoaWxkcmVuO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW5baV0pIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltpXSA9IHRoaXMuX29wZW5Db21wb25lbnREYXRhKGNoaWxkcmVuW2ldLCBlbnRpdGllcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIERlYnVnLndhcm4oYFNjZW5lIGRhdGEgaXMgaW52YWxpZCB3aGVyZSBhIGNoaWxkIHVuZGVyIFwiJHtlbnRpdHkubmFtZX1cIiBFbnRpdHkgZG9lc24ndCBleGlzdC4gUGxlYXNlIGNoZWNrIHRoZSBzY2VuZSBkYXRhLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFNjZW5lUGFyc2VyIH07XG4iXSwibmFtZXMiOlsiU2NlbmVQYXJzZXIiLCJjb25zdHJ1Y3RvciIsImFwcCIsImlzVGVtcGxhdGUiLCJfYXBwIiwiX2lzVGVtcGxhdGUiLCJwYXJzZSIsImRhdGEiLCJlbnRpdGllcyIsInBhcmVudCIsImNvbXByZXNzZWQiLCJjb21wcmVzc2VkRm9ybWF0IiwiZW50RGVjb21wcmVzc2VkIiwiRGVjb21wcmVzcyIsInJ1biIsImlkIiwiY3VyRGF0YSIsImN1ckVudCIsIl9jcmVhdGVFbnRpdHkiLCJjaGlsZHJlbiIsImxlbiIsImxlbmd0aCIsImkiLCJjaGlsZEVudCIsImFkZENoaWxkIiwiX29wZW5Db21wb25lbnREYXRhIiwiX2RhdGEkZW5hYmxlZCIsImVudGl0eSIsIkVudGl0eSIsIm5hbWUiLCJzZXRHdWlkIiwicmVzb3VyY2VfaWQiLCJfc2V0UG9zUm90U2NhbGUiLCJfZW5hYmxlZCIsImVuYWJsZWQiLCJfdGVtcGxhdGUiLCJfZW5hYmxlZEluSGllcmFyY2h5IiwidGVtcGxhdGUiLCJ0YWdzIiwiYWRkIiwibGFiZWxzIiwiZm9yRWFjaCIsImxhYmVsIiwiYWRkTGFiZWwiLCJDb21wcmVzc1V0aWxzIiwic2V0Q29tcHJlc3NlZFBSUyIsInAiLCJwb3NpdGlvbiIsInIiLCJyb3RhdGlvbiIsInMiLCJzY2FsZSIsInNldExvY2FsUG9zaXRpb24iLCJzZXRMb2NhbEV1bGVyQW5nbGVzIiwic2V0TG9jYWxTY2FsZSIsInN5c3RlbXNMaXN0Iiwic3lzdGVtcyIsImxpc3QiLCJlbnRpdHlEYXRhIiwiZ2V0R3VpZCIsInN5c3RlbSIsImNvbXBvbmVudERhdGEiLCJjb21wb25lbnRzIiwiYWRkQ29tcG9uZW50IiwiX2NoaWxkcmVuIiwiRGVidWciLCJ3YXJuIl0sIm1hcHBpbmdzIjoiOzs7OztBQU1BLE1BQU1BLFdBQVcsQ0FBQztBQUNkQyxFQUFBQSxXQUFXQSxDQUFDQyxHQUFHLEVBQUVDLFVBQVUsRUFBRTtJQUN6QixJQUFJLENBQUNDLElBQUksR0FBR0YsR0FBRyxDQUFBO0lBRWYsSUFBSSxDQUFDRyxXQUFXLEdBQUdGLFVBQVUsQ0FBQTtBQUNqQyxHQUFBO0VBRUFHLEtBQUtBLENBQUNDLElBQUksRUFBRTtJQUNSLE1BQU1DLFFBQVEsR0FBRyxFQUFFLENBQUE7SUFDbkIsSUFBSUMsTUFBTSxHQUFHLElBQUksQ0FBQTtBQUVqQixJQUFBLE1BQU1DLFVBQVUsR0FBR0gsSUFBSSxDQUFDSSxnQkFBZ0IsQ0FBQTtBQUN4QyxJQUFBLElBQUlELFVBQVUsSUFBSSxDQUFDSCxJQUFJLENBQUNLLGVBQWUsRUFBRTtNQUNyQ0wsSUFBSSxDQUFDSyxlQUFlLEdBQUcsSUFBSSxDQUFBO0FBQzNCTCxNQUFBQSxJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJSyxVQUFVLENBQUNOLElBQUksQ0FBQ0MsUUFBUSxFQUFFRSxVQUFVLENBQUMsQ0FBQ0ksR0FBRyxFQUFFLENBQUE7QUFDbkUsS0FBQTs7QUFFQTtBQUNBLElBQUEsS0FBSyxNQUFNQyxFQUFFLElBQUlSLElBQUksQ0FBQ0MsUUFBUSxFQUFFO0FBQzVCLE1BQUEsTUFBTVEsT0FBTyxHQUFHVCxJQUFJLENBQUNDLFFBQVEsQ0FBQ08sRUFBRSxDQUFDLENB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
