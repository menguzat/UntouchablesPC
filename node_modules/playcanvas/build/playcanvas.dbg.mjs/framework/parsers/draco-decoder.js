import { WasmModule } from '../../core/wasm-module.js';
import { DracoWorker } from './draco-worker.js';
import { Debug } from '../../core/debug.js';
import { http } from '../../platform/net/http.js';

const downloadMaxRetries = 3;

// JobQueue keeps track of a set of web workers and enqueues jobs
// on them. To keep workload as balanced as possible (but also keep
// workers busy) workers have a maximum of 2 jobs assigned at any
// one time.
class JobQueue {
  constructor() {
    // list of workers with: [[0 jobs], [1 job], [2 jobs]]
    this.workers = [[], [], []];
    this.jobId = 0;
    this.jobQueue = [];
    this.jobCallbacks = new Map();
    this.run = (worker, job) => {
      worker.postMessage({
        type: 'decodeMesh',
        jobId: job.jobId,
        buffer: job.buffer
      }, [job.buffer]);
    };
  }

  // initialize the queue with worker instances
  init(workers) {
    workers.forEach(worker => {
      worker.addEventListener('message', message => {
        const data = message.data;
        const callback = this.jobCallbacks.get(data.jobId);
        if (callback) {
          callback(data.error, {
            indices: data.indices,
            vertices: data.vertices,
            attributes: data.attributes
          });
        }
        this.jobCallbacks.delete(data.jobId);
        if (this.jobQueue.length > 0) {
          const job = this.jobQueue.shift();
          this.run(worker, job);
        } else {
          const index2 = this.workers[2].indexOf(worker);
          if (index2 !== -1) {
            this.workers[2].splice(index2, 1);
            this.workers[1].push(worker);
          } else {
            const index1 = this.workers[1].indexOf(worker);
            if (index1 !== -1) {
              this.workers[1].splice(index1, 1);
              this.workers[0].push(worker);
            } else {
              // logical error
              Debug.error('logical error');
            }
          }
        }
      });
    });

    // assign workers to the first queue
    this.workers[0] = workers;

    // run queued up jobs
    while (this.jobQueue.length && (this.workers[0].length || this.workers[1].length)) {
      const job = this.jobQueue.shift();
      if (this.workers[0].length > 0) {
        const worker = this.workers[0].shift();
        this.workers[1].push(worker);
        this.run(worker, job);
      } else {
        const worker = this.workers[1].shift();
        this.workers[2].push(worker);
        this.run(worker, job);
      }
    }
  }
  enqueueJob(buffer, callback) {
    const job = {
      jobId: this.jobId++,
      buffer: buffer
    };
    this.jobCallbacks.set(job.jobId, callback);
    if (this.workers[0].length > 0) {
      const worker = this.workers[0].shift();
      this.workers[1].push(worker);
      this.run(worker, job);
    } else if (this.workers[1].length > 0) {
      const worker = this.workers[1].shift();
      this.workers[2].push(worker);
      this.run(worker, job);
    } else {
      this.jobQueue.push(job);
    }
  }
}
const downloadScript = url => {
  return new Promise((resolve, reject) => {
    const options = {
      cache: true,
      responseType: 'text',
      retry: downloadMaxRetries > 0,
      maxRetries: downloadMaxRetries
    };
    http.get(url, options, (err, response) => {
      if (err) {
        reject(err);
      } else {
        resolve(response);
      }
    });
  });
};
const compileModule = url => {
  const compileManual = () => {
    return fetch(url).then(result => result.arrayBuffer()).then(buffer => WebAssembly.compile(buffer));
  };
  const compileStreaming = () => {
    return WebAssembly.compileStreaming(fetch(url)).catch(err => {
      Debug.warn(`compileStreaming() failed for ${url} (${err}), falling back to arraybuffer download.`);
      return compileManual();
    });
  };

  // download and compile wasm module
  return WebAssembly.compileStreaming ? compileStreaming() : compileManual();
};
const defaultNumWorkers = 1;
let jobQueue;
let lazyConfig;
const initializeWorkers = config => {
  if (jobQueue) {
    return true;
  }
  if (!config) {
    if (lazyConfig) {
      config = lazyConfig;
    } else {
      const moduleConfig = WasmModule.getConfig('DracoDecoderModule');
      if (moduleConfig) {
        config = {
          jsUrl: moduleConfig.glueUrl,
          wasmUrl: moduleConfig.wasmUrl,
          numWorkers: moduleConfig.numWorkers
        };
      } else {
        config = {
          jsUrl: 'draco.wasm.js',
          wasmUrl: 'draco.wasm.wasm',
          numWorkers: defaultNumWorkers
        };
      }
    }
  }
  if (!config.jsUrl || !config.wasmUrl) {
    return false;
  }

  // create the job queue
  jobQueue = new JobQueue();

  // worker urls must be absolute
  Promise.all([downloadScript(config.jsUrl), compileModule(config.wasmUrl)]).then(([dracoSource, dracoModule]) => {
    // build worker source
    const code = ['/* draco */', dracoSource, '/* worker */', `(\n${DracoWorker.toString()}\n)()\n\n`].join('\n');
    const blob = new Blob([code], {
      type: 'application/javascript'
    });
    const workerUrl = URL.createObjectURL(blob);
    const numWorkers = Math.max(1, Math.min(16, config.numWorkers || defaultNumWorkers));

    // create worker instances
    const workers = [];
    for (let i = 0; i < numWorkers; ++i) {
      const worker = new Worker(workerUrl);
      worker.postMessage({
        type: 'init',
        module: dracoModule
      });
      workers.push(worker);
    }
    jobQueue.init(workers);
  });
  return true;
};

/**
 * Initialize the Draco mesh decoder.
 *
 * @param {object} [config] - The Draco decoder configuration.
 * @param {string} [config.jsUrl] - URL of glue script.
 * @param {string} [config.wasmUrl] - URL of the wasm module.
 * @param {number} [config.numWorkers] - Number of workers to use for decoding (default is 1).
 * @param {boolean} [config.lazyInit] - Wait for first decode request before initializing workers
 * (default is false). Otherwise initialize workers immediately.
 */
const dracoInitialize = config => {
  if (config != null && config.lazyInit) {
    lazyConfig = config;
  } else {
    initializeWorkers(config);
  }
};

/**
 * Enqueue a buffer for decoding.
 *
 * @param {ArrayBuffer} buffer - The draco data to decode.
 * @param {Function} callback - Callback function to receive decoded result.
 * @returns {boolean} True if the draco worker was initialized and false otherwise.
 * @ignore
 */
const dracoDecode = (buffer, callback) => {
  if (!initializeWorkers()) {
    return false;
  }
  jobQueue.enqueueJob(buffer, callback);
  return true;
};

export { dracoDecode, dracoInitialize };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhY28tZGVjb2Rlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2ZyYW1ld29yay9wYXJzZXJzL2RyYWNvLWRlY29kZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2FzbU1vZHVsZSB9IGZyb20gXCIuLi8uLi9jb3JlL3dhc20tbW9kdWxlLmpzXCI7XG5pbXBvcnQgeyBEcmFjb1dvcmtlciB9IGZyb20gXCIuL2RyYWNvLXdvcmtlci5qc1wiO1xuaW1wb3J0IHsgRGVidWcgfSBmcm9tIFwiLi4vLi4vY29yZS9kZWJ1Zy5qc1wiO1xuaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL25ldC9odHRwLmpzJztcblxuY29uc3QgZG93bmxvYWRNYXhSZXRyaWVzID0gMztcblxuLy8gSm9iUXVldWUga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2Ygd2ViIHdvcmtlcnMgYW5kIGVucXVldWVzIGpvYnNcbi8vIG9uIHRoZW0uIFRvIGtlZXAgd29ya2xvYWQgYXMgYmFsYW5jZWQgYXMgcG9zc2libGUgKGJ1dCBhbHNvIGtlZXBcbi8vIHdvcmtlcnMgYnVzeSkgd29ya2VycyBoYXZlIGEgbWF4aW11bSBvZiAyIGpvYnMgYXNzaWduZWQgYXQgYW55XG4vLyBvbmUgdGltZS5cbmNsYXNzIEpvYlF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gbGlzdCBvZiB3b3JrZXJzIHdpdGg6IFtbMCBqb2JzXSwgWzEgam9iXSwgWzIgam9ic11dXG4gICAgICAgIHRoaXMud29ya2VycyA9IFtbXSwgW10sIFtdXTtcbiAgICAgICAgdGhpcy5qb2JJZCA9IDA7XG4gICAgICAgIHRoaXMuam9iUXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5qb2JDYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucnVuID0gKHdvcmtlciwgam9iKSA9PiB7XG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdkZWNvZGVNZXNoJyxcbiAgICAgICAgICAgICAgICBqb2JJZDogam9iLmpvYklkLFxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogam9iLmJ1ZmZlclxuICAgICAgICAgICAgfSwgW2pvYi5idWZmZXJdKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBpbml0aWFsaXplIHRoZSBxdWV1ZSB3aXRoIHdvcmtlciBpbnN0YW5jZXNcbiAgICBpbml0KHdvcmtlcnMpIHtcbiAgICAgICAgd29ya2Vycy5mb3JFYWNoKCh3b3JrZXIpID0+IHtcbiAgICAgICAgICAgIHdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5qb2JDYWxsYmFja3MuZ2V0KGRhdGEuam9iSWQpO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhLmVycm9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzOiBkYXRhLmluZGljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlczogZGF0YS52ZXJ0aWNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGRhdGEuYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5qb2JDYWxsYmFja3MuZGVsZXRlKGRhdGEuam9iSWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuam9iUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSB0aGlzLmpvYlF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucnVuKHdvcmtlciwgam9iKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleDIgPSB0aGlzLndvcmtlcnNbMl0uaW5kZXhPZih3b3JrZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgyICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrZXJzWzJdLnNwbGljZShpbmRleDIsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrZXJzWzFdLnB1c2god29ya2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4MSA9IHRoaXMud29ya2Vyc1sxXS5pbmRleE9mKHdvcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgxICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2Vyc1sxXS5zcGxpY2UoaW5kZXgxLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtlcnNbMF0ucHVzaCh3b3JrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2dpY2FsIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVidWcuZXJyb3IoJ2xvZ2ljYWwgZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhc3NpZ24gd29ya2VycyB0byB0aGUgZmlyc3QgcXVldWVcbiAgICAgICAgdGhpcy53b3JrZXJzWzBdID0gd29ya2VycztcblxuICAgICAgICAvLyBydW4gcXVldWVkIHVwIGpvYnNcbiAgICAgICAgd2hpbGUgKHRoaXMuam9iUXVldWUubGVuZ3RoICYmICh0aGlzLndvcmtlcnNbMF0ubGVuZ3RoIHx8IHRoaXMud29ya2Vyc1sxXS5sZW5ndGgpKSB7XG4gICAgICAgICAgICBjb25zdCBqb2IgPSB0aGlzLmpvYlF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy53b3JrZXJzWzBdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXIgPSB0aGlzLndvcmtlcnNbMF0uc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtlcnNbMV0ucHVzaCh3b3JrZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMucnVuKHdvcmtlciwgam9iKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya2VyID0gdGhpcy53b3JrZXJzWzFdLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJzWzJdLnB1c2god29ya2VyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bih3b3JrZXIsIGpvYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBlbnF1ZXVlSm9iKGJ1ZmZlciwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgam9iID0ge1xuICAgICAgICAgICAgam9iSWQ6IHRoaXMuam9iSWQrKyxcbiAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuam9iQ2FsbGJhY2tzLnNldChqb2Iuam9iSWQsIGNhbGxiYWNrKTtcblxuICAgICAgICBpZiAodGhpcy53b3JrZXJzWzBdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlciA9IHRoaXMud29ya2Vyc1swXS5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy53b3JrZXJzWzFdLnB1c2god29ya2VyKTtcbiAgICAgICAgICAgIHRoaXMucnVuKHdvcmtlciwgam9iKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLndvcmtlcnNbMV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgd29ya2VyID0gdGhpcy53b3JrZXJzWzFdLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLndvcmtlcnNbMl0ucHVzaCh3b3JrZXIpO1xuICAgICAgICAgICAgdGhpcy5ydW4od29ya2VyLCBqb2IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5qb2JRdWV1ZS5wdXNoKGpvYik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGRvd25sb2FkU2NyaXB0ID0gKHVybCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcmV0cnk6IGRvd25sb2FkTWF4UmV0cmllcyA+IDAsXG4gICAgICAgICAgICBtYXhSZXRyaWVzOiBkb3dubG9hZE1heFJldHJpZXNcbiAgICAgICAgfTtcblxuICAgICAgICBodHRwLmdldCh1cmwsIG9wdGlvbnMsIChlcnIsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGNvbXBpbGVNb2R1bGUgPSAodXJsKSA9PiB7XG4gICAgY29uc3QgY29tcGlsZU1hbnVhbCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybClcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICAgIC50aGVuKGJ1ZmZlciA9PiBXZWJBc3NlbWJseS5jb21waWxlKGJ1ZmZlcikpO1xuICAgIH07XG5cbiAgICBjb25zdCBjb21waWxlU3RyZWFtaW5nID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gV2ViQXNzZW1ibHkuY29tcGlsZVN0cmVhbWluZyhmZXRjaCh1cmwpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBEZWJ1Zy53YXJuKGBjb21waWxlU3RyZWFtaW5nKCkgZmFpbGVkIGZvciAke3VybH0gKCR7ZXJyfSksIGZhbGxpbmcgYmFjayB0byBhcnJheWJ1ZmZlciBkb3dubG9hZC5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZU1hbnVhbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGRvd25sb2FkIGFuZCBjb21waWxlIHdhc20gbW9kdWxlXG4gICAgcmV0dXJuIFdlYkFzc2VtYmx5LmNvbXBpbGVTdHJlYW1pbmcgPyBjb21waWxlU3RyZWFtaW5nKCkgOiBjb21waWxlTWFudWFsKCk7XG59O1xuXG5jb25zdCBkZWZhdWx0TnVtV29ya2VycyA9IDE7XG5cbmxldCBqb2JRdWV1ZTtcbmxldCBsYXp5Q29uZmlnO1xuXG5jb25zdCBpbml0aWFsaXplV29ya2VycyA9IChjb25maWcpID0+IHtcbiAgICBpZiAoam9iUXVldWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgaWYgKGxhenlDb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZyA9IGxhenlDb25maWc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVDb25maWcgPSBXYXNtTW9kdWxlLmdldENvbmZpZygnRHJhY29EZWNvZGVyTW9kdWxlJyk7XG4gICAgICAgICAgICBpZiAobW9kdWxlQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICBqc1VybDogbW9kdWxlQ29uZmlnLmdsdWVVcmwsXG4gICAgICAgICAgICAgICAgICAgIHdhc21Vcmw6IG1vZHVsZUNvbmZpZy53YXNtVXJsLFxuICAgICAgICAgICAgICAgICAgICBudW1Xb3JrZXJzOiBtb2R1bGVDb25maWcubnVtV29ya2Vyc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAganNVcmw6ICdkcmFjby53YXNtLmpzJyxcbiAgICAgICAgICAgICAgICAgICAgd2FzbVVybDogJ2RyYWNvLndhc20ud2FzbScsXG4gICAgICAgICAgICAgICAgICAgIG51bVdvcmtlcnM6IGRlZmF1bHROdW1Xb3JrZXJzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY29uZmlnLmpzVXJsIHx8ICFjb25maWcud2FzbVVybCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHRoZSBqb2IgcXVldWVcbiAgICBqb2JRdWV1ZSA9IG5ldyBKb2JRdWV1ZSgpO1xuXG4gICAgLy8gd29ya2VyIHVybHMgbXVzdCBiZSBhYnNvbHV0ZVxuICAgIFByb21pc2UuYWxsKFtkb3dubG9hZFNjcmlwdChjb25maWcuanNVcmwpLCBjb21waWxlTW9kdWxlKGNvbmZpZy53YXNtVXJsKV0pXG4gICAgICAgIC50aGVuKChbZHJhY29Tb3VyY2UsIGRyYWNvTW9kdWxlXSkgPT4ge1xuICAgICAgICAgICAgLy8gYnVpbGQgd29ya2VyIHNvdXJjZVxuICAgICAgICAgICAgY29uc3QgY29kZSA9IFtcbiAgICAgICAgICAgICAgICAnLyogZHJhY28gKi8nLFxuICAgICAgICAgICAgICAgIGRyYWNvU291cmNlLFxuICAgICAgICAgICAgICAgICcvKiB3b3JrZXIgKi8nLFxuICAgICAgICAgICAgICAgIGAoXFxuJHtEcmFjb1dvcmtlci50b1N0cmluZygpfVxcbikoKVxcblxcbmBcbiAgICAgICAgICAgIF0uam9pbignXFxuJyk7XG4gICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvZGVdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlclVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICBjb25zdCBudW1Xb3JrZXJzID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTYsIGNvbmZpZy5udW1Xb3JrZXJzIHx8IGRlZmF1bHROdW1Xb3JrZXJzKSk7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB3b3JrZXIgaW5zdGFuY2VzXG4gICAgICAgICAgICBjb25zdCB3b3JrZXJzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdvcmtlcnM7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlciA9IG5ldyBXb3JrZXIod29ya2VyVXJsKTtcbiAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5pdCcsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogZHJhY29Nb2R1bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB3b3JrZXJzLnB1c2god29ya2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGpvYlF1ZXVlLmluaXQod29ya2Vycyk7XG4gICAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIERyYWNvIG1lc2ggZGVjb2Rlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gW2NvbmZpZ10gLSBUaGUgRHJhY28gZGVjb2RlciBjb25maWd1cmF0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuanNVcmxdIC0gVVJMIG9mIGdsdWUgc2NyaXB0LlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcud2FzbVVybF0gLSBVUkwgb2YgdGhlIHdhc20gbW9kdWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcubnVtV29ya2Vyc10gLSBOdW1iZXIgb2Ygd29ya2VycyB0byB1c2UgZm9yIGRlY29kaW5nIChkZWZhdWx0IGlzIDEpLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmxhenlJbml0XSAtIFdhaXQgZm9yIGZpcnN0IGRlY29kZSByZXF1ZXN0IGJlZm9yZSBpbml0aWFsaXppbmcgd29ya2Vyc1xuICogKGRlZmF1bHQgaXMgZmFsc2UpLiBPdGhlcndpc2UgaW5pdGlhbGl6ZSB3b3JrZXJzIGltbWVkaWF0ZWx5LlxuICovXG5jb25zdCBkcmFjb0luaXRpYWxpemUgPSAoY29uZmlnKSA9PiB7XG4gICAgaWYgKGNvbmZpZz8ubGF6eUluaXQpIHtcbiAgICAgICAgbGF6eUNvbmZpZyA9IGNvbmZpZztcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbml0aWFsaXplV29ya2Vycyhjb25maWcpO1xuICAgIH1cbn07XG5cbi8qKlxuICogRW5xdWV1ZSBhIGJ1ZmZlciBmb3IgZGVjb2RpbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYnVmZmVyIC0gVGhlIGRyYWNvIGRhdGEgdG8gZGVjb2RlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGRlY29kZWQgcmVzdWx0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGRyYWNvIHdvcmtlciB3YXMgaW5pdGlhbGl6ZWQgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgZHJhY29EZWNvZGUgPSAoYnVmZmVyLCBjYWxsYmFjaykgPT4ge1xuICAgIGlmICghaW5pdGlhbGl6ZVdvcmtlcnMoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGpvYlF1ZXVlLmVucXVldWVKb2IoYnVmZmVyLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnQge1xuICAgIGRyYWNvSW5pdGlhbGl6ZSxcbiAgICBkcmFjb0RlY29kZVxufTtcbiJdLCJuYW1lcyI6WyJkb3dubG9hZE1heFJldHJpZXMiLCJKb2JRdWV1ZSIsImNvbnN0cnVjdG9yIiwid29ya2VycyIsImpvYklkIiwiam9iUXVldWUiLCJqb2JDYWxsYmFja3MiLCJNYXAiLCJydW4iLCJ3b3JrZXIiLCJqb2IiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJidWZmZXIiLCJpbml0IiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJtZXNzYWdlIiwiZGF0YSIsImNhbGxiYWNrIiwiZ2V0IiwiZXJyb3IiLCJpbmRpY2VzIiwidmVydGljZXMiLCJhdHRyaWJ1dGVzIiwiZGVsZXRlIiwibGVuZ3RoIiwic2hpZnQiLCJpbmRleDIiLCJpbmRleE9mIiwic3BsaWNlIiwicHVzaCIsImluZGV4MSIsIkRlYnVnIiwiZW5xdWV1ZUpvYiIsInNldCIsImRvd25sb2FkU2NyaXB0IiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvcHRpb25zIiwiY2FjaGUiLCJyZXNwb25zZVR5cGUiLCJyZXRyeSIsIm1heFJldHJpZXMiLCJodHRwIiwiZXJyIiwicmVzcG9uc2UiLCJjb21waWxlTW9kdWxlIiwiY29tcGlsZU1hbnVhbCIsImZldGNoIiwidGhlbiIsInJlc3VsdCIsImFycmF5QnVmZmVyIiwiV2ViQXNzZW1ibHkiLCJjb21waWxlIiwiY29tcGlsZVN0cmVhbWluZyIsImNhdGNoIiwid2FybiIsImRlZmF1bHROdW1Xb3JrZXJzIiwibGF6eUNvbmZpZyIsImluaXRpYWxpemVXb3JrZXJzIiwiY29uZmlnIiwibW9kdWxlQ29uZmlnIiwiV2FzbU1vZHVsZSIsImdldENvbmZpZyIsImpzVXJsIiwiZ2x1ZVVybCIsIndhc21VcmwiLCJudW1Xb3JrZXJzIiwiYWxsIiwiZHJhY29Tb3VyY2UiLCJkcmFjb01vZHVsZSIsImNvZGUiLCJEcmFjb1dvcmtlciIsInRvU3RyaW5nIiwiam9pbiIsImJsb2IiLCJCbG9iIiwid29ya2VyVXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiTWF0aCIsIm1heCIsIm1pbiIsImkiLCJXb3JrZXIiLCJtb2R1bGUiLCJkcmFjb0luaXRpYWxpemUiLCJsYXp5SW5pdCIsImRyYWNvRGVjb2RlIl0sIm1hcHBpbmdzIjoiOzs7OztBQUtBLE1BQU1BLGtCQUFrQixHQUFHLENBQUMsQ0FBQTs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxRQUFRLENBQUM7QUFDWEMsRUFBQUEsV0FBV0EsR0FBRztBQUNWO0lBQ0EsSUFBSSxDQUFDQyxPQUFPLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQzNCLElBQUksQ0FBQ0MsS0FBSyxHQUFHLENBQUMsQ0FBQTtJQUNkLElBQUksQ0FBQ0MsUUFBUSxHQUFHLEVBQUUsQ0FBQTtBQUNsQixJQUFBLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlDLEdBQUcsRUFBRSxDQUFBO0FBQzdCLElBQUEsSUFBSSxDQUFDQyxHQUFHLEdBQUcsQ0FBQ0MsTUFBTSxFQUFFQyxHQUFHLEtBQUs7TUFDeEJELE1BQU0sQ0FBQ0UsV0FBVyxDQUFDO0FBQ2ZDLFFBQUFBLElBQUksRUFBRSxZQUFZO1FBQ2xCUixLQUFLLEVBQUVNLEdBQUcsQ0FBQ04sS0FBSztRQUNoQlMsTUFBTSxFQUFFSCxHQUFHLENBQUNHLE1BQUFBO0FBQ2hCLE9BQUMsRUFBRSxDQUFDSCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxDQUFDLENBQUE7S0FDbkIsQ0FBQTtBQUNMLEdBQUE7O0FBRUE7RUFDQUMsSUFBSUEsQ0FBQ1gsT0FBTyxFQUFFO0FBQ1ZBLElBQUFBLE9BQU8sQ0FBQ1ksT0FBTyxDQUFFTixNQUFNLElBQUs7QUFDeEJBLE1BQUFBLE1BQU0sQ0FBQ08sZ0JBQWdCLENBQUMsU0FBUyxFQUFHQyxP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
