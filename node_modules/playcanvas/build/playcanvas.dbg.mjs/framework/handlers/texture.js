import { path } from '../../core/path.js';
import { TEXTURETYPE_RGBM, TEXTURETYPE_SWIZZLEGGGR, PIXELFORMAT_RGB8, ADDRESS_REPEAT, ADDRESS_CLAMP_TO_EDGE, ADDRESS_MIRRORED_REPEAT, FILTER_NEAREST, FILTER_LINEAR, FILTER_NEAREST_MIPMAP_NEAREST, FILTER_LINEAR_MIPMAP_NEAREST, FILTER_NEAREST_MIPMAP_LINEAR, FILTER_LINEAR_MIPMAP_LINEAR, TEXTURETYPE_DEFAULT, TEXTURETYPE_RGBE, TEXTURETYPE_RGBP, PIXELFORMAT_RGBA8, PIXELFORMAT_RGBA32F, TEXHINT_ASSET } from '../../platform/graphics/constants.js';
import { Texture } from '../../platform/graphics/texture.js';
import { BasisParser } from '../parsers/texture/basis.js';
import { ImgParser } from '../parsers/texture/img.js';
import { KtxParser } from '../parsers/texture/ktx.js';
import { Ktx2Parser } from '../parsers/texture/ktx2.js';
import { DdsParser } from '../parsers/texture/dds.js';
import { HdrParser } from '../parsers/texture/hdr.js';

/** @typedef {import('./handler.js').ResourceHandler} ResourceHandler */

const JSON_ADDRESS_MODE = {
  'repeat': ADDRESS_REPEAT,
  'clamp': ADDRESS_CLAMP_TO_EDGE,
  'mirror': ADDRESS_MIRRORED_REPEAT
};
const JSON_FILTER_MODE = {
  'nearest': FILTER_NEAREST,
  'linear': FILTER_LINEAR,
  'nearest_mip_nearest': FILTER_NEAREST_MIPMAP_NEAREST,
  'linear_mip_nearest': FILTER_LINEAR_MIPMAP_NEAREST,
  'nearest_mip_linear': FILTER_NEAREST_MIPMAP_LINEAR,
  'linear_mip_linear': FILTER_LINEAR_MIPMAP_LINEAR
};
const JSON_TEXTURE_TYPE = {
  'default': TEXTURETYPE_DEFAULT,
  'rgbm': TEXTURETYPE_RGBM,
  'rgbe': TEXTURETYPE_RGBE,
  'rgbp': TEXTURETYPE_RGBP,
  'swizzleGGGR': TEXTURETYPE_SWIZZLEGGGR
};

/**
 * @interface
 * @name TextureParser
 * @description Interface to a texture parser. Implementations of this interface handle the loading
 * and opening of texture assets.
 */
class TextureParser {
  /* eslint-disable jsdoc/require-returns-check */
  /**
   * @function
   * @name TextureParser#load
   * @description Load the texture from the remote URL. When loaded (or failed),
   * use the callback to return an the raw resource data (or error).
   * @param {object} url - The URL of the resource to load.
   * @param {string} url.load - The URL to use for loading the resource.
   * @param {string} url.original - The original URL useful for identifying the resource type.
   * @param {import('./handler.js').ResourceHandlerCallback} callback - The callback used when
   * the resource is loaded or an error occurs.
   * @param {import('../asset/asset.js').Asset} [asset] - Optional asset that is passed by
   * ResourceLoader.
   */
  load(url, callback, asset) {
    throw new Error('not implemented');
  }

  /**
   * @function
   * @name TextureParser#open
   * @description Convert raw resource data into a resource instance. E.g. Take 3D model format
   * JSON and return a {@link Model}.
   * @param {string} url - The URL of the resource to open.
   * @param {*} data - The raw resource data passed by callback from {@link ResourceHandler#load}.
   * @param {import('../../platform/graphics/graphics-device.js').GraphicsDevice} device - The
   * graphics device.
   * @returns {Texture} The parsed resource data.
   */
  open(url, data, device) {
    throw new Error('not implemented');
  }
  /* eslint-enable jsdoc/require-returns-check */
}

// In the case where a texture has more than 1 level of mip data specified, but not the full
// mip chain, we generate the missing levels here.
// This is to overcome an issue where iphone xr and xs ignores further updates to the mip data
// after invoking gl.generateMipmap on the texture (which was the previous method of ensuring
// the texture's full mip chain was complete).
// NOTE: this function only resamples RGBA8 and RGBAFloat32 data.
const _completePartialMipmapChain = function _completePartialMipmapChain(texture) {
  const requiredMipLevels = Math.log2(Math.max(texture._width, texture._height)) + 1;
  const isHtmlElement = function isHtmlElement(object) {
    return object instanceof HTMLCanvasElement || object instanceof HTMLImageElement || object instanceof HTMLVideoElement;
  };
  if (!(texture._format === PIXELFORMAT_RGBA8 || texture._format === PIXELFORMAT_RGBA32F) || texture._volume || texture._compressed || texture._levels.length === 1 || texture._levels.length === requiredMipLevels || isHtmlElement(texture._cubemap ? texture._levels[0][0] : texture._levels[0])) {
    return;
  }
  const downsample = function downsample(width, height, data) {
    const sampledWidth = Math.max(1, width >> 1);
    const sampledHeight = Math.max(1, height >> 1);
    const sampledData = new data.constructor(sampledWidth * sampledHeight * 4);
    const xs = Math.floor(width / sampledWidth);
    const ys = Math.floor(height / sampledHeight);
    const xsys = xs * ys;
    for (let y = 0; y < sampledHeight; ++y) {
      for (let x = 0; x < sampledWidth; ++x) {
        for (let e = 0; e < 4; ++e) {
          let sum = 0;
          for (let sy = 0; sy < ys; ++sy) {
            for (let sx = 0; sx < xs; ++sx) {
              sum += data[(x * xs + sx + (y * ys + sy) * width) * 4 + e];
            }
          }
          sampledData[(x + y * sampledWidth) * 4 + e] = sum / xsys;
        }
      }
    }
    return sampledData;
  };

  // step through levels
  for (let level = texture._levels.length; level < requiredMipLevels; ++level) {
    const width = Math.max(1, texture._width >> level - 1);
    const height = Math.max(1, texture._height >> level - 1);
    if (texture._cubemap) {
      const mips = [];
      for (let face = 0; face < 6; ++face) {
        mips.push(downsample(width, height, texture._levels[level - 1][face]));
      }
      texture._levels.push(mips);
    } else {
      texture._levels.push(downsample(width, height, texture._levels[level - 1]));
    }
  }
  texture._levelsUpdated = texture._cubemap ? [[true, true, true, true, true, true]] : [true];
};

/**
 * Resource handler used for loading 2D and 3D {@link Texture} resources.
 *
 * @implements {ResourceHandler}
 */
class TextureHandler {
  /**
   * Create a new TextureHandler instance.
   *
   * @param {import('../app-base.js').AppBase} app - The running {@link AppBase}.
   * @hideconstructor
   */
  constructor(app) {
    /**
     * Type of the resource the handler handles.
     *
     * @type {string}
     */
    this.handlerType = "texture";
    const assets = app.assets;
    const device = app.graphicsDevice;
    this._device = device;
    this._assets = assets;

    // img parser handles all browser-supported image formats, this
    // parser will be used when other more specific parsers are not found.
    this.imgParser = new ImgParser(assets, device);
    this.parsers = {
      dds: new DdsParser(assets),
      ktx: new KtxParser(assets),
      ktx2: new Ktx2Parser(assets, device),
      basis: new BasisParser(assets, device),
      hdr: new HdrParser(assets)
    };
  }
  set crossOrigin(value) {
    this.imgParser.crossOrigin = value;
  }
  get crossOrigin() {
    return this.imgParser.crossOrigin;
  }
  set maxRetries(value) {
    this.imgParser.maxRetries = value;
    for (const parser in this.parsers) {
      if (this.parsers.hasOwnProperty(parser)) {
        this.parsers[parser].maxRetries = value;
      }
    }
  }
  get maxRetries() {
    return this.imgParser.maxRetries;
  }
  _getUrlWithoutParams(url) {
    return url.indexOf('?') >= 0 ? url.split('?')[0] : url;
  }
  _getParser(url) {
    const ext = path.getExtension(this._getUrlWithoutParams(url)).toLowerCase().replace('.', '');
    return this.parsers[ext] || this.imgParser;
  }
  _getTextureOptions(asset) {
    const options = {
      profilerHint: TEXHINT_ASSET
    };
    if (asset) {
      var _asset$name;
      if (((_asset$name = asset.name) == null ? void 0 : _asset$name.length) > 0) {
        options.name = asset.name;
      }
      const assetData = asset.data;
      if (assetData.hasOwnProperty('minfilter')) {
        options.minFilter = JSON_FILTER_MODE[assetData.minfilter];
      }
      if (assetData.hasOwnProperty('magfilter')) {
        options.magFilter = JSON_FILTER_MODE[assetData.magfilter];
      }
      if (assetData.hasOwnProperty('addressu')) {
        options.addressU = JSON_ADDRESS_MODE[assetData.addressu];
      }
      if (assetData.hasOwnProperty('addressv')) {
        options.addressV = JSON_ADDRESS_MODE[assetData.addressv];
      }
      if (assetData.hasOwnProperty('mipmaps')) {
        options.mipmaps = assetData.mipmaps;
      }
      if (assetData.hasOwnProperty('anisotropy')) {
        options.anisotropy = assetData.anisotropy;
      }
      if (assetData.hasOwnProperty('flipY')) {
        options.flipY = !!assetData.flipY;
      }

      // extract asset type (this is bit of a mess)
      if (assetData.hasOwnProperty('type')) {
        options.type = JSON_TEXTURE_TYPE[assetData.type];
      } else if (assetData.hasOwnProperty('rgbm') && assetData.rgbm) {
        options.type = TEXTURETYPE_RGBM;
      } else if (asset.file && (asset.file.opt & 8) !== 0) {
        // basis normalmaps flag the variant as swizzled
        options.type = TEXTURETYPE_SWIZZLEGGGR;
      }
    }
    return options;
  }
  load(url, callback, asset) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }
    this._getParser(url.original).load(url, callback, asset);
  }
  open(url, data, asset) {
    if (!url) return undefined;
    const textureOptions = this._getTextureOptions(asset);
    let texture = this._getParser(url).open(url, data, this._device, textureOptions);
    if (texture === null) {
      texture = new Texture(this._device, {
        width: 4,
        height: 4,
        format: PIXELFORMAT_RGB8
      });
    } else {
      // check if the texture has only a partial mipmap chain specified and generate the
      // missing levels if possible.
      _completePartialMipmapChain(texture);

      // if the basis transcoder unswizzled a GGGR texture, remove the flag from the asset
      if (data.unswizzledGGGR) {
        asset.file.variants.basis.opt &= ~8;
      }
    }
    return texture;
  }
  patch(asset, assets) {
    const texture = asset.resource;
    if (!texture) {
      return;
    }

    // apply asset options, based on asset.data
    const options = this._getTextureOptions(asset);
    for (const key of Object.keys(options)) {
      texture[key] = options[key];
    }
  }
}

export { TextureHandler, TextureParser };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dHVyZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2ZyYW1ld29yay9oYW5kbGVycy90ZXh0dXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhdGggfSBmcm9tICcuLi8uLi9jb3JlL3BhdGguanMnO1xuXG5pbXBvcnQge1xuICAgIFRFWEhJTlRfQVNTRVQsXG4gICAgQUREUkVTU19DTEFNUF9UT19FREdFLCBBRERSRVNTX01JUlJPUkVEX1JFUEVBVCwgQUREUkVTU19SRVBFQVQsXG4gICAgRklMVEVSX0xJTkVBUiwgRklMVEVSX05FQVJFU1QsIEZJTFRFUl9ORUFSRVNUX01JUE1BUF9ORUFSRVNULCBGSUxURVJfTkVBUkVTVF9NSVBNQVBfTElORUFSLCBGSUxURVJfTElORUFSX01JUE1BUF9ORUFSRVNULCBGSUxURVJfTElORUFSX01JUE1BUF9MSU5FQVIsXG4gICAgUElYRUxGT1JNQVRfUkdCOCwgUElYRUxGT1JNQVRfUkdCQTgsIFBJWEVMRk9STUFUX1JHQkEzMkYsXG4gICAgVEVYVFVSRVRZUEVfREVGQVVMVCwgVEVYVFVSRVRZUEVfUkdCRSwgVEVYVFVSRVRZUEVfUkdCTSwgVEVYVFVSRVRZUEVfU1dJWlpMRUdHR1IsIFRFWFRVUkVUWVBFX1JHQlBcbn0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy90ZXh0dXJlLmpzJztcblxuaW1wb3J0IHsgQmFzaXNQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL3RleHR1cmUvYmFzaXMuanMnO1xuaW1wb3J0IHsgSW1nUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2Vycy90ZXh0dXJlL2ltZy5qcyc7XG5pbXBvcnQgeyBLdHhQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL3RleHR1cmUva3R4LmpzJztcbmltcG9ydCB7IEt0eDJQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL3RleHR1cmUva3R4Mi5qcyc7XG5pbXBvcnQgeyBEZHNQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXJzL3RleHR1cmUvZGRzLmpzJztcbmltcG9ydCB7IEhkclBhcnNlciB9IGZyb20gJy4uL3BhcnNlcnMvdGV4dHVyZS9oZHIuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9oYW5kbGVyLmpzJykuUmVzb3VyY2VIYW5kbGVyfSBSZXNvdXJjZUhhbmRsZXIgKi9cblxuY29uc3QgSlNPTl9BRERSRVNTX01PREUgPSB7XG4gICAgJ3JlcGVhdCc6IEFERFJFU1NfUkVQRUFULFxuICAgICdjbGFtcCc6IEFERFJFU1NfQ0xBTVBfVE9fRURHRSxcbiAgICAnbWlycm9yJzogQUREUkVTU19NSVJST1JFRF9SRVBFQVRcbn07XG5cbmNvbnN0IEpTT05fRklMVEVSX01PREUgPSB7XG4gICAgJ25lYXJlc3QnOiBGSUxURVJfTkVBUkVTVCxcbiAgICAnbGluZWFyJzogRklMVEVSX0xJTkVBUixcbiAgICAnbmVhcmVzdF9taXBfbmVhcmVzdCc6IEZJTFRFUl9ORUFSRVNUX01JUE1BUF9ORUFSRVNULFxuICAgICdsaW5lYXJfbWlwX25lYXJlc3QnOiBGSUxURVJfTElORUFSX01JUE1BUF9ORUFSRVNULFxuICAgICduZWFyZXN0X21pcF9saW5lYXInOiBGSUxURVJfTkVBUkVTVF9NSVBNQVBfTElORUFSLFxuICAgICdsaW5lYXJfbWlwX2xpbmVhcic6IEZJTFRFUl9MSU5FQVJfTUlQTUFQX0xJTkVBUlxufTtcblxuY29uc3QgSlNPTl9URVhUVVJFX1RZUEUgPSB7XG4gICAgJ2RlZmF1bHQnOiBURVhUVVJFVFlQRV9ERUZBVUxULFxuICAgICdyZ2JtJzogVEVYVFVSRVRZUEVfUkdCTSxcbiAgICAncmdiZSc6IFRFWFRVUkVUWVBFX1JHQkUsXG4gICAgJ3JnYnAnOiBURVhUVVJFVFlQRV9SR0JQLFxuICAgICdzd2l6emxlR0dHUic6IFRFWFRVUkVUWVBFX1NXSVpaTEVHR0dSXG59O1xuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqIEBuYW1lIFRleHR1cmVQYXJzZXJcbiAqIEBkZXNjcmlwdGlvbiBJbnRlcmZhY2UgdG8gYSB0ZXh0dXJlIHBhcnNlci4gSW1wbGVtZW50YXRpb25zIG9mIHRoaXMgaW50ZXJmYWNlIGhhbmRsZSB0aGUgbG9hZGluZ1xuICogYW5kIG9wZW5pbmcgb2YgdGV4dHVyZSBhc3NldHMuXG4gKi9cbmNsYXNzIFRleHR1cmVQYXJzZXIge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIGpzZG9jL3JlcXVpcmUtcmV0dXJucy1jaGVjayAqL1xuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBuYW1lIFRleHR1cmVQYXJzZXIjbG9hZFxuICAgICAqIEBkZXNjcmlwdGlvbiBMb2FkIHRoZSB0ZXh0dXJlIGZyb20gdGhlIHJlbW90ZSBVUkwuIFdoZW4gbG9hZGVkIChvciBmYWlsZWQpLFxuICAgICAqIHVzZSB0aGUgY2FsbGJhY2sgdG8gcmV0dXJuIGFuIHRoZSByYXcgcmVzb3VyY2UgZGF0YSAob3IgZXJyb3IpLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB1cmwgLSBUaGUgVVJMIG9mIHRoZSByZXNvdXJjZSB0byBsb2FkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwubG9hZCAtIFRoZSBVUkwgdG8gdXNlIGZvciBsb2FkaW5nIHRoZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsLm9yaWdpbmFsIC0gVGhlIG9yaWdpbmFsIFVSTCB1c2VmdWwgZm9yIGlkZW50aWZ5aW5nIHRoZSByZXNvdXJjZSB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL2hhbmRsZXIuanMnKS5SZXNvdXJjZUhhbmRsZXJDYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdXNlZCB3aGVuXG4gICAgICogdGhlIHJlc291cmNlIGlzIGxvYWRlZCBvciBhbiBlcnJvciBvY2N1cnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2Fzc2V0L2Fzc2V0LmpzJykuQXNzZXR9IFthc3NldF0gLSBPcHRpb25hbCBhc3NldCB0aGF0IGlzIHBhc3NlZCBieVxuICAgICAqIFJlc291cmNlTG9hZGVyLlxuICAgICAqL1xuICAgIGxvYWQodXJsLCBjYWxsYmFjaywgYXNzZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBUZXh0dXJlUGFyc2VyI29wZW5cbiAgICAgKiBAZGVzY3JpcHRpb24gQ29udmVydCByYXcgcmVzb3VyY2UgZGF0YSBpbnRvIGEgcmVzb3VyY2UgaW5zdGFuY2UuIEUuZy4gVGFrZSAzRCBtb2RlbCBmb3JtYXRcbiAgICAgKiBKU09OIGFuZCByZXR1cm4gYSB7QGxpbmsgTW9kZWx9LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgVVJMIG9mIHRoZSByZXNvdXJjZSB0byBvcGVuLlxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSAtIFRoZSByYXcgcmVzb3VyY2UgZGF0YSBwYXNzZWQgYnkgY2FsbGJhY2sgZnJvbSB7QGxpbmsgUmVzb3VyY2VIYW5kbGVyI2xvYWR9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9ncmFwaGljcy1kZXZpY2UuanMnKS5HcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlXG4gICAgICogZ3JhcGhpY3MgZGV2aWNlLlxuICAgICAqIEByZXR1cm5zIHtUZXh0dXJlfSBUaGUgcGFyc2VkIHJlc291cmNlIGRhdGEuXG4gICAgICovXG4gICAgb3Blbih1cmwsIGRhdGEsIGRldmljZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIGpzZG9jL3JlcXVpcmUtcmV0dXJucy1jaGVjayAqL1xufVxuXG4vLyBJbiB0aGUgY2FzZSB3aGVyZSBhIHRleHR1cmUgaGFzIG1vcmUgdGhhbiAxIGxldmVsIG9mIG1pcCBkYXRhIHNwZWNpZmllZCwgYnV0IG5vdCB0aGUgZnVsbFxuLy8gbWlwIGNoYWluLCB3ZSBnZW5lcmF0ZSB0aGUgbWlzc2luZyBsZXZlbHMgaGVyZS5cbi8vIFRoaXMgaXMgdG8gb3ZlcmNvbWUgYW4gaXNzdWUgd2hlcmUgaXBob25lIHhyIGFuZCB4cyBpZ25vcmVzIGZ1cnRoZXIgdXBkYXRlcyB0byB0aGUgbWlwIGRhdGFcbi8vIGFmdGVyIGludm9raW5nIGdsLmdlbmVyYXRlTWlwbWFwIG9uIHRoZSB0ZXh0dXJlICh3aGljaCB3YXMgdGhlIHByZXZpb3VzIG1ldGhvZCBvZiBlbnN1cmluZ1xuLy8gdGhlIHRleHR1cmUncyBmdWxsIG1pcCBjaGFpbiB3YXMgY29tcGxldGUpLlxuLy8gTk9URTogdGhpcyBmdW5jdGlvbiBvbmx5IHJlc2FtcGxlcyBSR0JBOCBhbmQgUkdCQUZsb2F0MzIgZGF0YS5cbmNvbnN0IF9jb21wbGV0ZVBhcnRpYWxNaXBtYXBDaGFpbiA9IGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG5cbiAgICBjb25zdCByZXF1aXJlZE1pcExldmVscyA9IE1hdGgubG9nMihNYXRoLm1heCh0ZXh0dXJlLl93aWR0aCwgdGV4dHVyZS5faGVpZ2h0KSkgKyAxO1xuXG4gICAgY29uc3QgaXNIdG1sRWxlbWVudCA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkgfHxcbiAgICAgICAgICAgICAgIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB8fFxuICAgICAgICAgICAgICAgKG9iamVjdCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpO1xuICAgIH07XG5cbiAgICBpZiAoISh0ZXh0dXJlLl9mb3JtYXQgPT09IFBJWEVMRk9STUFUX1JHQkE4IHx8XG4gICAgICAgICAgdGV4dHVyZS5fZm9ybWF0ID09PSBQSVhFTEZPUk1BVF9SR0JBMzJGKSB8fFxuICAgICAgICAgIHRleHR1cmUuX3ZvbHVtZSB8fFxuICAgICAgICAgIHRleHR1cmUuX2NvbXByZXNzZWQgfHxcbiAgICAgICAgICB0ZXh0dXJlLl9sZXZlbHMubGVuZ3RoID09PSAxIHx8XG4gICAgICAgICAgdGV4dHVyZS5fbGV2ZWxzLmxlbmd0aCA9PT0gcmVxdWlyZWRNaXBMZXZlbHMgfHxcbiAgICAgICAgICBpc0h0bWxFbGVtZW50KHRleHR1cmUuX2N1YmVtYXAgPyB0ZXh0dXJlLl9sZXZlbHNbMF1bMF0gOiB0ZXh0dXJlLl9sZXZlbHNbMF0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkb3duc2FtcGxlID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIGRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlZFdpZHRoID0gTWF0aC5tYXgoMSwgd2lkdGggPj4gMSk7XG4gICAgICAgIGNvbnN0IHNhbXBsZWRIZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQgPj4gMSk7XG4gICAgICAgIGNvbnN0IHNhbXBsZWREYXRhID0gbmV3IGRhdGEuY29uc3RydWN0b3Ioc2FtcGxlZFdpZHRoICogc2FtcGxlZEhlaWdodCAqIDQpO1xuXG4gICAgICAgIGNvbnN0IHhzID0gTWF0aC5mbG9vcih3aWR0aCAvIHNhbXBsZWRXaWR0aCk7XG4gICAgICAgIGNvbnN0IHlzID0gTWF0aC5mbG9vcihoZWlnaHQgLyBzYW1wbGVkSGVpZ2h0KTtcbiAgICAgICAgY29uc3QgeHN5cyA9IHhzICogeXM7XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBzYW1wbGVkSGVpZ2h0OyArK3kpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgc2FtcGxlZFdpZHRoOyArK3gpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDQ7ICsrZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3kgPSAwOyBzeSA8IHlzOyArK3N5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzeCA9IDA7IHN4IDwgeHM7ICsrc3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gZGF0YVsoeCAqIHhzICsgc3ggKyAoeSAqIHlzICsgc3kpICogd2lkdGgpICogNCArIGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZWREYXRhWyh4ICsgeSAqIHNhbXBsZWRXaWR0aCkgKiA0ICsgZV0gPSBzdW0gLyB4c3lzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzYW1wbGVkRGF0YTtcbiAgICB9O1xuXG4gICAgLy8gc3RlcCB0aHJvdWdoIGxldmVsc1xuICAgIGZvciAobGV0IGxldmVsID0gdGV4dHVyZS5fbGV2ZWxzLmxlbmd0aDsgbGV2ZWwgPCByZXF1aXJlZE1pcExldmVsczsgKytsZXZlbCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KDEsIHRleHR1cmUuX3dpZHRoID4+IChsZXZlbCAtIDEpKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoMSwgdGV4dHVyZS5faGVpZ2h0ID4+IChsZXZlbCAtIDEpKTtcbiAgICAgICAgaWYgKHRleHR1cmUuX2N1YmVtYXApIHtcbiAgICAgICAgICAgIGNvbnN0IG1pcHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgNjsgKytmYWNlKSB7XG4gICAgICAgICAgICAgICAgbWlwcy5wdXNoKGRvd25zYW1wbGUod2lkdGgsIGhlaWdodCwgdGV4dHVyZS5fbGV2ZWxzW2xldmVsIC0gMV1bZmFjZV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHR1cmUuX2xldmVscy5wdXNoKG1pcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZS5fbGV2ZWxzLnB1c2goZG93bnNhbXBsZSh3aWR0aCwgaGVpZ2h0LCB0ZXh0dXJlLl9sZXZlbHNbbGV2ZWwgLSAxXSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGV4dHVyZS5fbGV2ZWxzVXBkYXRlZCA9IHRleHR1cmUuX2N1YmVtYXAgPyBbW3RydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWVdXSA6IFt0cnVlXTtcbn07XG5cbi8qKlxuICogUmVzb3VyY2UgaGFuZGxlciB1c2VkIGZvciBsb2FkaW5nIDJEIGFuZCAzRCB7QGxpbmsgVGV4dHVyZX0gcmVzb3VyY2VzLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtSZXNvdXJjZUhhbmRsZXJ9XG4gKi9cbmNsYXNzIFRleHR1cmVIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBUeXBlIG9mIHRoZSByZXNvdXJjZSB0aGUgaGFuZGxlciBoYW5kbGVzLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBoYW5kbGVyVHlwZSA9IFwidGV4dHVyZVwiO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFRleHR1cmVIYW5kbGVyIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gYXBwIC0gVGhlIHJ1bm5pbmcge0BsaW5rIEFwcEJhc2V9LlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgY29uc3QgYXNzZXRzID0gYXBwLmFzc2V0cztcbiAgICAgICAgY29uc3QgZGV2aWNlID0gYXBwLmdyYXBoaWNzRGV2aWNlO1xuXG4gICAgICAgIHRoaXMuX2RldmljZSA9IGRldmljZTtcbiAgICAgICAgdGhpcy5fYXNzZXRzID0gYXNzZXRzO1xuXG4gICAgICAgIC8vIGltZyBwYXJzZXIgaGFuZGxlcyBhbGwgYnJvd3Nlci1zdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cywgdGhpc1xuICAgICAgICAvLyBwYXJzZXIgd2lsbCBiZSB1c2VkIHdoZW4gb3RoZXIgbW9yZSBzcGVjaWZpYyBwYXJzZXJzIGFyZSBub3QgZm91bmQuXG4gICAgICAgIHRoaXMuaW1nUGFyc2VyID0gbmV3IEltZ1BhcnNlcihhc3NldHMsIGRldmljZSk7XG5cbiAgICAgICAgdGhpcy5wYXJzZXJzID0ge1xuICAgICAgICAgICAgZGRzOiBuZXcgRGRzUGFyc2VyKGFzc2V0cyksXG4gICAgICAgICAgICBrdHg6IG5ldyBLdHhQYXJzZXIoYXNzZXRzKSxcbiAgICAgICAgICAgIGt0eDI6IG5ldyBLdHgyUGFyc2VyKGFzc2V0cywgZGV2aWNlKSxcbiAgICAgICAgICAgIGJhc2lzOiBuZXcgQmFzaXNQYXJzZXIoYXNzZXRzLCBkZXZpY2UpLFxuICAgICAgICAgICAgaGRyOiBuZXcgSGRyUGFyc2VyKGFzc2V0cylcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXQgY3Jvc3NPcmlnaW4odmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbWdQYXJzZXIuY3Jvc3NPcmlnaW4gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgY3Jvc3NPcmlnaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltZ1BhcnNlci5jcm9zc09yaWdpbjtcbiAgICB9XG5cbiAgICBzZXQgbWF4UmV0cmllcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLmltZ1BhcnNlci5tYXhSZXRyaWVzID0gdmFsdWU7XG4gICAgICAgIGZvciAoY29uc3QgcGFyc2VyIGluIHRoaXMucGFyc2Vycykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyc2Vycy5oYXNPd25Qcm9wZXJ0eShwYXJzZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZXJzW3BhcnNlcl0ubWF4UmV0cmllcyA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IG1heFJldHJpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltZ1BhcnNlci5tYXhSZXRyaWVzO1xuICAgIH1cblxuICAgIF9nZXRVcmxXaXRob3V0UGFyYW1zKHVybCkge1xuICAgICAgICByZXR1cm4gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gdXJsLnNwbGl0KCc/JylbMF0gOiB1cmw7XG4gICAgfVxuXG4gICAgX2dldFBhcnNlcih1cmwpIHtcbiAgICAgICAgY29uc3QgZXh0ID0gcGF0aC5nZXRFeHRlbnNpb24odGhpcy5fZ2V0VXJsV2l0aG91dFBhcmFtcyh1cmwpKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJy4nLCAnJyk7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlcnNbZXh0XSB8fCB0aGlzLmltZ1BhcnNlcjtcbiAgICB9XG5cbiAgICBfZ2V0VGV4dHVyZU9wdGlvbnMoYXNzZXQpIHtcblxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgLy8gI2lmIF9QUk9GSUxFUlxuICAgICAgICAgICAgcHJvZmlsZXJIaW50OiBURVhISU5UX0FTU0VUXG4gICAgICAgICAgICAvLyAjZW5kaWZcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoYXNzZXQpIHtcbiAgICAgICAgICAgIGlmIChhc3NldC5uYW1lPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5uYW1lID0gYXNzZXQubmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYXNzZXREYXRhID0gYXNzZXQuZGF0YTtcblxuICAgICAgICAgICAgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgnbWluZmlsdGVyJykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1pbkZpbHRlciA9IEpTT05fRklMVEVSX01PREVbYXNzZXREYXRhLm1pbmZpbHRlcl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ21hZ2ZpbHRlcicpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tYWdGaWx0ZXIgPSBKU09OX0ZJTFRFUl9NT0RFW2Fzc2V0RGF0YS5tYWdmaWx0ZXJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCdhZGRyZXNzdScpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hZGRyZXNzVSA9IEpTT05fQUREUkVTU19NT0RFW2Fzc2V0RGF0YS5hZGRyZXNzdV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ2FkZHJlc3N2JykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFkZHJlc3NWID0gSlNPTl9BRERSRVNTX01PREVbYXNzZXREYXRhLmFkZHJlc3N2XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgnbWlwbWFwcycpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5taXBtYXBzID0gYXNzZXREYXRhLm1pcG1hcHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ2FuaXNvdHJvcHknKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYW5pc290cm9weSA9IGFzc2V0RGF0YS5hbmlzb3Ryb3B5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCdmbGlwWScpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mbGlwWSA9ICEhYXNzZXREYXRhLmZsaXBZO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBleHRyYWN0IGFzc2V0IHR5cGUgKHRoaXMgaXMgYml0IG9mIGEgbWVzcylcbiAgICAgICAgICAgIGlmIChhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ3R5cGUnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZSA9IEpTT05fVEVYVFVSRV9UWVBFW2Fzc2V0RGF0YS50eXBlXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzZXREYXRhLmhhc093blByb3BlcnR5KCdyZ2JtJykgJiYgYXNzZXREYXRhLnJnYm0pIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUgPSBURVhUVVJFVFlQRV9SR0JNO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhc3NldC5maWxlICYmIChhc3NldC5maWxlLm9wdCAmIDgpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gYmFzaXMgbm9ybWFsbWFwcyBmbGFnIHRoZSB2YXJpYW50IGFzIHN3aXp6bGVkXG4gICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlID0gVEVYVFVSRVRZUEVfU1dJWlpMRUdHR1I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG5cbiAgICBsb2FkKHVybCwgY2FsbGJhY2ssIGFzc2V0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdXJsID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IHVybCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbDogdXJsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZ2V0UGFyc2VyKHVybC5vcmlnaW5hbCkubG9hZCh1cmwsIGNhbGxiYWNrLCBhc3NldCk7XG4gICAgfVxuXG4gICAgb3Blbih1cmwsIGRhdGEsIGFzc2V0KSB7XG4gICAgICAgIGlmICghdXJsKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlT3B0aW9ucyA9IHRoaXMuX2dldFRleHR1cmVPcHRpb25zKGFzc2V0KTtcbiAgICAgICAgbGV0IHRleHR1cmUgPSB0aGlzLl9nZXRQYXJzZXIodXJsKS5vcGVuKHVybCwgZGF0YSwgdGhpcy5fZGV2aWNlLCB0ZXh0dXJlT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRleHR1cmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLl9kZXZpY2UsIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogNCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDQsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBQSVhFTEZPUk1BVF9SR0I4XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSB0ZXh0dXJlIGhhcyBvbmx5IGEgcGFydGlhbCBtaXBtYXAgY2hhaW4gc3BlY2lmaWVkIGFuZCBnZW5lcmF0ZSB0aGVcbiAgICAgICAgICAgIC8vIG1pc3NpbmcgbGV2ZWxzIGlmIHBvc3NpYmxlLlxuICAgICAgICAgICAgX2NvbXBsZXRlUGFydGlhbE1pcG1hcENoYWluKHRleHR1cmUpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgYmFzaXMgdHJhbnNjb2RlciB1bnN3aXp6bGVkIGEgR0dHUiB0ZXh0dXJlLCByZW1vdmUgdGhlIGZsYWcgZnJvbSB0aGUgYXNzZXRcbiAgICAgICAgICAgIGlmIChkYXRhLnVuc3dpenpsZWRHR0dSKSB7XG4gICAgICAgICAgICAgICAgYXNzZXQuZmlsZS52YXJpYW50cy5iYXNpcy5vcHQgJj0gfjg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICBwYXRjaChhc3NldCwgYXNzZXRzKSB7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSBhc3NldC5yZXNvdXJjZTtcbiAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhcHBseSBhc3NldCBvcHRpb25zLCBiYXNlZCBvbiBhc3NldC5kYXRhXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9nZXRUZXh0dXJlT3B0aW9ucyhhc3NldCk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICB0ZXh0dXJlW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFRleHR1cmVIYW5kbGVyLCBUZXh0dXJlUGFyc2VyIH07XG4iXSwibmFtZXMiOlsiSlNPTl9BRERSRVNTX01PREUiLCJBRERSRVNTX1JFUEVBVCIsIkFERFJFU1NfQ0xBTVBfVE9fRURHRSIsIkFERFJFU1NfTUlSUk9SRURfUkVQRUFUIiwiSlNPTl9GSUxURVJfTU9ERSIsIkZJTFRFUl9ORUFSRVNUIiwiRklMVEVSX0xJTkVBUiIsIkZJTFRFUl9ORUFSRVNUX01JUE1BUF9ORUFSRVNUIiwiRklMVEVSX0xJTkVBUl9NSVBNQVBfTkVBUkVTVCIsIkZJTFRFUl9ORUFSRVNUX01JUE1BUF9MSU5FQVIiLCJGSUxURVJfTElORUFSX01JUE1BUF9MSU5FQVIiLCJKU09OX1RFWFRVUkVfVFlQRSIsIlRFWFRVUkVUWVBFX0RFRkFVTFQiLCJURVhUVVJFVFlQRV9SR0JNIiwiVEVYVFVSRVRZUEVfUkdCRSIsIlRFWFRVUkVUWVBFX1JHQlAiLCJURVhUVVJFVFlQRV9TV0laWkxFR0dHUiIsIlRleHR1cmVQYXJzZXIiLCJsb2FkIiwidXJsIiwiY2FsbGJhY2siLCJhc3NldCIsIkVycm9yIiwib3BlbiIsImRhdGEiLCJkZXZpY2UiLCJfY29tcGxldGVQYXJ0aWFsTWlwbWFwQ2hhaW4iLCJ0ZXh0dXJlIiwicmVxdWlyZWRNaXBMZXZlbHMiLCJNYXRoIiwibG9nMiIsIm1heCIsIl93aWR0aCIsIl9oZWlnaHQiLCJpc0h0bWxFbGVtZW50Iiwib2JqZWN0IiwiSFRNTENhbnZhc0VsZW1lbnQiLCJIVE1MSW1hZ2VFbGVtZW50IiwiSFRNTFZpZGVvRWxlbWVudCIsIl9mb3JtYXQiLCJQSVhFTEZPUk1BVF9SR0JBOCIsIlBJWEVMRk9STUFUX1JHQkEzMkYiLCJfdm9sdW1lIiwiX2NvbXByZXNzZWQiLCJfbGV2ZWxzIiwibGVuZ3RoIiwiX2N1YmVtYXAiLCJkb3duc2FtcGxlIiwid2lkdGgiLCJoZWlnaHQiLCJzYW1wbGVkV2lkdGgiLCJzYW1wbGVkSGVpZ2h0Iiwic2FtcGxlZERhdGEiLCJjb25zdHJ1Y3RvciIsInhzIiwiZmxvb3IiLCJ5cyIsInhzeXMiLCJ5IiwieCIsImUiLCJzdW0iLCJzeSIsInN4IiwibGV2ZWwiLCJtaXBzIiwiZmFjZSIsInB1c2giLCJfbGV2ZWxzVXBkYXRlZCIsIlRleHR1cmVIYW5kbGVyIiwiYXBwIiwiaGFuZGxlclR5cGUiLCJhc3NldHMiLCJncmFwaGljc0RldmljZSIsIl9kZXZpY2UiLCJfYXNzZXRzIiwiaW1nUGFyc2VyIiwiSW1nUGFyc2VyIiwicGFyc2VycyIsImRkcyIsIkRkc1BhcnNlciIsImt0eCIsIkt0eFBhcnNlciIsImt0eDIiLCJLdHgyUGFyc2VyIiwiYmFzaXMiLCJCYXNpc1BhcnNlciIsImhkciIsIkhkclBhcnNlciIsImNyb3NzT3JpZ2luIiwidmFsdWUiLCJtYXhSZXRyaWVzIiwicGFyc2VyIiwiaGFzT3duUHJvcGVydHkiLCJfZ2V0VXJsV2l0aG91dFBhcmFtcyIsImluZGV4T2YiLCJzcGxpdCIsIl9nZXRQYXJzZXIiLCJleHQiLCJwYXRoIiwiZ2V0RXh0ZW5zaW9uIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiX2dldFRleHR1cmVPcHRpb25zIiwib3B0aW9ucyIsInByb2ZpbGVySGludCIsIlRFWEhJTlRfQVNTRVQiLCJfYXNzZXQkbmFtZSIsIm5hbWUiLCJhc3NldERhdGEiLCJtaW5GaWx0ZXIiLCJtaW5maWx0ZXIiLCJtYWdGaWx0ZXIiLCJtYWdmaWx0ZXIiLCJhZGRyZXNzVSIsImFkZHJlc3N1IiwiYWRkcmVzc1YiLCJhZGRyZXNzdiIsIm1pcG1hcHMiLCJhbmlzb3Ryb3B5IiwiZmxpcFkiLCJ0eXBlIiwicmdibSIsImZpbGUiLCJvcHQiLCJvcmlnaW5hbCIsInVuZGVmaW5lZCIsInRleHR1cmVPcHRpb25zIiwiVGV4dHVyZSIsImZvcm1hdCIsIlBJWEVMRk9STUFUX1JHQjgiLCJ1bnN3aXp6bGVkR0dHUiIsInZhcmlhbnRzIiwicGF0Y2giLCJyZXNvdXJjZSIsImtleSIsIk9iamVjdCIsImtleXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFrQkE7O0FBRUEsTUFBTUEsaUJBQWlCLEdBQUc7QUFDdEIsRUFBQSxRQUFRLEVBQUVDLGNBQWM7QUFDeEIsRUFBQSxPQUFPLEVBQUVDLHFCQUFxQjtBQUM5QixFQUFBLFFBQVEsRUFBRUMsdUJBQUFBO0FBQ2QsQ0FBQyxDQUFBO0FBRUQsTUFBTUMsZ0JBQWdCLEdBQUc7QUFDckIsRUFBQSxTQUFTLEVBQUVDLGNBQWM7QUFDekIsRUFBQSxRQUFRLEVBQUVDLGFBQWE7QUFDdkIsRUFBQSxxQkFBcUIsRUFBRUMsNkJBQTZCO0FBQ3BELEVBQUEsb0JBQW9CLEVBQUVDLDRCQUE0QjtBQUNsRCxFQUFBLG9CQUFvQixFQUFFQyw0QkFBNEI7QUFDbEQsRUFBQSxtQkFBbUIsRUFBRUMsMkJBQUFBO0FBQ3pCLENBQUMsQ0FBQTtBQUVELE1BQU1DLGlCQUFpQixHQUFHO0FBQ3RCLEVBQUEsU0FBUyxFQUFFQyxtQkFBbUI7QUFDOUIsRUFBQSxNQUFNLEVBQUVDLGdCQUFnQjtBQUN4QixFQUFBLE1BQU0sRUFBRUMsZ0JBQWdCO0FBQ3hCLEVBQUEsTUFBTSxFQUFFQyxnQkFBZ0I7QUFDeEIsRUFBQSxhQUFhLEVBQUVDLHVCQUFBQTtBQUNuQixDQUFDLENBQUE7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsYUFBYSxDQUFDO0FBQ2hCO0FBQ0E7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsSUFBSUEsQ0FBQ0MsR0FBRyxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRTtBQUN2QixJQUFBLE1BQU0sSUFBSUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUE7QUFDdEMsR0FB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
