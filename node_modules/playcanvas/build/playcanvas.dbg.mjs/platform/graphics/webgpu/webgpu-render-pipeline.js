import { Debug, DebugHelper } from '../../../core/debug.js';
import { TRACEID_PIPELINELAYOUT_ALLOC, TRACEID_RENDERPIPELINE_ALLOC } from '../../../core/constants.js';
import { WebgpuVertexBufferLayout } from './webgpu-vertex-buffer-layout.js';
import { WebgpuDebug } from './webgpu-debug.js';

let _pipelineId = 0;
let _layoutId = 0;
const _primitiveTopology = ['point-list',
// PRIMITIVE_POINTS
'line-list',
// PRIMITIVE_LINES
undefined,
// PRIMITIVE_LINELOOP
'line-strip',
// PRIMITIVE_LINESTRIP
'triangle-list',
// PRIMITIVE_TRIANGLES
'triangle-strip',
// PRIMITIVE_TRISTRIP
undefined // PRIMITIVE_TRIFAN
];

const _blendOperation = ['add',
// BLENDEQUATION_ADD
'subtract',
// BLENDEQUATION_SUBTRACT
'reverse-subtract',
// BLENDEQUATION_REVERSE_SUBTRACT
'min',
// BLENDEQUATION_MIN
'max' // BLENDEQUATION_MAX
];

const _blendFactor = ['zero',
// BLENDMODE_ZERO
'one',
// BLENDMODE_ONE
'src',
// BLENDMODE_SRC_COLOR
'one-minus-src',
// BLENDMODE_ONE_MINUS_SRC_COLOR
'dst',
// BLENDMODE_DST_COLOR
'one-minus-dst',
// BLENDMODE_ONE_MINUS_DST_COLOR
'src-alpha',
// BLENDMODE_SRC_ALPHA
'src-alpha-saturated',
// BLENDMODE_SRC_ALPHA_SATURATE
'one-minus-src-alpha',
// BLENDMODE_ONE_MINUS_SRC_ALPHA
'dst-alpha',
// BLENDMODE_DST_ALPHA
'one-minus-dst-alpha',
// BLENDMODE_ONE_MINUS_DST_ALPHA
'constant',
// BLENDMODE_CONSTANT
'one-minus-constant' // BLENDMODE_ONE_MINUS_CONSTANT
];

const _compareFunction = ['never',
// FUNC_NEVER
'less',
// FUNC_LESS
'equal',
// FUNC_EQUAL
'less-equal',
// FUNC_LESSEQUAL
'greater',
// FUNC_GREATER
'not-equal',
// FUNC_NOTEQUAL
'greater-equal',
// FUNC_GREATEREQUAL
'always' // FUNC_ALWAYS
];

const _cullModes = ['none',
// CULLFACE_NONE
'back',
// CULLFACE_BACK
'front' // CULLFACE_FRONT
];

const _stencilOps = ['keep',
// STENCILOP_KEEP
'zero',
// STENCILOP_ZERO
'replace',
// STENCILOP_REPLACE
'increment-clamp',
// STENCILOP_INCREMENT
'increment-wrap',
// STENCILOP_INCREMENTWRAP
'decrement-clamp',
// STENCILOP_DECREMENT
'decrement-wrap',
// STENCILOP_DECREMENTWRAP
'invert' // STENCILOP_INVERT
];

// temp array to avoid allocation
const _bindGroupLayouts = [];

/**
 * @ignore
 */
class WebgpuRenderPipeline {
  constructor(device) {
    /** @type {import('./webgpu-graphics-device.js').WebgpuGraphicsDevice} */
    this.device = device;

    /**
     * The cache of vertex buffer layouts
     *
     * @type {WebgpuVertexBufferLayout}
     */
    this.vertexBufferLayout = new WebgpuVertexBufferLayout();

    /**
     * The cache of render pipelines
     *
     * @type {Map<string, object>}
     */
    this.cache = new Map();
  }
  get(primitive, vertexFormat0, vertexFormat1, shader, renderTarget, bindGroupFormats, blendState, depthState, cullMode, stencilEnabled, stencilFront, stencilBack) {
    // render pipeline unique key
    const key = this.getKey(primitive, vertexFormat0, vertexFormat1, shader, renderTarget, bindGroupFormats, blendState, depthState, cullMode, stencilEnabled, stencilFront, stencilBack);

    // cached pipeline
    let pipeline = this.cache.get(key);
    if (!pipeline) {
      const primitiveTopology = _primitiveTopology[primitive.type];
      Debug.assert(primitiveTopology, `Unsupported primitive topology`, primitive);

      // pipeline layout
      const pipelineLayout = this.getPipelineLayout(bindGroupFormats);

      // vertex buffer layout
      const vertexBufferLayout = this.vertexBufferLayout.get(vertexFormat0, vertexFormat1);

      // pipeline
      pipeline = this.create(primitiveTopology, shader, renderTarget, pipelineLayout, blendState, depthState, vertexBufferLayout, cullMode, stencilEnabled, stencilFront, stencilBack);
      this.cache.set(key, pipeline);
    }
    return pipeline;
  }

  /**
   * Generate a unique key for the render pipeline. Keep this function as lean as possible,
   * as it executes for each draw call.
   */
  getKey(primitive, vertexFormat0, vertexFormat1, shader, renderTarget, bindGroupFormats, blendState, depthState, cullMode, stencilEnabled, stencilFront, stencilBack) {
    let bindGroupKey = '';
    for (let i = 0; i < bindGroupFormats.length; i++) {
      bindGroupKey += bindGroupFormats[i].key;
    }
    const vertexBufferLayoutKey = this.vertexBufferLayout.getKey(vertexFormat0, vertexFormat1);
    const renderTargetKey = renderTarget.impl.key;
    const stencilKey = stencilEnabled ? stencilFront.key + stencilBack.key : '';
    return vertexBufferLayoutKey + shader.impl.vertexCode + shader.impl.fragmentCode + renderTargetKey + primitive.type + bindGroupKey + blendState.key + depthState.key + cullMode + stencilKey;
  }

  // TODO: this could be cached using bindGroupKey

  /**
   * @param {import('../bind-group-format.js').BindGroupFormat[]} bindGroupFormats - An array
   * of bind group formats.
   * @returns {any} Returns the pipeline layout.
   */
  getPipelineLayout(bindGroupFormats) {
    bindGroupFormats.forEach(format => {
      _bindGroupLayouts.push(format.bindGroupLayout);
    });
    const descr = {
      bindGroupLayouts: _bindGroupLayouts
    };
    _layoutId++;
    DebugHelper.setLabel(descr, `PipelineLayoutDescr-${_layoutId}`);

    /** @type {GPUPipelineLayout} */
    const pipelineLayout = this.device.wgpu.createPipelineLayout(descr);
    DebugHelper.setLabel(pipelineLayout, `PipelineLayout-${_layoutId}`);
    Debug.trace(TRACEID_PIPELINELAYOUT_ALLOC, `Alloc: Id ${_layoutId}`, {
      descr,
      bindGroupFormats
    });
    _bindGroupLayouts.length = 0;
    return pipelineLayout;
  }
  getBlend(blendState) {
    // blend needs to be undefined when blending is disabled
    let blend;
    if (blendState.blend) {
      /** @type {GPUBlendState} */
      blend = {
        color: {
          operation: _blendOperation[blendState.colorOp],
          srcFactor: _blendFactor[blendState.colorSrcFactor],
          dstFactor: _blendFactor[blendState.colorDstFactor]
        },
        alpha: {
          operation: _blendOperation[blendState.alphaOp],
          srcFactor: _blendFactor[blendState.alphaSrcFactor],
          dstFactor: _blendFactor[blendState.alphaDstFactor]
        }
      };

      // unsupported blend factors
      Debug.assert(blend.color.srcFactor !== undefined);
      Debug.assert(blend.color.dstFactor !== undefined);
      Debug.assert(blend.alpha.srcFactor !== undefined);
      Debug.assert(blend.alpha.dstFactor !== undefined);
    }
    return blend;
  }

  /** @private */
  getDepthStencil(depthState, renderTarget, stencilEnabled, stencilFront, stencilBack) {
    /** @type {GPUDepthStencilState} */
    let depthStencil;
    const {
      depth,
      stencil
    } = renderTarget;
    if (depth || stencil) {
      // format of depth-stencil attachment
      depthStencil = {
        format: renderTarget.impl.depthFormat
      };

      // depth
      if (depth) {
        depthStencil.depthWriteEnabled = depthState.write;
        depthStencil.depthCompare = _compareFunction[depthState.func];
      } else {
        // if render target does not have depth buffer
        depthStencil.depthWriteEnabled = false;
        depthStencil.depthCompare = 'always';
      }

      // stencil
      if (stencil && stencilEnabled) {
        // Note that WebGPU only supports a single mask, we use the one from front, but not from back.
        depthStencil.stencilReadMas = stencilFront.readMask;
        depthStencil.stencilWriteMask = stencilFront.writeMask;
        depthStencil.stencilFront = {
          compare: _compareFunction[stencilFront.func],
          failOp: _stencilOps[stencilFront.fail],
          passOp: _stencilOps[stencilFront.zpass],
          depthFailOp: _stencilOps[stencilFront.zfail]
        };
        depthStencil.stencilBack = {
          compare: _compareFunction[stencilBack.func],
          failOp: _stencilOps[stencilBack.fail],
          passOp: _stencilOps[stencilBack.zpass],
          depthFailOp: _stencilOps[stencilBack.zfail]
        };
      }
    }
    return depthStencil;
  }
  create(primitiveTopology, shader, renderTarget, pipelineLayout, blendState, depthState, vertexBufferLayout, cullMode, stencilEnabled, stencilFront, stencilBack) {
    const wgpu = this.device.wgpu;

    /** @type {import('./webgpu-shader.js').WebgpuShader} */
    const webgpuShader = shader.impl;

    /** @type {GPURenderPipelineDescriptor} */
    const descr = {
      vertex: {
        module: webgpuShader.getVertexShaderModule(),
        entryPoint: webgpuShader.vertexEntryPoint,
        buffers: vertexBufferLayout
      },
      fragment: {
        module: webgpuShader.getFragmentShaderModule(),
        entryPoint: webgpuShader.fragmentEntryPoint,
        targets: []
      },
      primitive: {
        topology: primitiveTopology,
        frontFace: 'ccw',
        cullMode: _cullModes[cullMode]
      },
      depthStencil: this.getDepthStencil(depthState, renderTarget, stencilEnabled, stencilFront, stencilBack),
      multisample: {
        count: renderTarget.samples
      },
      // uniform / texture binding layout
      layout: pipelineLayout
    };

    // provide fragment targets only when render target contains color buffer, otherwise rendering to depth only
    // TODO: the exclusion of fragment here should be reflected in the key generation (no blend, no frag ..)
    const colorFormat = renderTarget.impl.colorFormat;
    if (colorFormat) {
      let writeMask = 0;
      if (blendState.redWrite) writeMask |= GPUColorWrite.RED;
      if (blendState.greenWrite) writeMask |= GPUColorWrite.GREEN;
      if (blendState.blueWrite) writeMask |= GPUColorWrite.BLUE;
      if (blendState.alphaWrite) writeMask |= GPUColorWrite.ALPHA;
      descr.fragment.targets.push({
        format: colorFormat,
        writeMask: writeMask,
        blend: this.getBlend(blendState)
      });
    }
    WebgpuDebug.validate(this.device);
    _pipelineId++;
    DebugHelper.setLabel(descr, `RenderPipelineDescr-${_pipelineId}`);
    const pipeline = wgpu.createRenderPipeline(descr);
    DebugHelper.setLabel(pipeline, `RenderPipeline-${_pipelineId}`);
    Debug.trace(TRACEID_RENDERPIPELINE_ALLOC, `Alloc: Id ${_pipelineId}`, descr);
    WebgpuDebug.end(this.device, {
      renderPipeline: this,
      descr,
      shader
    });
    return pipeline;
  }
}

export { WebgpuRenderPipeline };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LXJlbmRlci1waXBlbGluZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3dlYmdwdS93ZWJncHUtcmVuZGVyLXBpcGVsaW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnLCBEZWJ1Z0hlbHBlciB9IGZyb20gXCIuLi8uLi8uLi9jb3JlL2RlYnVnLmpzXCI7XG5pbXBvcnQgeyBUUkFDRUlEX1JFTkRFUlBJUEVMSU5FX0FMTE9DLCBUUkFDRUlEX1BJUEVMSU5FTEFZT1VUX0FMTE9DIH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCB7IFdlYmdwdVZlcnRleEJ1ZmZlckxheW91dCB9IGZyb20gXCIuL3dlYmdwdS12ZXJ0ZXgtYnVmZmVyLWxheW91dC5qc1wiO1xuaW1wb3J0IHsgV2ViZ3B1RGVidWcgfSBmcm9tIFwiLi93ZWJncHUtZGVidWcuanNcIjtcblxubGV0IF9waXBlbGluZUlkID0gMDtcbmxldCBfbGF5b3V0SWQgPSAwO1xuXG5jb25zdCBfcHJpbWl0aXZlVG9wb2xvZ3kgPSBbXG4gICAgJ3BvaW50LWxpc3QnLCAgICAgICAvLyBQUklNSVRJVkVfUE9JTlRTXG4gICAgJ2xpbmUtbGlzdCcsICAgICAgICAvLyBQUklNSVRJVkVfTElORVNcbiAgICB1bmRlZmluZWQsICAgICAgICAgIC8vIFBSSU1JVElWRV9MSU5FTE9PUFxuICAgICdsaW5lLXN0cmlwJywgICAgICAgLy8gUFJJTUlUSVZFX0xJTkVTVFJJUFxuICAgICd0cmlhbmdsZS1saXN0JywgICAgLy8gUFJJTUlUSVZFX1RSSUFOR0xFU1xuICAgICd0cmlhbmdsZS1zdHJpcCcsICAgLy8gUFJJTUlUSVZFX1RSSVNUUklQXG4gICAgdW5kZWZpbmVkICAgICAgICAgICAvLyBQUklNSVRJVkVfVFJJRkFOXG5dO1xuXG5jb25zdCBfYmxlbmRPcGVyYXRpb24gPSBbXG4gICAgJ2FkZCcsICAgICAgICAgICAgICAvLyBCTEVOREVRVUFUSU9OX0FERFxuICAgICdzdWJ0cmFjdCcsICAgICAgICAgLy8gQkxFTkRFUVVBVElPTl9TVUJUUkFDVFxuICAgICdyZXZlcnNlLXN1YnRyYWN0JywgLy8gQkxFTkRFUVVBVElPTl9SRVZFUlNFX1NVQlRSQUNUXG4gICAgJ21pbicsICAgICAgICAgICAgICAvLyBCTEVOREVRVUFUSU9OX01JTlxuICAgICdtYXgnICAgICAgICAgICAgICAgLy8gQkxFTkRFUVVBVElPTl9NQVhcbl07XG5cbmNvbnN0IF9ibGVuZEZhY3RvciA9IFtcbiAgICAnemVybycsICAgICAgICAgICAgICAgICAvLyBCTEVORE1PREVfWkVST1xuICAgICdvbmUnLCAgICAgICAgICAgICAgICAgIC8vIEJMRU5ETU9ERV9PTkVcbiAgICAnc3JjJywgICAgICAgICAgICAgICAgICAvLyBCTEVORE1PREVfU1JDX0NPTE9SXG4gICAgJ29uZS1taW51cy1zcmMnLCAgICAgICAgLy8gQkxFTkRNT0RFX09ORV9NSU5VU19TUkNfQ09MT1JcbiAgICAnZHN0JywgICAgICAgICAgICAgICAgICAvLyBCTEVORE1PREVfRFNUX0NPTE9SXG4gICAgJ29uZS1taW51cy1kc3QnLCAgICAgICAgLy8gQkxFTkRNT0RFX09ORV9NSU5VU19EU1RfQ09MT1JcbiAgICAnc3JjLWFscGhhJywgICAgICAgICAgICAvLyBCTEVORE1PREVfU1JDX0FMUEhBXG4gICAgJ3NyYy1hbHBoYS1zYXR1cmF0ZWQnLCAgLy8gQkxFTkRNT0RFX1NSQ19BTFBIQV9TQVRVUkFURVxuICAgICdvbmUtbWludXMtc3JjLWFscGhhJywgIC8vIEJMRU5ETU9ERV9PTkVfTUlOVVNfU1JDX0FMUEhBXG4gICAgJ2RzdC1hbHBoYScsICAgICAgICAgICAgLy8gQkxFTkRNT0RFX0RTVF9BTFBIQVxuICAgICdvbmUtbWludXMtZHN0LWFscGhhJywgIC8vIEJMRU5ETU9ERV9PTkVfTUlOVVNfRFNUX0FMUEhBXG4gICAgJ2NvbnN0YW50JywgICAgICAgICAgICAgLy8gQkxFTkRNT0RFX0NPTlNUQU5UXG4gICAgJ29uZS1taW51cy1jb25zdGFudCcgICAgLy8gQkxFTkRNT0RFX09ORV9NSU5VU19DT05TVEFOVFxuXTtcblxuY29uc3QgX2NvbXBhcmVGdW5jdGlvbiA9IFtcbiAgICAnbmV2ZXInLCAgICAgICAgICAgICAgICAvLyBGVU5DX05FVkVSXG4gICAgJ2xlc3MnLCAgICAgICAgICAgICAgICAgLy8gRlVOQ19MRVNTXG4gICAgJ2VxdWFsJywgICAgICAgICAgICAgICAgLy8gRlVOQ19FUVVBTFxuICAgICdsZXNzLWVxdWFsJywgICAgICAgICAgIC8vIEZVTkNfTEVTU0VRVUFMXG4gICAgJ2dyZWF0ZXInLCAgICAgICAgICAgICAgLy8gRlVOQ19HUkVBVEVSXG4gICAgJ25vdC1lcXVhbCcsICAgICAgICAgICAgLy8gRlVOQ19OT1RFUVVBTFxuICAgICdncmVhdGVyLWVxdWFsJywgICAgICAgIC8vIEZVTkNfR1JFQVRFUkVRVUFMXG4gICAgJ2Fsd2F5cycgICAgICAgICAgICAgICAgLy8gRlVOQ19BTFdBWVNcbl07XG5cbmNvbnN0IF9jdWxsTW9kZXMgPSBbXG4gICAgJ25vbmUnLCAgICAgICAgICAgICAgICAgLy8gQ1VMTEZBQ0VfTk9ORVxuICAgICdiYWNrJywgICAgICAgICAgICAgICAgIC8vIENVTExGQUNFX0JBQ0tcbiAgICAnZnJvbnQnICAgICAgICAgICAgICAgICAvLyBDVUxMRkFDRV9GUk9OVFxuXTtcblxuY29uc3QgX3N0ZW5jaWxPcHMgPSBbXG4gICAgJ2tlZXAnLCAgICAgICAgICAgICAgICAgLy8gU1RFTkNJTE9QX0tFRVBcbiAgICAnemVybycsICAgICAgICAgICAgICAgICAvLyBTVEVOQ0lMT1BfWkVST1xuICAgICdyZXBsYWNlJywgICAgICAgICAgICAgIC8vIFNURU5DSUxPUF9SRVBMQUNFXG4gICAgJ2luY3JlbWVudC1jbGFtcCcsICAgICAgLy8gU1RFTkNJTE9QX0lOQ1JFTUVOVFxuICAgICdpbmNyZW1lbnQtd3JhcCcsICAgICAgIC8vIFNURU5DSUxPUF9JTkNSRU1FTlRXUkFQXG4gICAgJ2RlY3JlbWVudC1jbGFtcCcsICAgICAgLy8gU1RFTkNJTE9QX0RFQ1JFTUVOVFxuICAgICdkZWNyZW1lbnQtd3JhcCcsICAgICAgIC8vIFNURU5DSUxPUF9ERUNSRU1FTlRXUkFQXG4gICAgJ2ludmVydCcgICAgICAgICAgICAgICAgLy8gU1RFTkNJTE9QX0lOVkVSVFxuXTtcblxuLy8gdGVtcCBhcnJheSB0byBhdm9pZCBhbGxvY2F0aW9uXG5jb25zdCBfYmluZEdyb3VwTGF5b3V0cyA9IFtdO1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgV2ViZ3B1UmVuZGVyUGlwZWxpbmUge1xuICAgIGNvbnN0cnVjdG9yKGRldmljZSkge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydCgnLi93ZWJncHUtZ3JhcGhpY3MtZGV2aWNlLmpzJykuV2ViZ3B1R3JhcGhpY3NEZXZpY2V9ICovXG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2FjaGUgb2YgdmVydGV4IGJ1ZmZlciBsYXlvdXRzXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtXZWJncHVWZXJ0ZXhCdWZmZXJMYXlvdXR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZlcnRleEJ1ZmZlckxheW91dCA9IG5ldyBXZWJncHVWZXJ0ZXhCdWZmZXJMYXlvdXQoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNhY2hlIG9mIHJlbmRlciBwaXBlbGluZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge01hcDxzdHJpbmcsIG9iamVjdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IE1hcCgpO1xuICAgIH1cblxuICAgIGdldChwcmltaXRpdmUsIHZlcnRleEZvcm1hdDAsIHZlcnRleEZvcm1hdDEsIHNoYWRlciwgcmVuZGVyVGFyZ2V0LCBiaW5kR3JvdXBGb3JtYXRzLCBibGVuZFN0YXRlLFxuICAgICAgICBkZXB0aFN0YXRlLCBjdWxsTW9kZSwgc3RlbmNpbEVuYWJsZWQsIHN0ZW5jaWxGcm9udCwgc3RlbmNpbEJhY2spIHtcblxuICAgICAgICAvLyByZW5kZXIgcGlwZWxpbmUgdW5pcXVlIGtleVxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShwcmltaXRpdmUsIHZlcnRleEZvcm1hdDAsIHZlcnRleEZvcm1hdDEsIHNoYWRlciwgcmVuZGVyVGFyZ2V0LCBiaW5kR3JvdXBGb3JtYXRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGVuZFN0YXRlLCBkZXB0aFN0YXRlLCBjdWxsTW9kZSwgc3RlbmNpbEVuYWJsZWQsIHN0ZW5jaWxGcm9udCwgc3RlbmNpbEJhY2spO1xuXG4gICAgICAgIC8vIGNhY2hlZCBwaXBlbGluZVxuICAgICAgICBsZXQgcGlwZWxpbmUgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgICAgICBpZiAoIXBpcGVsaW5lKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZVRvcG9sb2d5ID0gX3ByaW1pdGl2ZVRvcG9sb2d5W3ByaW1pdGl2ZS50eXBlXTtcbiAgICAgICAgICAgIERlYnVnLmFzc2VydChwcmltaXRpdmVUb3BvbG9neSwgYFVuc3VwcG9ydGVkIHByaW1pdGl2ZSB0b3BvbG9neWAsIHByaW1pdGl2ZSk7XG5cbiAgICAgICAgICAgIC8vIHBpcGVsaW5lIGxheW91dFxuICAgICAgICAgICAgY29uc3QgcGlwZWxpbmVMYXlvdXQgPSB0aGlzLmdldFBpcGVsaW5lTGF5b3V0KGJpbmRHcm91cEZvcm1hdHMpO1xuXG4gICAgICAgICAgICAvLyB2ZXJ0ZXggYnVmZmVyIGxheW91dFxuICAgICAgICAgICAgY29uc3QgdmVydGV4QnVmZmVyTGF5b3V0ID0gdGhpcy52ZXJ0ZXhCdWZmZXJMYXlvdXQuZ2V0KHZlcnRleEZvcm1hdDAsIHZlcnRleEZvcm1hdDEpO1xuXG4gICAgICAgICAgICAvLyBwaXBlbGluZVxuICAgICAgICAgICAgcGlwZWxpbmUgPSB0aGlzLmNyZWF0ZShwcmltaXRpdmVUb3BvbG9neSwgc2hhZGVyLCByZW5kZXJUYXJnZXQsIHBpcGVsaW5lTGF5b3V0LCBibGVuZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aFN0YXRlLCB2ZXJ0ZXhCdWZmZXJMYXlvdXQsIGN1bGxNb2RlLCBzdGVuY2lsRW5hYmxlZCwgc3RlbmNpbEZyb250LCBzdGVuY2lsQmFjayk7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIHBpcGVsaW5lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwaXBlbGluZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIHVuaXF1ZSBrZXkgZm9yIHRoZSByZW5kZXIgcGlwZWxpbmUuIEtlZXAgdGhpcyBmdW5jdGlvbiBhcyBsZWFuIGFzIHBvc3NpYmxlLFxuICAgICAqIGFzIGl0IGV4ZWN1dGVzIGZvciBlYWNoIGRyYXcgY2FsbC5cbiAgICAgKi9cbiAgICBnZXRLZXkocHJpbWl0aXZlLCB2ZXJ0ZXhGb3JtYXQwLCB2ZXJ0ZXhGb3JtYXQxLCBzaGFkZXIsIHJlbmRlclRhcmdldCwgYmluZEdyb3VwRm9ybWF0cyxcbiAgICAgICAgYmxlbmRTdGF0ZSwgZGVwdGhTdGF0ZSwgY3VsbE1vZGUsIHN0ZW5jaWxFbmFibGVkLCBzdGVuY2lsRnJvbnQsIHN0ZW5jaWxCYWNrKSB7XG5cbiAgICAgICAgbGV0IGJpbmRHcm91cEtleSA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmRHcm91cEZvcm1hdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJpbmRHcm91cEtleSArPSBiaW5kR3JvdXBGb3JtYXRzW2ldLmtleTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZlcnRleEJ1ZmZlckxheW91dEtleSA9IHRoaXMudmVydGV4QnVmZmVyTGF5b3V0LmdldEtleSh2ZXJ0ZXhGb3JtYXQwLCB2ZXJ0ZXhGb3JtYXQxKTtcbiAgICAgICAgY29uc3QgcmVuZGVyVGFyZ2V0S2V5ID0gcmVuZGVyVGFyZ2V0LmltcGwua2V5O1xuICAgICAgICBjb25zdCBzdGVuY2lsS2V5ID0gc3RlbmNpbEVuYWJsZWQgPyBzdGVuY2lsRnJvbnQua2V5ICsgc3RlbmNpbEJhY2sua2V5IDogJyc7XG5cbiAgICAgICAgcmV0dXJuIHZlcnRleEJ1ZmZlckxheW91dEtleSArIHNoYWRlci5pbXBsLnZlcnRleENvZGUgKyBzaGFkZXIuaW1wbC5mcmFnbWVudENvZGUgK1xuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0S2V5ICsgcHJpbWl0aXZlLnR5cGUgKyBiaW5kR3JvdXBLZXkgKyBibGVuZFN0YXRlLmtleSArIGRlcHRoU3RhdGUua2V5ICsgY3VsbE1vZGUgKyBzdGVuY2lsS2V5O1xuICAgIH1cblxuICAgIC8vIFRPRE86IHRoaXMgY291bGQgYmUgY2FjaGVkIHVzaW5nIGJpbmRHcm91cEtleVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uL2JpbmQtZ3JvdXAtZm9ybWF0LmpzJykuQmluZEdyb3VwRm9ybWF0W119IGJpbmRHcm91cEZvcm1hdHMgLSBBbiBhcnJheVxuICAgICAqIG9mIGJpbmQgZ3JvdXAgZm9ybWF0cy5cbiAgICAgKiBAcmV0dXJucyB7YW55fSBSZXR1cm5zIHRoZSBwaXBlbGluZSBsYXlvdXQuXG4gICAgICovXG4gICAgZ2V0UGlwZWxpbmVMYXlvdXQoYmluZEdyb3VwRm9ybWF0cykge1xuXG4gICAgICAgIGJpbmRHcm91cEZvcm1hdHMuZm9yRWFjaCgoZm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBfYmluZEdyb3VwTGF5b3V0cy5wdXNoKGZvcm1hdC5iaW5kR3JvdXBMYXlvdXQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkZXNjciA9IHtcbiAgICAgICAgICAgIGJpbmRHcm91cExheW91dHM6IF9iaW5kR3JvdXBMYXlvdXRzXG4gICAgICAgIH07XG5cbiAgICAgICAgX2xheW91dElkKys7XG4gICAgICAgIERlYnVnSGVscGVyLnNldExhYmVsKGRlc2NyLCBgUGlwZWxpbmVMYXlvdXREZXNjci0ke19sYXlvdXRJZH1gKTtcblxuICAgICAgICAvKiogQHR5cGUge0dQVVBpcGVsaW5lTGF5b3V0fSAqL1xuICAgICAgICBjb25zdCBwaXBlbGluZUxheW91dCA9IHRoaXMuZGV2aWNlLndncHUuY3JlYXRlUGlwZWxpbmVMYXlvdXQoZGVzY3IpO1xuICAgICAgICBEZWJ1Z0hlbHBlci5zZXRMYWJlbChwaXBlbGluZUxheW91dCwgYFBpcGVsaW5lTGF5b3V0LSR7X2xheW91dElkfWApO1xuICAgICAgICBEZWJ1Zy50cmFjZShUUkFDRUlEX1BJUEVMSU5FTEFZT1VUX0FMTE9DLCBgQWxsb2M6IElkICR7X2xheW91dElkfWAsIHtcbiAgICAgICAgICAgIGRlc2NyLFxuICAgICAgICAgICAgYmluZEdyb3VwRm9ybWF0c1xuICAgICAgICB9KTtcblxuICAgICAgICBfYmluZEdyb3VwTGF5b3V0cy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHJldHVybiBwaXBlbGluZUxheW91dDtcbiAgICB9XG5cbiAgICBnZXRCbGVuZChibGVuZFN0YXRlKSB7XG5cbiAgICAgICAgLy8gYmxlbmQgbmVlZHMgdG8gYmUgdW5kZWZpbmVkIHdoZW4gYmxlbmRpbmcgaXMgZGlzYWJsZWRcbiAgICAgICAgbGV0IGJsZW5kO1xuXG4gICAgICAgIGlmIChibGVuZFN0YXRlLmJsZW5kKSB7XG5cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7R1BVQmxlbmRTdGF0ZX0gKi9cbiAgICAgICAgICAgIGJsZW5kID0ge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogX2JsZW5kT3BlcmF0aW9uW2JsZW5kU3RhdGUuY29sb3JPcF0sXG4gICAgICAgICAgICAgICAgICAgIHNyY0ZhY3RvcjogX2JsZW5kRmFjdG9yW2JsZW5kU3RhdGUuY29sb3JTcmNGYWN0b3JdLFxuICAgICAgICAgICAgICAgICAgICBkc3RGYWN0b3I6IF9ibGVuZEZhY3RvcltibGVuZFN0YXRlLmNvbG9yRHN0RmFjdG9yXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWxwaGE6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBfYmxlbmRPcGVyYXRpb25bYmxlbmRTdGF0ZS5hbHBoYU9wXSxcbiAgICAgICAgICAgICAgICAgICAgc3JjRmFjdG9yOiBfYmxlbmRGYWN0b3JbYmxlbmRTdGF0ZS5hbHBoYVNyY0ZhY3Rvcl0sXG4gICAgICAgICAgICAgICAgICAgIGRzdEZhY3RvcjogX2JsZW5kRmFjdG9yW2JsZW5kU3RhdGUuYWxwaGFEc3RGYWN0b3JdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gdW5zdXBwb3J0ZWQgYmxlbmQgZmFjdG9yc1xuICAgICAgICAgICAgRGVidWcuYXNzZXJ0KGJsZW5kLmNvbG9yLnNyY0ZhY3RvciAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIERlYnVnLmFzc2VydChibGVuZC5jb2xvci5kc3RGYWN0b3IgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBEZWJ1Zy5hc3NlcnQoYmxlbmQuYWxwaGEuc3JjRmFjdG9yICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgRGVidWcuYXNzZXJ0KGJsZW5kLmFscGhhLmRzdEZhY3RvciAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBibGVuZDtcbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBnZXREZXB0aFN0ZW5jaWwoZGVwdGhTdGF0ZSwgcmVuZGVyVGFyZ2V0LCBzdGVuY2lsRW5hYmxlZCwgc3RlbmNpbEZyb250LCBzdGVuY2lsQmFjaykge1xuXG4gICAgICAgIC8qKiBAdHlwZSB7R1BVRGVwdGhTdGVuY2lsU3RhdGV9ICovXG4gICAgICAgIGxldCBkZXB0aFN0ZW5jaWw7XG4gICAgICAgIGNvbnN0IHsgZGVwdGgsIHN0ZW5jaWwgfSA9IHJlbmRlclRhcmdldDtcbiAgICAgICAgaWYgKGRlcHRoIHx8IHN0ZW5jaWwpIHtcblxuICAgICAgICAgICAgLy8gZm9ybWF0IG9mIGRlcHRoLXN0ZW5jaWwgYXR0YWNobWVudFxuICAgICAgICAgICAgZGVwdGhTdGVuY2lsID0ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogcmVuZGVyVGFyZ2V0LmltcGwuZGVwdGhGb3JtYXRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGRlcHRoXG4gICAgICAgICAgICBpZiAoZGVwdGgpIHtcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWwuZGVwdGhXcml0ZUVuYWJsZWQgPSBkZXB0aFN0YXRlLndyaXRlO1xuICAgICAgICAgICAgICAgIGRlcHRoU3RlbmNpbC5kZXB0aENvbXBhcmUgPSBfY29tcGFyZUZ1bmN0aW9uW2RlcHRoU3RhdGUuZnVuY107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHJlbmRlciB0YXJnZXQgZG9lcyBub3QgaGF2ZSBkZXB0aCBidWZmZXJcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWwuZGVwdGhXcml0ZUVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWwuZGVwdGhDb21wYXJlID0gJ2Fsd2F5cyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHN0ZW5jaWxcbiAgICAgICAgICAgIGlmIChzdGVuY2lsICYmIHN0ZW5jaWxFbmFibGVkKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgV2ViR1BVIG9ubHkgc3VwcG9ydHMgYSBzaW5nbGUgbWFzaywgd2UgdXNlIHRoZSBvbmUgZnJvbSBmcm9udCwgYnV0IG5vdCBmcm9tIGJhY2suXG4gICAgICAgICAgICAgICAgZGVwdGhTdGVuY2lsLnN0ZW5jaWxSZWFkTWFzID0gc3RlbmNpbEZyb250LnJlYWRNYXNrO1xuICAgICAgICAgICAgICAgIGRlcHRoU3RlbmNpbC5zdGVuY2lsV3JpdGVNYXNrID0gc3RlbmNpbEZyb250LndyaXRlTWFzaztcblxuICAgICAgICAgICAgICAgIGRlcHRoU3RlbmNpbC5zdGVuY2lsRnJvbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmU6IF9jb21wYXJlRnVuY3Rpb25bc3RlbmNpbEZyb250LmZ1bmNdLFxuICAgICAgICAgICAgICAgICAgICBmYWlsT3A6IF9zdGVuY2lsT3BzW3N0ZW5jaWxGcm9udC5mYWlsXSxcbiAgICAgICAgICAgICAgICAgICAgcGFzc09wOiBfc3RlbmNpbE9wc1tzdGVuY2lsRnJvbnQuenBhc3NdLFxuICAgICAgICAgICAgICAgICAgICBkZXB0aEZhaWxPcDogX3N0ZW5jaWxPcHNbc3RlbmNpbEZyb250LnpmYWlsXVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWwuc3RlbmNpbEJhY2sgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmU6IF9jb21wYXJlRnVuY3Rpb25bc3RlbmNpbEJhY2suZnVuY10sXG4gICAgICAgICAgICAgICAgICAgIGZhaWxPcDogX3N0ZW5jaWxPcHNbc3RlbmNpbEJhY2suZmFpbF0sXG4gICAgICAgICAgICAgICAgICAgIHBhc3NPcDogX3N0ZW5jaWxPcHNbc3RlbmNpbEJhY2suenBhc3NdLFxuICAgICAgICAgICAgICAgICAgICBkZXB0aEZhaWxPcDogX3N0ZW5jaWxPcHNbc3RlbmNpbEJhY2suemZhaWxdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZXB0aFN0ZW5jaWw7XG4gICAgfVxuXG4gICAgY3JlYXRlKHByaW1pdGl2ZVRvcG9sb2d5LCBzaGFkZXIsIHJlbmRlclRhcmdldCwgcGlwZWxpbmVMYXlvdXQsIGJsZW5kU3RhdGUsIGRlcHRoU3RhdGUsIHZlcnRleEJ1ZmZlckxheW91dCxcbiAgICAgICAgY3VsbE1vZGUsIHN0ZW5jaWxFbmFibGVkLCBzdGVuY2lsRnJvbnQsIHN0ZW5jaWxCYWNrKSB7XG5cbiAgICAgICAgY29uc3Qgd2dwdSA9IHRoaXMuZGV2aWNlLndncHU7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoJy4vd2ViZ3B1LXNoYWRlci5qcycpLldlYmdwdVNoYWRlcn0gKi9cbiAgICAgICAgY29uc3Qgd2ViZ3B1U2hhZGVyID0gc2hhZGVyLmltcGw7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtHUFVSZW5kZXJQaXBlbGluZURlc2NyaXB0b3J9ICovXG4gICAgICAgIGNvbnN0IGRlc2NyID0ge1xuICAgICAgICAgICAgdmVydGV4OiB7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiB3ZWJncHVTaGFkZXIuZ2V0VmVydGV4U2hhZGVyTW9kdWxlKCksXG4gICAgICAgICAgICAgICAgZW50cnlQb2ludDogd2ViZ3B1U2hhZGVyLnZlcnRleEVudHJ5UG9pbnQsXG4gICAgICAgICAgICAgICAgYnVmZmVyczogdmVydGV4QnVmZmVyTGF5b3V0XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBmcmFnbWVudDoge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogd2ViZ3B1U2hhZGVyLmdldEZyYWdtZW50U2hhZGVyTW9kdWxlKCksXG4gICAgICAgICAgICAgICAgZW50cnlQb2ludDogd2ViZ3B1U2hhZGVyLmZyYWdtZW50RW50cnlQb2ludCxcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBbXVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcHJpbWl0aXZlOiB7XG4gICAgICAgICAgICAgICAgdG9wb2xvZ3k6IHByaW1pdGl2ZVRvcG9sb2d5LFxuICAgICAgICAgICAgICAgIGZyb250RmFjZTogJ2NjdycsXG4gICAgICAgICAgICAgICAgY3VsbE1vZGU6IF9jdWxsTW9kZXNbY3VsbE1vZGVdXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBkZXB0aFN0ZW5jaWw6IHRoaXMuZ2V0RGVwdGhTdGVuY2lsKGRlcHRoU3RhdGUsIHJlbmRlclRhcmdldCwgc3RlbmNpbEVuYWJsZWQsIHN0ZW5jaWxGcm9udCwgc3RlbmNpbEJhY2spLFxuXG4gICAgICAgICAgICBtdWx0aXNhbXBsZToge1xuICAgICAgICAgICAgICAgIGNvdW50OiByZW5kZXJUYXJnZXQuc2FtcGxlc1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gdW5pZm9ybSAvIHRleHR1cmUgYmluZGluZyBsYXlvdXRcbiAgICAgICAgICAgIGxheW91dDogcGlwZWxpbmVMYXlvdXRcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBwcm92aWRlIGZyYWdtZW50IHRhcmdldHMgb25seSB3aGVuIHJlbmRlciB0YXJnZXQgY29udGFpbnMgY29sb3IgYnVmZmVyLCBvdGhlcndpc2UgcmVuZGVyaW5nIHRvIGRlcHRoIG9ubHlcbiAgICAgICAgLy8gVE9ETzogdGhlIGV4Y2x1c2lvbiBvZiBmcmFnbWVudCBoZXJlIHNob3VsZCBiZSByZWZsZWN0ZWQgaW4gdGhlIGtleSBnZW5lcmF0aW9uIChubyBibGVuZCwgbm8gZnJhZyAuLilcbiAgICAgICAgY29uc3QgY29sb3JGb3JtYXQgPSByZW5kZXJUYXJnZXQuaW1wbC5jb2xvckZvcm1hdDtcbiAgICAgICAgaWYgKGNvbG9yRm9ybWF0KSB7XG5cbiAgICAgICAgICAgIGxldCB3cml0ZU1hc2sgPSAwO1xuICAgICAgICAgICAgaWYgKGJsZW5kU3RhdGUucmVkV3JpdGUpIHdyaXRlTWFzayB8PSBHUFVDb2xvcldyaXRlLlJFRDtcbiAgICAgICAgICAgIGlmIChibGVuZFN0YXRlLmdyZWVuV3JpdGUpIHdyaXRlTWFzayB8PSBHUFVDb2xvcldyaXRlLkdSRUVOO1xuICAgICAgICAgICAgaWYgKGJsZW5kU3RhdGUuYmx1ZVdyaXRlKSB3cml0ZU1hc2sgfD0gR1BVQ29sb3JXcml0ZS5CTFVFO1xuICAgICAgICAgICAgaWYgKGJsZW5kU3RhdGUuYWxwaGFXcml0ZSkgd3JpdGVNYXNrIHw9IEdQVUNvbG9yV3JpdGUuQUxQSEE7XG5cbiAgICAgICAgICAgIGRlc2NyLmZyYWdtZW50LnRhcmdldHMucHVzaCh7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBjb2xvckZvcm1hdCxcbiAgICAgICAgICAgICAgICB3cml0ZU1hc2s6IHdyaXRlTWFzayxcbiAgICAgICAgICAgICAgICBibGVuZDogdGhpcy5nZXRCbGVuZChibGVuZFN0YXRlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBXZWJncHVEZWJ1Zy52YWxpZGF0ZSh0aGlzLmRldmljZSk7XG5cbiAgICAgICAgX3BpcGVsaW5lSWQrKztcbiAgICAgICAgRGVidWdIZWxwZXIuc2V0TGFiZWwoZGVzY3IsIGBSZW5kZXJQaXBlbGluZURlc2NyLSR7X3BpcGVsaW5lSWR9YCk7XG5cbiAgICAgICAgY29uc3QgcGlwZWxpbmUgPSB3Z3B1LmNyZWF0ZVJlbmRlclBpcGVsaW5lKGRlc2NyKTtcblxuICAgICAgICBEZWJ1Z0hlbHBlci5zZXRMYWJlbChwaXBlbGluZSwgYFJlbmRlclBpcGVsaW5lLSR7X3BpcGVsaW5lSWR9YCk7XG4gICAgICAgIERlYnVnLnRyYWNlKFRSQUNFSURfUkVOREVSUElQRUxJTkVfQUxMT0MsIGBBbGxvYzogSWQgJHtfcGlwZWxpbmVJZH1gLCBkZXNjcik7XG5cbiAgICAgICAgV2ViZ3B1RGVidWcuZW5kKHRoaXMuZGV2aWNlLCB7XG4gICAgICAgICAgICByZW5kZXJQaXBlbGluZTogdGhpcyxcbiAgICAgICAgICAgIGRlc2NyLFxuICAgICAgICAgICAgc2hhZGVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwaXBlbGluZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFdlYmdwdVJlbmRlclBpcGVsaW5lIH07XG4iXSwibmFtZXMiOlsiX3BpcGVsaW5lSWQiLCJfbGF5b3V0SWQiLCJfcHJpbWl0aXZlVG9wb2xvZ3kiLCJ1bmRlZmluZWQiLCJfYmxlbmRPcGVyYXRpb24iLCJfYmxlbmRGYWN0b3IiLCJfY29tcGFyZUZ1bmN0aW9uIiwiX2N1bGxNb2RlcyIsIl9zdGVuY2lsT3BzIiwiX2JpbmRHcm91cExheW91dHMiLCJXZWJncHVSZW5kZXJQaXBlbGluZSIsImNvbnN0cnVjdG9yIiwiZGV2aWNlIiwidmVydGV4QnVmZmVyTGF5b3V0IiwiV2ViZ3B1VmVydGV4QnVmZmVyTGF5b3V0IiwiY2FjaGUiLCJNYXAiLCJnZXQiLCJwcmltaXRpdmUiLCJ2ZXJ0ZXhGb3JtYXQwIiwidmVydGV4Rm9ybWF0MSIsInNoYWRlciIsInJlbmRlclRhcmdldCIsImJpbmRHcm91cEZvcm1hdHMiLCJibGVuZFN0YXRlIiwiZGVwdGhTdGF0ZSIsImN1bGxNb2RlIiwic3RlbmNpbEVuYWJsZWQiLCJzdGVuY2lsRnJvbnQiLCJzdGVuY2lsQmFjayIsImtleSIsImdldEtleSIsInBpcGVsaW5lIiwicHJpbWl0aXZlVG9wb2xvZ3kiLCJ0eXBlIiwiRGVidWciLCJhc3NlcnQiLCJwaXBlbGluZUxheW91dCIsImdldFBpcGVsaW5lTGF5b3V0IiwiY3JlYXRlIiwic2V0IiwiYmluZEdyb3VwS2V5IiwiaSIsImxlbmd0aCIsInZlcnRleEJ1ZmZlckxheW91dEtleSIsInJlbmRlclRhcmdldEtleSIsImltcGwiLCJzdGVuY2lsS2V5IiwidmVydGV4Q29kZSIsImZyYWdtZW50Q29kZSIsImZvckVhY2giLCJmb3JtYXQiLCJwdXNoIiwiYmluZEdyb3VwTGF5b3V0IiwiZGVzY3IiLCJiaW5kR3JvdXBMYXlvdXRzIiwiRGVidWdIZWxwZXIiLCJzZXRMYWJlbCIsIndncHUiLCJjcmVhdGVQaXBlbGluZUxheW91dCIsInRyYWNlIiwiVFJBQ0VJRF9QSVBFTElORUxBWU9VVF9BTExPQyIsImdldEJsZW5kIiwiYmxlbmQiLCJjb2xvciIsIm9wZXJhdGlvbiIsImNvbG9yT3AiLCJzcmNGYWN0b3IiLCJjb2xvclNyY0ZhY3RvciIsImRzdEZhY3RvciIsImNvbG9yRHN0RmFjdG9yIiwiYWxwaGEiLCJhbHBoYU9wIiwiYWxwaGFTcmNGYWN0b3IiLCJhbHBoYURzdEZhY3RvciIsImdldERlcHRoU3RlbmNpbCIsImRlcHRoU3RlbmNpbCIsImRlcHRoIiwic3RlbmNpbCIsImRlcHRoRm9ybWF0IiwiZGVwdGhXcml0ZUVuYWJsZWQiLCJ3cml0ZSIsImRlcHRoQ29tcGFyZSIsImZ1bmMiLCJzdGVuY2lsUmVhZE1hcyIsInJlYWRNYXNrIiwic3RlbmNpbFdyaXRlTWFzayIsIndyaXRlTWFzayIsImNvbXBhcmUiLCJmYWlsT3AiLCJmYWlsIiwicGFzc09wIiwienBhc3MiLCJkZXB0aEZhaWxPcCIsInpmYWlsIiwid2ViZ3B1U2hhZGVyIiwidmVydGV4IiwibW9kdWxlIiwiZ2V0VmVydGV4U2hhZGVyTW9kdWxlIiwiZW50cnlQb2ludCIsInZlcnRleEVudHJ5UG9pbnQiLCJidWZmZXJzIiwiZnJhZ21lbnQiLCJnZXRGcmFnbWVudFNoYWRlck1vZHVsZSIsImZyYWdtZW50RW50cnlQb2ludCIsInRhcmdldHMiLCJ0b3BvbG9neSIsImZyb250RmFjZSIsIm11bHRpc2FtcGxlIiwiY291bnQiLCJzYW1wbGVzIiwibGF5b3V0IiwiY29sb3JGb3JtYXQiLCJyZWRXcml0ZSIsIkdQVUNvbG9yV3JpdGUiLCJSRUQiLCJncmVlbldyaXRlIiwiR1JFRU4iLCJibHVlV3JpdGUiLCJCTFVFIiwiYWxwaGFXcml0ZSIsIkFMUEhBIiwiV2ViZ3B1RGVidWciLCJ2YWxpZGF0ZSIsImNyZWF0ZVJlbmRlclBpcGVsaW5lIiwiVFJBQ0VJRF9SRU5ERVJQSVBFTElORV9BTExPQyIsImVuZCIsInJlbmRlclBpcGVsaW5lIl0sIm1hcHBpbmdzIjoiOzs7OztBQU1BLElBQUlBLFdBQVcsR0FBRyxDQUFDLENBQUE7QUFDbkIsSUFBSUMsU0FBUyxHQUFHLENBQUMsQ0FBQTtBQUVqQixNQUFNQyxrQkFBa0IsR0FBRyxDQUN2QixZQUFZO0FBQVE7QUFDcEIsV0FBVztBQUFTO0FBQ3BCQyxTQUFTO0FBQVc7QUFDcEIsWUFBWTtBQUFRO0FBQ3BCLGVBQWU7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
